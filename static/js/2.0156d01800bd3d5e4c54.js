webpackJsonp([2],{"/81R":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("RUzx"),s=a.n(i),o=a("qaB4"),n=a("7+uW"),r=a("sUu7"),l=a("+cgA"),c=a("iR9c"),d=a("moEt");n.default.use(r.a);var u={name:"update-trucks",components:{LaddaBtn:o.a,Notification:Notification,Multiselect:s.a,MultiSelectUser:l.a,SingleSelectCompanyProfile:d.a},data:function(){return{isProcessingUpdate:!1,truckData:{vehicle_type:"",weight:null,trunk_volume:"",vehicle_reg_number:"",code:"",color:""},optionWeight:[{value:"1.25",text:"1.25 Tấn"},{value:"1.9",text:"1.9 Tấn"},{value:"2.5",text:"2.5 Tấn"},{value:"3.5",text:"3.5 Tấn"},{value:"5",text:"5 Tấn"},{value:"8",text:"8 Tấn"}],masterProfile:{master_id:""},masterInfo:{id:""},allow_edit_level:!1,toogleLog:!1,canCustomUserName:!1}},created:function(){if(this.isAdd)this.$route.params.id&&(this.masterInfo.id=this.$route.params.id,this.getCompanyProfile());else{if(!this.$route.params.id)return;this.$route.params.id&&this.getTruckDetail()}},computed:{isAdd:function(){return"add-vehicle-company"===this.$route.name},isEdit:function(){return"edit-vehicle-company"===this.$route.name}},watch:{},methods:{updateVehicle:function(){var t=this,e={company_id:this.masterInfo.id,weight:this.truckData.weight,vehicle_type:this.truckData.vehicle_type,trunk_volume:this.truckData.trunk_volume,vehicle_reg_number:this.truckData.vehicle_reg_number,code:this.truckData.code,color:this.truckData.color};if(this.isEdit){var a=this.$route.params.id;e.id=a}c.a.updateVehicle(e).then(function(e){if(e.data.hasOwnProperty("success"))if(e.data.success){var a=e.data.data.Truck.id;t.$notify({group:"default",type:"text-white bg-primary",title:"Thành công",text:e.data.message}),t.$router.push({name:"edit-vehicle-company",params:{id:a}})}else t.$notify({group:"default",type:"text-white bg-warning",title:"Xảy ra lỗi",text:e.data.message});else t.notify.success=!1}).catch(function(e){t.notify.success=!1,t.notify.message="Có lỗi xảy ra, liên hệ IT để được hỗ trợ",t.showNotification(!1)}).then(function(){t.isProcessingUpdate=!1})},handleChooseProfileCompany:function(t){this.masterInfo.id=t?t.id:"",this.getCompanyProfile(t.id)},getCompanyProfile:function(){var t=this,e={master_id:this.masterInfo.id};c.a.getCompanyProfile(e).then(function(e){e.data.success&&(t.masterInfo=e.data.data.detail)})},getTruckDetail:function(){var t=this,e={truck_id:this.$route.params.id};c.a.getTruckDetail(e).then(function(e){if(e.data.hasOwnProperty("success"))if(e.data.success){var a=e.data.data;t.masterInfo=a.OrganizationProfile,t.truckData=a.Truck}else t.notify.success=!1,t.notify.message=e.data.message,t.showNotification(!1);else t.notify.message="Có lỗi xảy ra, không load được thông tin tài khoản",t.showNotification(!1)}).catch(function(t){console.log(t)}).then(function(){t.$stopLoading()})}}},m=a("XyMi");var h=function(t){a("LZVb"),a("6aA6"),a("0Hlu")},p=Object(m.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"update-user"},[a("div",{staticClass:"row header"},[a("div",{staticClass:"col-md-8"},[t.isAdd?a("h2",[t._v("Thêm tài khoản")]):a("h2",[t._v("Sửa thông tin xe liên kết")])]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("b-row",[a("b-col",{staticClass:"text-right",attrs:{md:"12"}},[a("router-link",{staticClass:"btn btn-outline-success ml-1",attrs:{to:{name:"manager-master-company-profile"}}},[a("i",{staticClass:"ion ion-ios-arrow-back"}),t._v(" Quản lý Profile Công ty")])],1)],1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 create-user"},[a("div",{staticClass:"card mb-4"},[a("div",{staticClass:"row no-gutters row-bordered"},[a("div",{staticClass:"col-md-4 find-master-profile"},[a("div",{staticClass:"col-md-12 col-lg-12 col-xl-12"},[t._m(0),t._v(" "),a("div",{staticClass:"card-body"},[t.isAdd?a("b-form-group",{staticClass:"w-100",attrs:{label:"Tìm kiếm Profile"}},[a("b-input-group",[a("single-select-company-profile",{attrs:{"show-info":!0,"master-id":t.masterInfo.id},on:{handleChooseProfileCompany:t.handleChooseProfileCompany},model:{value:t.masterInfo.id,callback:function(e){t.$set(t.masterInfo,"id",e)},expression:"masterInfo.id"}})],1)],1):t._e(),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6 col-xl-5 text-muted mb-3"},[t._v("Loại công ty")]),t._v(" "),a("div",{staticClass:"col-6 col-xl-7 mb-3"},[a("span",{staticClass:"text-big"},[t._v(t._s(t.masterInfo.organization_type))])]),t._v(" "),a("div",{staticClass:"col-6 col-xl-5 text-muted mb-3"},[t._v("Tên công ty")]),t._v(" "),a("div",{staticClass:"col-6 col-xl-7 mb-3"},[a("span",{staticClass:"text-big"},[t._v(t._s(t.masterInfo.fullname))])]),t._v(" "),a("div",{staticClass:"col-6 col-xl-5 text-muted mb-3"},[t._v("Mã số thuế")]),t._v(" "),a("div",{staticClass:"col-6 col-xl-7 mb-3"},[a("span",{staticClass:"text-big"},[t._v(t._s(t.masterInfo.tax_iden_number))])]),t._v(" "),a("div",{staticClass:"col-6 col-xl-5 text-muted mb-3"},[t._v("Điện thoại liên hệ")]),t._v(" "),a("div",{staticClass:"col-6 col-xl-7 mb-3"},[a("span",{staticClass:"text-big"},[t._v(t._s(t.masterInfo.contact_tel))])]),t._v(" "),a("div",{staticClass:"col-6 col-xl-5 text-muted mb-3"},[t._v("Email liên hệ")]),t._v(" "),a("div",{staticClass:"col-6 col-xl-7 mb-3"},[a("span",{staticClass:"text-big"},[t._v(t._s(t.masterInfo.contact_email))])])]),t._v(" "),a("div",[a("router-link",{attrs:{to:{name:"edit-master-profile-company",params:{id:t.masterProfile.master_id}}}},[t._v("Chi tiết profile công ty"),a("i",{staticClass:"ion ion-ios-arrow-dropright"})])],1)],1)])]),t._v(" "),a("div",{staticClass:"col-md-8 input-user-info"},[a("div",{staticClass:"row no-gutters"},[a("div",{staticClass:"col-md-12 col-lg-12 col-xl-12"},[t._m(1),t._v(" "),a("div",{staticClass:"card-body"},[a("b-form-row",[a("b-form-group",{staticClass:"col-md-4"},[a("template",{slot:"label"},[t._v("\n                                                Loại xe\n                                            ")]),t._v(" "),a("b-form-input",{attrs:{id:"vehicle_type",name:"vehicle_type",placeholder:"Nhập loại xe, ví dụ: xe tải, congtainer, .."},model:{value:t.truckData.vehicle_type,callback:function(e){t.$set(t.truckData,"vehicle_type",e)},expression:"truckData.vehicle_type"}})],2),t._v(" "),a("b-form-group",{staticClass:"col-md-4"},[a("template",{slot:"label"},[t._v("\n                                                Nhập biển số xe\n                                            ")]),t._v(" "),a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-danger":t.errors.has("code")},attrs:{id:"code",name:"code",placeholder:"Nhập biển số"},model:{value:t.truckData.code,callback:function(e){t.$set(t.truckData,"code",e)},expression:"truckData.code"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"required"==t.errors.firstRule("code"),expression:"errors.firstRule('code') == 'required'"}],staticClass:"help is-danger"},[t._v("Không để trống trường này ")])],2),t._v(" "),a("b-form-group",{staticClass:"col-md-4"},[a("template",{slot:"label"},[t._v("\n                                                Số đăng kí xe\n                                            ")]),t._v(" "),a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-danger":t.errors.has("vehicle_reg_number")},attrs:{id:"vehicle_reg_number",name:"vehicle_reg_number",placeholder:"Nhập số đăng kí xe"},model:{value:t.truckData.vehicle_reg_number,callback:function(e){t.$set(t.truckData,"vehicle_reg_number",e)},expression:"truckData.vehicle_reg_number"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"required"==t.errors.firstRule("password_confirm"),expression:"errors.firstRule('password_confirm') == 'required'"}],staticClass:"help is-danger"},[t._v("Không để trống trường này ")])],2),t._v(" "),a("b-form-group",{staticClass:"col-md-4"},[a("template",{slot:"label"},[t._v("\n                                                Tải trọng\n                                            ")]),t._v(" "),a("b-form-select",{staticClass:"mb-3",attrs:{options:t.optionWeight},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("-- Chọn tải trọng --")])]},proxy:!0}]),model:{value:t.truckData.weight,callback:function(e){t.$set(t.truckData,"weight",e)},expression:"truckData.weight"}})],2),t._v(" "),a("b-form-group",{staticClass:"col-md-4"},[a("template",{slot:"label"},[t._v("\n                                                Thể tích thùng xe\n                                            ")]),t._v(" "),a("b-form-input",{attrs:{id:"trunk_volume",name:"trunk_volume",placeholder:"Nhập thể tích thùng xe (khối)"},model:{value:t.truckData.trunk_volume,callback:function(e){t.$set(t.truckData,"trunk_volume",e)},expression:"truckData.trunk_volume"}})],2),t._v(" "),a("b-form-group",{staticClass:"col-md-4"},[a("template",{slot:"label"},[t._v("\n                                                Màu xe\n                                            ")]),t._v(" "),a("b-form-input",{attrs:{id:"color",name:"color",placeholder:"Màu xe"},model:{value:t.truckData.color,callback:function(e){t.$set(t.truckData,"color",e)},expression:"truckData.color"}})],2)],1)],1)])])])])])])]),t._v(" "),a("div",{staticClass:"card-footer border-0 text-center py-3"},[t.isAdd?a("ladda-btn",{staticClass:"btn btn-primary",attrs:{loading:t.isProcessingUpdate,"data-style":"expand-right"},nativeOn:{click:function(e){return t.updateVehicle()}}},[a("i",{staticClass:"ion ion-ios-add"}),t._v(" Thêm xe liên kết\n        ")]):a("ladda-btn",{staticClass:"btn btn-info",attrs:{loading:t.isProcessingUpdate,"data-style":"expand-right"},nativeOn:{click:function(e){return t.updateVehicle()}}},[a("i",{staticClass:"icon ion-md-archive"}),t._v(" Cập nhật\n        ")])],1),t._v(" "),a("notifications",{attrs:{group:"add-user-company"}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("h6",{staticClass:"card-header"},[e("i",{staticClass:"ion  ion-ios-add-circle"}),this._v(" Thông tin profile công ty")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h6",{staticClass:"card-header"},[e("i",{staticClass:"ion  ion-ios-add-circle"}),this._v(" Thông tin xe liên kết")])}],!1,h,null,null);e.default=p.exports},"0Hlu":function(t,e){},moEt:function(t,e,a){"use strict";var i=a("iR9c"),s=a("RUzx"),o={name:"singe-select-company-profile",props:{masterId:{default:""},showInfo:{type:Boolean,default:!1}},components:{Multiselect:a.n(s).a},data:function(){return{profileOption:null,profileOptions:[],saveAllProfileOption:[],masterInfo:[]}},created:function(){this.getCompanyProfileList()},watch:{profileOption:function(t,e){this.$emit("handleChooseProfileCompany",t)}},methods:{getCompanyProfileList:function(){var t=this;this.$startLoading(),i.a.getCompanyProfileList().then(function(e){e.data.success&&(t.profileOptions=e.data.data.data,t.saveAllProfileOption=e.data.data.data,t.profileOption=t.masterId?t.profileOptions.find(function(e){return e.id===t.masterId}):null)}).catch(function(t){console.log("where error: handleChooseObjectType")}).then(function(){t.$stopLoading()})},search:function(t){var e=this.saveAllProfileOption.filter(function(e){return-1!==(e.fullname.toLowerCase()+e.tax_iden_number.toLowerCase()).search(t)});e.length>0&&(this.profileOptions=e)},customLabel:function(t){return""+t.fullname}}},n=a("XyMi"),r=Object(n.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-100"},[a("multiselect",{attrs:{options:t.profileOptions,placeholder:"Tìm kiếm theo tên","track-by":"id",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn","custom-label":t.customLabel,"allow-empty":!1,searchable:!0,"internal-search":!1,"show-no-results":!1},on:{"search-change":t.search},model:{value:t.profileOption,callback:function(e){t.profileOption=e},expression:"profileOption"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")])])],1)},[],!1,null,null,null);e.a=r.exports}});