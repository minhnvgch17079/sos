webpackJsonp([71],{ot6o:function(e,a){},xgCH:function(e,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=s("vxzc"),t=s("PJh5"),n=s.n(t),o=s("hC/b"),r={name:"check-duplicate-shop",components:{Moment:n.a,commonHelper:o.a,saleService:i.a},data:function(){return{shopCode:"",phoneNumber:"",bankNumber:"",emailShop:"",isDisable:!1,isDisableShop:!1,filter:null,dataShops:[],fields:[{key:"code",label:"Mã shop",sortable:!0},{key:"name",label:"Tên shop",sortable:!0},{key:"manager",label:"Người quản lí",sortable:!0},{key:"created",label:"Thời gian tạo",sortable:!0},{key:"f_pkg_time_ss",label:"Ngày lấy đơn thành công đâu tiên",sortable:!0},{key:"l_pkg_time",label:"Ngày lấy đơn thành công cuối cùng",sortable:!0}],isBusy:!1,paginConfig:{per_page:10,current_page:1,total_row:0}}},watch:{shopCode:function(e,a){""===e?this.isDisable=!1:(this.isDisable=!0,this.phoneNumber="",this.bankNumber="",this.emailShop="")},phoneNumber:function(e,a){""===e?this.isDisableShop=!1:(this.isDisableShop=!0,this.shopCode="")},emailShop:function(e,a){""===e?this.isDisableShop=!1:(this.isDisableShop=!0,this.shopCode="")},bankNumber:function(e,a){""===e?this.isDisableShop=!1:(this.isDisableShop=!0,this.shopCode="")}},methods:{onFiltered:function(e){this.paginConfig.total_row=e.length,this.paginConfig.current_page=1},clearSearch:function(){this.phoneNumber="",this.bankNumber="",this.emailShop="",this.shopCode=""},search:function(){var e=this;if(this.dataShops=[],""===this.shopCode&&""===this.phoneNumber&&""===this.emailShop&&""===this.bankNumber)o.a.showMessage("Vui lòng nhập shop code, số điện thoại, email hoặc tài khoản ngân hàng!","warning");else{this.isBusy=!0;var a={};if(""!==this.shopCode&&(a.shop_code=this.shopCode.replace(/\s+/g,"")),""!==this.phoneNumber){if(!this.validatePhone(this.phoneNumber))return o.a.showMessage("Số điện thoại không hợp lệ!","warning"),void(this.isBusy=!1);a.phone=this.phoneNumber.replace(/([+]|[.]|\s+)/g,"")}if(""!==this.emailShop){if(!this.validateEmail(this.emailShop))return o.a.showMessage("Email không hợp lệ!","warning"),void(this.isBusy=!1);a.email=this.emailShop.replace(/\s+/g,"")}if(""!==this.bankNumber){if(!this.validateBank(this.bankNumber))return o.a.showMessage("Số tài khoản ngân hàng không hợp lệ!","warning"),void(this.isBusy=!1);a.bank=this.bankNumber.replace(/\s+/g,"")}i.a.checkDuplicateShop(a).then(function(a){a.data.success?(o.a.showMessage(a.data.message,"success"),e.paginConfig.total_row=a.data.count,e.dataShops=a.data.data.map(function(e){return{code:e.ErpShop.code,name:e.ErpShop.name,created:e.ErpShop.created,manager:null!==e.ErpUser.username?e.ErpUser.fullname+" - "+e.ErpUser.username:"",l_pkg_time:e.ErpShopPackage.l_pkg_time,f_pkg_time_ss:e.ErpShopPackage.f_pkg_time_ss}})):o.a.showMessage(a.data.message,"warning"),e.isBusy=!1}).catch(function(e){console.log(e)})}},validateEmail:function(e){return!!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(.\w{2,3})+$/.test(e)},validateBank:function(e){return!!/[0-9]+/.test(e.replace(/\s+/g,""))},validatePhone:function(e){return!/d/.test(e.replace(/([+]|[.]|\s+)/g,""))}}},l=s("XyMi");var h=function(e){s("ot6o")},p=Object(l.a)(r,function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("b-card",{attrs:{"no-body":""}},[s("b-card-body",[s("h3",[e._v("Kiểm tra shop trùng:")]),e._v(" "),s("hr"),e._v(" "),s("div",{staticClass:"dis-content"},[s("b-row",{staticClass:"w-300 mt-3 mr-1 ml-1"},[s("b-form-input",{attrs:{placeholder:"Nhập mã shop",disabled:e.isDisableShop},model:{value:e.shopCode,callback:function(a){e.shopCode=a},expression:"shopCode"}})],1),e._v(" "),s("b-row",{staticClass:"w-300 mt-3 mr-1 ml-1"},[s("b-form-input",{attrs:{placeholder:"Nhập số điện thoại",disabled:e.isDisable},model:{value:e.phoneNumber,callback:function(a){e.phoneNumber=a},expression:"phoneNumber"}})],1),e._v(" "),s("b-row",{staticClass:"w-300 mt-3 mr-1 ml-1"},[s("b-form-input",{attrs:{placeholder:"Nhập email",disabled:e.isDisable},model:{value:e.emailShop,callback:function(a){e.emailShop=a},expression:"emailShop"}})],1),e._v(" "),s("b-row",{staticClass:"w-300 mt-3 mr-1 ml-1"},[s("b-form-input",{attrs:{placeholder:"Nhập số tài khoản ngân hàng",disabled:e.isDisable},model:{value:e.bankNumber,callback:function(a){e.bankNumber=a},expression:"bankNumber"}})],1),e._v(" "),s("b-row",{staticClass:"mt-3 mr-1 ml-1 dis-inline"},[s("b-button",{staticClass:"w-button",attrs:{variant:"success mr-1"},on:{click:e.search}},[s("i",{staticClass:"ion ion-md-search"}),e._v(" Tìm kiếm")]),e._v(" "),s("b-button",{staticClass:"w-button",attrs:{variant:"danger ml-1"},on:{click:e.clearSearch}},[s("i",{staticClass:"ion ion-ios-close-circle-outline"}),e._v(" Xóa")])],1)],1),s("br"),e._v(" "),s("hr"),s("br"),e._v(" "),s("b-table",{ref:"dataTable",staticClass:"card-table",staticStyle:{"text-align":"center"},attrs:{id:"shop-duplicate",items:e.dataShops,fields:e.fields,striped:!1,bordered:!0,outlined:!0,hover:!0,"per-page":e.paginConfig.per_page,"current-page":e.paginConfig.current_page,filter:e.filter},on:{filtered:e.onFiltered}}),e._v(" "),e.isBusy?s("div",{staticClass:"sk-folding-cube sk-primary"},[s("div",{staticClass:"sk-cube1 sk-cube"}),e._v(" "),s("div",{staticClass:"sk-cube2 sk-cube"}),e._v(" "),s("div",{staticClass:"sk-cube4 sk-cube"}),e._v(" "),s("div",{staticClass:"sk-cube3 sk-cube"})]):e._e(),e._v(" "),e.paginConfig.total_row>0?s("b-pagination",{staticClass:"mt-2",attrs:{"total-rows":e.paginConfig.total_row,"per-page":e.paginConfig.per_page,align:"center",size:"sm"},model:{value:e.paginConfig.current_page,callback:function(a){e.$set(e.paginConfig,"current_page",a)},expression:"paginConfig.current_page"}}):e._e()],1)],1)},[],!1,h,"data-v-21f2aebf",null);a.default=p.exports}});