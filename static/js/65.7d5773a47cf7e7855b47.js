webpackJsonp([65],{Mt2M:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("IC97"),i=s("PJh5"),o=s.n(i),n=s("fAdw"),l=s("KVzY"),c=s("7+uW"),r=s("4WGu");c.default.use(l.default);var d={components:{Datepicker:e.a},data:function(){return{from:o()().format("YYYY-MM-DD"),to:o()().format("YYYY-MM-DD"),loading:[!1,!1],subjects:"",uuid:"",listFiles:[],pageData:{currentPage:1,totalPages:0,totalItems:0,perPage:10,sortBy:"id",sortDesc:!1},inputDisable:!1,domainDownload:r.a.domainDownloadFile,dismissCountDown:0,loadingExcel:!1,loadingExcelHtml:'\n      <div class="sk-folding-cube sk-primary">\n        <div class="sk-cube1 sk-cube"></div>\n        <div class="sk-cube2 sk-cube"></div>\n        <div class="sk-cube4 sk-cube"></div>\n        <div class="sk-cube3 sk-cube"></div>\n      </div>\n      <h5 class="text-center mb-0">LOADING...</h5>\n    '}},methods:{resetForm:function(){this.subjects="",this.uuid=""},searchFileDownload:function(t,a){var s=this,e={subjects:s.subjects,uuid:s.uuid,created_from:this.customFormatter(s.from),created_to:this.customFormatter(s.to),page:t,limit:s.pageData.perPage};a&&(this.pageData.currentPage=1,e.page=1),s.loadingExcel=!0,n.a.fileUploadInfo(e).then(function(t){t.data.success&&(s.listFiles=t.data.data,s.pageData.totalItems=t.data.options.total,s.pageData.totalPages=t.data.options.total_page)}).catch(function(t){}).then(function(){s.loadingExcel=!1,s.resetForm()})},customFormatter:function(t){return o()(t).format("YYYY-MM-DD")},dateSelectedFromInChild:function(t){this.from=t},dateSelectedToInChild:function(t){this.to=t},pageChanged:function(t){this.searchFileDownload(t),this.pageData.currentPage=t},countDownChanged:function(t){this.dismissCountDown=t}},computed:{showResult:function(){return this.listFiles.length>0}},created:function(){var t=new URL(window.location).searchParams.get("success");t&&"true"===t&&(this.dismissCountDown=5),this.searchFileDownload(this.pageData.currentPage)}},u=s("XyMi");var b=function(t){s("6aA6"),s("zBTK")},p=Object(u.a)(d,function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[t._m(0),t._v(" "),s("form",[s("b-form-row",[s("div",{staticClass:"col-md-12"},[s("b-form-group",{attrs:{horizontal:"","label-cols":1,label:"Người upload","label-for":"input_subjects"}},[s("b-form-input",{attrs:{type:"text",id:"input_subjects",placeholder:"Nhiều người tạo cách nhau bằng dấu phẩy. Ví dụ: amdmin,user1..."},model:{value:t.subjects,callback:function(a){t.subjects=a},expression:"subjects"}})],1)],1)]),t._v(" "),s("b-form-row",[s("div",{staticClass:"col-md-12"},[s("b-form-group",{attrs:{horizontal:"","label-cols":1,label:"File ID","label-for":"input_uuid"}},[s("b-form-input",{attrs:{type:"text",id:"input_uuid",placeholder:"Nhiều tên file cách nhau bằng dấu phẩy. Ví dụ: file1,file2..."},model:{value:t.uuid,callback:function(a){t.uuid=a},expression:"uuid"}})],1)],1)]),t._v(" "),s("b-form-row",[s("div",{staticClass:"col-md-6"},[s("b-form-group",{attrs:{horizontal:"","label-cols":2,label:"Từ"}},[s("datepicker",{staticClass:"from-date",attrs:{bootstrapStyling:!0,format:t.customFormatter,disabled:t.inputDisable},on:{selected:t.dateSelectedFromInChild},model:{value:t.from,callback:function(a){t.from=a},expression:"from"}})],1)],1),t._v(" "),s("div",{staticClass:"col-md-6"},[s("b-form-group",{attrs:{horizontal:"","label-cols":1,label:"Đến"}},[s("datepicker",{staticClass:"from-date",attrs:{bootstrapStyling:!0,format:t.customFormatter,disabled:t.inputDisable},on:{selected:t.dateSelectedToInChild},model:{value:t.to,callback:function(a){t.to=a},expression:"to"}})],1)],1)]),t._v(" "),s("b-form-row",[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"align-content-center text-center"},[s("b-btn",{attrs:{type:"button"},on:{click:t.resetForm}},[t._v("\n            Nhập lại\n          ")]),t._v(" "),s("b-btn",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return t.searchFileDownload(t.pageData.currentPage,!0)}}},[s("i",{staticClass:"sidenav-icon ion ion-md-search"}),t._v("\n            Tìm kiếm\n          ")])],1)])])],1),t._v(" "),s("br"),t._v(" "),s("b-alert",{attrs:{show:t.dismissCountDown,dismissible:"",variant:"success"},on:{dismissed:function(a){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[t._v("\n    Upload file thành công\n  ")]),t._v(" "),s("div",{staticClass:"result",attrs:{id:"results"}},[t.showResult?s("b-card",{attrs:{"no-body":""}},[s("div",{staticClass:"table-result"},[s("div",{staticClass:"table-responsive mb-4"},[s("table",{staticClass:"table mb-0 table-bordered"},[s("thead",{staticStyle:{width:"100%"}},[s("tr",[s("th",[t._v("File")]),t._v(" "),s("th",[t._v("Trạng thái")])])]),t._v(" "),s("tbody",t._l(t.listFiles,function(a,e){return s("tr",{key:e},[s("td",{attrs:{scope:"row","data-file-id":a.id}},[s("span",[t._v("ID: ")]),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.id))]),s("br"),t._v(" "),s("span",[t._v("Thời gian: ")]),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.created))]),s("br"),t._v(" "),s("span",[t._v("Người tạo: ")]),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.subject))]),s("br"),t._v(" "),s("span",[t._v("File ID: ")]),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.uuid))]),s("br"),t._v(" "),s("span",[t._v("Tên file: ")]),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.old_filename))]),s("br")]),t._v(" "),s("td",[s("span",[t._v(t._s(a.status))]),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.process)+" / "+t._s(a.total)+" dòng")])])])}),0)])])]),t._v(" "),s("b-card-body",{staticClass:"pt-0 pb-3"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm pt-3"},[s("b-pagination",{attrs:{"total-rows":t.pageData.totalItems,"per-page":t.pageData.perPage},on:{change:t.pageChanged},model:{value:t.pageData.currentPage,callback:function(a){t.$set(t.pageData,"currentPage",a)},expression:"pageData.currentPage"}})],1),t._v(" "),s("div",{staticClass:"col-sm text-sm-left text-center pt-3"},[t.pageData.totalItems?s("span",{staticClass:"text-muted"},[t._v("Trang "+t._s(t.pageData.currentPage)+" trên "+t._s(t.pageData.totalPages))]):t._e()])])])],1):t._e(),t._v(" "),t.showResult?t._e():s("div",{staticClass:"no-data"},[s("b-alert",{attrs:{show:"",variant:"danger"}},[t._v(" Không có dữ liệu phù hợp, vui lòng thử lại với điều kiện tìm kiếm khác!")])],1),t._v(" "),t.loadingExcel?s("BlockUI",{attrs:{message:"Dữ liệu đang được xử lý, vui lòng đợi!",html:t.loadingExcelHtml}}):t._e()],1)],1)},[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"ui-block"},[a("h4",{staticClass:"ui-block-heading text-center"},[this._v("Quản lý upload")])])}],!1,b,"data-v-62d9004e",null);a.default=p.exports},zBTK:function(t,a){}});