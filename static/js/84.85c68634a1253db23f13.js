webpackJsonp([84],{FWHU:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),i=a("wX3c"),o=a("sUu7");n.default.use(o.a,{fieldsBagName:"veeFields"});var c={components:{},computed:{rows:function(){return this.items.length}},created:function(){var t=this;i.a.getTypeStaff().then(function(e){e.data.success&&(t.staff=e.data.data)}).catch(function(e){t.errors.push(e)}),i.a.getCalcuMethod().then(function(e){if(e.data.success)for(var a=0;a<e.data.data.length;a++)t.caculs[a].value=e.data.data[a].value,t.caculs[a].text=e.data.data[a].text}).catch(function(e){t.errors.push(e)}),i.a.getAllowanceWorkday().then(function(e){e.data.success&&(t.pcnc=e.data.data)}).catch(function(e){t.errors.push(e)}),this.viewData()},data:function(){return{isDisabled:!1,stt:1,items:[],fId:{id:"3"},rowData:"",form:{name:null,typeStaff:"",cacul:{name:"",value:"",vungvalue:[]},pcnc:"0"},formEdit:{id:"",name:"",typeStaff:"",cacul:{name:"",value:"",vungvalue:[]},pcnc:""},perPage:9,currentPage:1,staff:[],caculs:[{value:"",text:"",disabled:!1},{value:"",text:"",disabled:!1},{value:"",text:"",disabled:!1}],pcnc:[],fieldsVung:["STT",{key:"name",label:"Tên vùng"},{key:"inputx",label:"Giá trị"}],fields:[{key:"stt",label:"STT"},{key:"tengoi",label:"Tên gói"},{key:"loainv",label:"Loại nhân viên"},{key:"cachtinh",label:"Cách tính"},{key:"pcnc",label:"Phụ cấp ngày công"},{key:"btnedit",label:" "},{key:"btnremove",label:" "}],listVung:[{id:"1",name:"Vùng 1",value:""},{id:"2",name:"Vùng 2",value:""},{id:"3",name:"Vùng 3",value:""},{id:"4",name:"Vùng 4",value:""},{id:"5",name:"Vùng 5",value:""},{id:"6",name:"Vùng 6",value:""},{id:"7",name:"Vùng 7",value:""},{id:"8",name:"Vùng 8",value:""}]}},methods:{hideModal:function(){this.$refs["modal-noti"].hide()},redirectCampaign:function(){this.$router.push({name:"manager-campaign"})},isNumber:function(t){var e=(t=t||window.event).which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)))return!0;t.preventDefault()},viewData:function(){var t=this;this.$startLoading(),i.a.getListRemunerationPackage().then(function(e){e.data.success?(t.items=e.data.data,t.$stopLoading()):t.$refs["modal-noti"].show()}).catch(function(e){t.errors.push(e)})},create:function(){var t=this;this.isDisabled=!1,this.$startLoading(),i.a.addRemunerationPackage(this.form).then(function(e){e.data.success?(t.form.name="",t.$notify({group:"default",type:"bg-success text-white",title:"Thông báo",text:e.data.message}),t.$refs["bv-modal-example"].hide(),t.$stopLoading(),t.form.typeStaff="",t.form.cacul.name="",t.form.cacul.value="",t.form.cacul.vungvalue=null,t.viewData()):t.$notify({group:"default",type:"bg-warning text-dark",title:"Thông báo",text:e.data.message}),t.isDisabled=!0}).catch(function(e){t.errors.push(e)})},update:function(){var t=this;this.$startLoading(),i.a.editRemunerationPackage(this.formEdit).then(function(e){e.data.success?(t.$notify({group:"default",type:"bg-success text-white",title:"Thông báo",text:e.data.message}),t.$refs["show-modal-edit"].hide(),t.$stopLoading(),t.viewData()):t.$notify({group:"default",type:"bg-warning text-dark",title:"Thông báo",text:e.data.message})}).catch(function(e){t.errors.push(e)})},remove:function(t){var e=this;confirm('Bạn có chắc chắn muốn xóa "'+t.item.remuneration_package_name+'"')&&(this.$startLoading(),i.a.removeRemunerationPackage(t.item).then(function(t){t.data.success?(e.$notify({group:"default",type:"bg-success text-white",title:"Thông báo",text:t.data.message}),e.$stopLoading(),e.viewData()):e.$notify({group:"default",type:"bg-warning text-dark",title:"Thông báo",text:t.data.message})}).catch(function(t){e.errors.push(t)}))},changeSelect:function(t){if("theo_vung"===t){for(var e=0;e<7;e++)this.listVung[e].value="";this.form.cacul.vungvalue=this.listVung,this.form.cacul.value=""}"theo_don"===t&&(this.form.cacul.vungvalue=null)},changeSelectEdit:function(t){if("theo_vung"===t){for(var e=0;e<8;e++)this.listVung[e].value="";this.formEdit.cacul.vungvalue=this.listVung,this.formEdit.cacul.value=""}"theo_don"===t&&(this.formEdit.cacul.vungvalue=null,this.formEdit.cacul.value=""),"theo_gio"===t&&(this.formEdit.cacul.vungvalue=null,this.formEdit.cacul.value="")},changeStaffType:function(t){"cod"===t&&(this.form.cacul.name="",!0===this.caculs[1].disabled&&!0===this.caculs[2].disabled?(this.caculs[0].disabled=!0,this.caculs[1].disabled=!1,this.caculs[2].disabled=!1):this.caculs[0].disabled=!0),"xlhh"===t&&(this.form.cacul.name="theo_gio",this.form.cacul.value="",!0===this.caculs[0].disabled?(this.caculs[0].disabled=!1,this.caculs[1].disabled=!0,this.caculs[2].disabled=!0):(this.caculs[1].disabled=!0,this.caculs[2].disabled=!0))},changeStaffTypeEdit:function(t){"cod"===t&&(this.formEdit.cacul.name="",!0===this.caculs[1].disabled&&!0===this.caculs[2].disabled?(this.caculs[0].disabled=!0,this.caculs[1].disabled=!1,this.caculs[2].disabled=!1):this.caculs[0].disabled=!0),"xlhh"===t&&(this.formEdit.cacul.name="theo_gio",this.formEdit.cacul.value="",this.formEdit.cacul.vungvalue=null,!0===this.caculs[0].disabled?(this.caculs[0].disabled=!1,this.caculs[1].disabled=!0,this.caculs[2].disabled=!0):(this.caculs[1].disabled=!0,this.caculs[2].disabled=!0))},edit:function(t){var e=this;this.$refs["show-modal-edit"].show(),this.fId.id=t.item.id,this.formEdit.id=t.item.id,i.a.getRemunerationPackage(this.fId).then(function(t){if(t.data.success)if(e.formEdit.name=t.data.data.remuneration_package_name,e.formEdit.typeStaff=t.data.data.type_staff,e.changeStaffType(e.formEdit.typeStaff),e.formEdit.cacul.name=t.data.data.calculation_method_name,e.formEdit.pcnc=t.data.data.allowance_workday,"theo_don"===e.formEdit.cacul.name&&(e.formEdit.cacul.vungvalue=null),"theo_gio"===e.formEdit.cacul.name&&(e.formEdit.cacul.vungvalue=null),"theo_vung"===e.formEdit.cacul.name){if(e.formEdit.cacul.value="",t.data.datax){for(var a=0;a<t.data.datax.length;a++)e.listVung[a].value=t.data.datax[a].value;e.formEdit.cacul.vungvalue=e.listVung}}else t.data.data.calculation_method_value&&(e.formEdit.cacul.value=t.data.data.calculation_method_value)})}}},l=a("XyMi"),s=Object(l.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("b-modal",{ref:"show-modal-edit",attrs:{id:"show-modal-edit",size:"lg","hide-footer":""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v("\n          Sửa gói tiền công cộng tác viên thời vụ\n        ")]},proxy:!0}])},[t._v(" "),a("div",{staticClass:"d-block"},[a("b-form",[a("b-form-group",{attrs:{id:"input-group-1",label:"Tên gói: ","label-for":"input-1"}},[a("b-form-input",{attrs:{name:"nameEdit",id:"input-1",required:"",placeholder:"Tên gói"},model:{value:t.formEdit.name,callback:function(e){t.$set(t.formEdit,"name",e)},expression:"formEdit.name"}})],1),t._v(" "),a("b-form-group",{attrs:{id:"input-group-2",label:"Loại nhân viên:","label-for":"input-2"}},[a("b-form-select",{attrs:{id:"input-2",options:t.staff,required:"",placeholder:"Chọn loại nhân viên"},on:{change:function(e){return t.changeStaffTypeEdit(t.formEdit.typeStaff)}},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("-- Chọn Loại nhân viên --")])]},proxy:!0}]),model:{value:t.formEdit.typeStaff,callback:function(e){t.$set(t.formEdit,"typeStaff",e)},expression:"formEdit.typeStaff"}})],1),t._v(" "),t.formEdit.typeStaff?a("b-form-group",{attrs:{id:"input-group-3",label:"Cách tính:","label-for":"input-3"}},[a("b-form-select",{attrs:{id:"input-3",options:t.caculs,required:""},on:{change:function(e){return t.changeSelectEdit(t.formEdit.cacul.name)}},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("-- Chọn cách tính --")])]},proxy:!0}],null,!1,3923099523),model:{value:t.formEdit.cacul.name,callback:function(e){t.$set(t.formEdit.cacul,"name",e)},expression:"formEdit.cacul.name"}})],1):t._e(),t._v(" "),a("b-form-group",[[a("div",{staticClass:"conditional-rendering"},["theo_gio"==t.formEdit.cacul.name?a("div",{staticClass:"block-1"},[a("b-input-group",{attrs:{size:"lg",prepend:"$",append:"đ"}},[a("b-input",{attrs:{type:"number",placeholder:"Nhập số tiền mà mỗi giờ nhận được",min:"1"},on:{keypress:function(e){return t.isNumber(e)}},model:{value:t.formEdit.cacul.value,callback:function(e){t.$set(t.formEdit.cacul,"value",e)},expression:"formEdit.cacul.value"}})],1)],1):"theo_don"==t.formEdit.cacul.name?a("div",{staticClass:"block-2"},[a("b-input-group",{attrs:{size:"lg",prepend:"$",append:"đ"}},[a("b-input",{attrs:{type:"number",placeholder:"Số tiền mỗi đơn thành công sẽ nhận được",min:"1"},on:{keypress:function(e){return t.isNumber(e)}},model:{value:t.formEdit.cacul.value,callback:function(e){t.$set(t.formEdit.cacul,"value",e)},expression:"formEdit.cacul.value"}})],1)],1):"theo_vung"==t.formEdit.cacul.name?a("div",{staticClass:"block-2"},t._l(t.listVung,function(e){return a("div",[a("b-row",[a("b-col",{attrs:{cols:"2"}},[t._v(t._s(e.name)+" : ")]),t._v(" "),a("b-col",[a("b-input-group",{attrs:{size:"lg",prepend:"$",append:"đ"}},[a("b-input",{attrs:{type:"number",min:"1"},on:{keypress:function(e){return t.isNumber(e)}},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"vung.value"}})],1)],1)],1),t._v(" "),a("br")],1)}),0):t._e()])]],2),t._v(" "),"cod"==t.formEdit.typeStaff?a("b-form-group",{attrs:{id:"input-group-4",label:"Phụ cấp ngày công:","label-for":"input-4"}},[a("b-form-select",{attrs:{id:"input-4",options:t.pcnc,required:""},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("-- Chọn Loại phụ cấp --")])]},proxy:!0}],null,!1,210257493),model:{value:t.formEdit.pcnc,callback:function(e){t.$set(t.formEdit,"pcnc",e)},expression:"formEdit.pcnc"}})],1):t._e()],1)],1),t._v(" "),a("b-button",{staticClass:"mt-3",attrs:{variant:"primary",block:""},on:{click:t.update}},[t._v("Cập nhập ")])],1),t._v(" "),a("b-modal",{ref:"bv-modal-example",attrs:{id:"bv-modal-example",size:"lg","hide-footer":""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v("\n          Thêm gói tiền công cộng tác viên thời vụ\n        ")]},proxy:!0}])},[t._v(" "),a("div",{staticClass:"d-block"},[a("b-form",[a("b-form-group",{attrs:{id:"input-group-1",label:"Tên gói: ","label-for":"input-1"}},[a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"has-error":t.errors.has("name")},attrs:{name:"name",id:"input-1",required:"",placeholder:"Tên gói"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),t.errors.has("name")?a("p",{staticClass:"alert-danger"},[t._v("\n                "+t._s(t.errors.first("name"))+"\n              ")]):t._e()],1),t._v(" "),a("b-form-group",{attrs:{id:"input-group-2",label:"Loại nhân viên:","label-for":"input-2"}},[a("b-form-select",{attrs:{id:"input-2",options:t.staff,required:"",placeholder:"Chọn loại nhân viên"},on:{change:function(e){return t.changeStaffType(t.form.typeStaff)}},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("-- Chọn Loại nhân viên --")])]},proxy:!0}]),model:{value:t.form.typeStaff,callback:function(e){t.$set(t.form,"typeStaff",e)},expression:"form.typeStaff"}})],1),t._v(" "),t.form.typeStaff?a("b-form-group",{attrs:{id:"input-group-3",label:"Cách tính:","label-for":"input-3"}},[a("b-form-select",{attrs:{id:"input-3",options:t.caculs,required:""},on:{change:function(e){return t.changeSelect(t.form.cacul.name)}},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("-- Chọn cách tính --")])]},proxy:!0}],null,!1,3923099523),model:{value:t.form.cacul.name,callback:function(e){t.$set(t.form.cacul,"name",e)},expression:"form.cacul.name"}})],1):t._e(),t._v(" "),a("b-form-group",[[a("div",{staticClass:"conditional-rendering"},["theo_gio"==t.form.cacul.name?a("div",{staticClass:"block-1"},[a("b-input-group",{attrs:{size:"lg",prepend:"$",append:"đ"}},[a("b-input",{attrs:{type:"number",placeholder:"Nhập số tiền mà mỗi giờ nhận được",min:"1"},on:{keypress:function(e){return t.isNumber(e)}},model:{value:t.form.cacul.value,callback:function(e){t.$set(t.form.cacul,"value",e)},expression:"form.cacul.value"}})],1)],1):"theo_don"==t.form.cacul.name?a("div",{staticClass:"block-2"},[a("b-input-group",{attrs:{size:"lg",prepend:"$",append:"đ"}},[a("b-input",{attrs:{type:"number",placeholder:"Số tiền mỗi đơn thành công sẽ nhận được",min:"1"},on:{keypress:function(e){return t.isNumber(e)}},model:{value:t.form.cacul.value,callback:function(e){t.$set(t.form.cacul,"value",e)},expression:"form.cacul.value"}})],1)],1):"theo_vung"==t.form.cacul.name?a("div",{staticClass:"block-2"},t._l(t.listVung,function(e){return a("div",[a("b-row",[a("b-col",{attrs:{cols:"2"}},[t._v(t._s(e.name)+" : ")]),t._v(" "),a("b-col",[a("b-input-group",{attrs:{size:"lg",prepend:"$",append:"đ"}},[a("b-input",{attrs:{type:"number",min:"1"},on:{keypress:function(e){return t.isNumber(e)}},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"vung.value"}})],1)],1)],1),t._v(" "),a("br")],1)}),0):t._e()])]],2),t._v(" "),"cod"==t.form.typeStaff?a("b-form-group",{attrs:{id:"input-group-4",label:"Phụ cấp ngày công:","label-for":"input-4"}},[a("b-form-select",{attrs:{id:"input-4",options:t.pcnc,required:""},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("-- Chọn Loại phụ cấp --")])]},proxy:!0}],null,!1,210257493),model:{value:t.form.pcnc,callback:function(e){t.$set(t.form,"pcnc",e)},expression:"form.pcnc"}})],1):t._e(),t._v(" "),a("b-button",{staticClass:"mt-3",attrs:{variant:"primary",block:""},on:{click:t.create}},[t._v("Thêm")])],1)],1)])],1),t._v(" "),a("b-row",[a("h3",[t._v("Quản lí gói tiền công cộng tác viên thời vụ")])]),t._v(" "),a("h3",{staticClass:"d-flex justify-content-between align-items-center w-100 font-weight-bold py-3 mb-4"},[a("div"),t._v(" "),a("b-btn",{staticClass:"d-block",attrs:{id:"show-btn",variant:"primary btn-round"},on:{click:function(e){return t.$bvModal.show("bv-modal-example")}}},[a("span",{staticClass:"ion ion-md-add"}),t._v(" Thêm gói tiền")])],1),t._v(" "),a("b-card",[a("b-table",{attrs:{id:"my-table",small:"",fields:t.fields,items:t.items,"per-page":t.perPage,"current-page":t.currentPage,responsive:"sm"},scopedSlots:t._u([{key:"cell(stt)",fn:function(e){return[t._v("\n        "+t._s(e.index+1)+"\n      ")]}},{key:"cell(tengoi)",fn:function(e){return[t._v("\n        "+t._s(e.item.remuneration_package_name)+"\n      ")]}},{key:"cell(loainv)",fn:function(e){return[t._v("\n        "+t._s(e.item.type_staff)+"\n      ")]}},{key:"cell(cachtinh)",fn:function(e){return[t._v("\n        "+t._s(e.item.calculation_method_name)+"\n      ")]}},{key:"cell(pcnc)",fn:function(e){return[t._v("\n        "+t._s(e.item.allowance_workday)+"\n      ")]}},{key:"cell(btnedit)",fn:function(e){return[a("b-btn",{staticClass:"d-block btn-lg",attrs:{variant:"outline-info icon-btn"},on:{click:function(a){return t.edit(e)}}},[a("span",{staticClass:"ion ion-md-create"})])]}},{key:"cell(btnremove)",fn:function(e){return[a("b-btn",{staticClass:"btn-lg",attrs:{variant:"outline-danger icon-btn"},on:{click:function(a){return t.remove(e)}}},[a("i",{staticClass:"ion ion-md-close"})])]}}])})],1),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"overflow-auto"},[a("b-pagination",{attrs:{items:t.items,"total-rows":t.rows,"per-page":t.perPage,"aria-controls":"my-table",align:"right"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("div",[a("b-btn",{attrs:{variant:"success btn-round"},on:{click:t.redirectCampaign}},[t._v("Xem các campaign dàng cho CTVTV hiện có")])],1),t._v(" "),a("b-modal",{ref:"modal-noti",attrs:{"hide-footer":"",title:"Thông báo"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("Chưa có Gói tiền công cho cộng tác viên thời vụ, đóng thông báo để tạo chúng")])]),t._v(" "),a("b-button",{staticClass:"mt-3",attrs:{variant:"outline-danger",block:""},on:{click:t.hideModal}},[t._v("Đóng")])],1)],1)},[],!1,null,null,null);e.default=s.exports}});