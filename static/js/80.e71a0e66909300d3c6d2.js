webpackJsonp([80],{"5W0Y":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("agCp"),o=n("RUzx"),s={name:"single-select-region",components:{Multiselect:n.n(o).a},data:function(){return{option:null,options:[{name:"Miền bắc",id:10},{name:"Miền trung",id:20},{name:"Miền nam",id:30}]}},created:function(){},watch:{option:function(t,e){this.$emit("handleSelectedRegion",t)}},methods:{}},i=n("XyMi"),c=Object(i.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("multiselect",{attrs:{options:t.options,placeholder:"Chọn khu vực",label:"name","track-by":"name",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[n("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")])])],1)},[],!1,null,null,null).exports,r=n("F/2K"),l=n("a/7L"),d=n("9fS5"),u={name:"contract-manager",components:{SingleSelectRegion:c,SingleSelectProvince:r.a,SingleSelectStation:l.a,SkRotatingPlane:d.a},data:function(){return{contracts:[],currentPage:1,perPage:20,contractNumber:"",totalItems:20,regionId:"",provinceId:"",stationId:"",infoStaff:"",appLoading:!0}},created:function(){this.search(1)},computed:{totalPages:function(){return Math.ceil(this.totalItems/this.perPage)}},methods:{search:function(t){var e=this;this.setDefault();var n={page:t,limit:this.perPage,infoStaff:this.infoStaff,contractNumber:this.contractNumber,regionId:this.regionId,provinceId:this.provinceId,stationId:this.stationId};a.a.getContractList(n).then(function(t){t.data.success?(e.contracts=t.data.data.data,e.totalItems=t.data.data.total):e.$notify({group:"default",type:"bg-warning text-dark",title:"Thông báo",text:t.data.message})}).catch(function(t){console.log(t)}).then(function(){e.appLoading=!1})},handleSelectedRegion:function(t){this.regionId=t?t.id:""},handleSelectedProvince:function(t){this.provinceId=t?t.id:""},handleSelectedStation:function(t){this.stationId=t?t.id:""},setDefault:function(){this.appLoading=!0,this.contracts=[]}}},h=Object(i.a)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("div",{staticClass:"mb-5"},[n("b-row",[n("b-col",{attrs:{md:"4"}},[n("single-select-region",{on:{handleSelectedRegion:t.handleSelectedRegion}})],1),t._v(" "),n("b-col",{attrs:{md:"4"}},[n("single-select-province",{attrs:{regionId:t.regionId},on:{handleSelectedProvince:t.handleSelectedProvince}})],1),t._v(" "),n("b-col",{attrs:{md:"4"}},[n("single-select-station",{attrs:{regionId:t.regionId,provinceId:t.provinceId},on:{handleSelectedStation:t.handleSelectedStation}})],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{md:"4"}},[n("b-input",{attrs:{placeholder:"Nhập mã hợp đồng"},model:{value:t.contractNumber,callback:function(e){t.contractNumber=e},expression:"contractNumber"}})],1),t._v(" "),n("b-col",{staticClass:"mb-0",attrs:{md:"4"}},[n("b-input",{attrs:{placeholder:"Nhập thông tin nhân viên"},model:{value:t.infoStaff,callback:function(e){t.infoStaff=e},expression:"infoStaff"}})],1),t._v(" "),n("b-col",{staticClass:"mr-4 mb-0",attrs:{md:"1"}},[n("b-btn",{staticClass:"btn btn-md btn-outline-primary",on:{click:function(e){t.currentPage=1,t.search(1)}}},[t._v("Tìm kiếm")])],1),t._v(" "),n("b-col",{attrs:{md:"1"}},[n("router-link",{staticClass:"btn btn-md btn-outline-success",attrs:{to:{path:"/contract/create"}}},[t._v("Thêm mới")])],1)],1)],1),t._v(" "),t.contracts.length>0?n("div",[n("b-card",{attrs:{"no-body":""}},[n("table",{staticClass:"table table-bordered"},[n("thead",[n("tr",[n("th",[t._v("Mã nhân viên")]),t._v(" "),n("th",[t._v("username")]),t._v(" "),n("th",[t._v("Họ tên")]),t._v(" "),n("th",[t._v("Mã hợp đồng")]),t._v(" "),n("th",[t._v("Ngày ký hợp đồng")]),t._v(" "),n("th",[t._v("Ngày hiệu lực")]),t._v(" "),n("th",[t._v("Ngày hết hạn")]),t._v(" "),n("th",[t._v("Loại hợp đồng")]),t._v(" "),n("th",[t._v("Lương tính theo")]),t._v(" "),n("th")])]),t._v(" "),n("tbody",t._l(t.contracts,function(e){return n("tr",[n("td",[t._v(t._s(e.staffCode))]),t._v(" "),n("td",[t._v(t._s(e.username))]),t._v(" "),n("td",[t._v(t._s(e.fullname))]),t._v(" "),n("td",[t._v(t._s(e.contractNumber))]),t._v(" "),n("td",[t._v(t._s(e.contractDate))]),t._v(" "),n("td",[t._v(t._s(e.startDate))]),t._v(" "),n("td",[t._v(t._s(e.endDate))]),t._v(" "),n("td",[t._v(t._s(e.typeContract))]),t._v(" "),n("td",[t._v(t._s(e.hasKpi))]),t._v(" "),n("td",[e.contractId?n("b-row",[n("b-col",{attrs:{md:"6"}},[n("router-link",{staticClass:"btn btn-sm btn-outline-warning",attrs:{to:{name:"contract-edit",params:{id:e.contractId}}}},[n("i",{staticClass:"ion ion-md-create"})])],1),t._v(" "),n("b-col",{attrs:{md:"6"}},[n("router-link",{staticClass:"btn btn-sm btn-outline-primary",attrs:{to:{name:"contract-detail",params:{id:e.contractId}}}},[n("i",{staticClass:"ion ion-ios-eye"})])],1)],1):n("b-row",[e.username?n("b-col",[n("router-link",{staticClass:"btn btn-sm btn-outline-success",attrs:{to:{name:"contract-create-username",params:{username:e.username}}}},[n("i",{staticClass:"ion ion-md-add"})])],1):n("b-col",[n("router-link",{staticClass:"btn btn-sm btn-outline-success",attrs:{to:{name:"contract-create"}}},[n("i",{staticClass:"ion ion-md-add"})])],1)],1)],1)])}),0)]),t._v(" "),n("b-card-body",[n("b-row",[n("b-col",[n("b-pagination",{attrs:{size:"sm","total-rows":t.totalItems,"per-page":t.perPage},on:{input:function(e){return t.search(t.currentPage)}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),n("b-col",[n("span",{staticClass:"text-muted"},[t._v("Trang "+t._s(t.currentPage)+" trên "+t._s(t.totalPages))])])],1)],1)],1)],1):t._e(),t._v(" "),!1===t.appLoading&&0===t.contracts.length?n("div",[n("span",{staticClass:"font-weight-bold"},[t._v("Rất tiếc, không tìm thấy.")])]):t._e(),t._v(" "),t.appLoading?n("sk-rotating-plane"):t._e()],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{staticClass:"ui-block-heading mb-3"},[this._v("\n    Quản lý hợp đồng\n    "),e("hr")])}],!1,null,null,null);e.default=h.exports}});