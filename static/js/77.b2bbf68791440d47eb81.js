webpackJsonp([77],{PlE7:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t("RUzx"),s=t.n(n),i=t("YmGg"),l=t("mCOD"),o=[{name:"Không đổi",code:"0"},{name:"1",code:"1"},{name:"2",code:"2"},{name:"3",code:"3"},{name:"4",code:"4"},{name:"5",code:"5"},{name:"6",code:"6"},{name:"7",code:"7"},{name:"8",code:"8"}],c={components:{Multiselect:s.a,LoadingMiniBottom:l.a,salaryService:i.a},data:function(){return{appLoading:!1,fields:[],jsonData:[],packages:"",countPkgs:0,value:[{name:"Javascript",code:"js"}],options:o,pickType:o[0],deliverType:o[0],returnType:o[0]}},methods:{updateArea:function(){if(this.appLoading=!0,this.jsonData=[],""!==this.packages){var a=this.packages.split(",");this.searchPackages(a,a.length)}},searchPackages:function(a,e){var t=this,n=[];n=a.length>=1e3?a.splice(0,1e3):a,this.countPkgs+=n.length,i.a.updateSalaryArea({pick:this.pickType,deliver:this.deliverType,return:this.returnType,packages:n}).then(function(a){t.appLoading=!1,a.data.success&&(t.jsonData=t.jsonData.concat(JSON.parse(a.data.data)),t.fields===[]&&(t.fields=["STT","Package Alias","Pick Area","Deliver Area","Return Area","Result","Action"])),t.$notify({group:"notifications-default",type:a.data.success?"":"bg-danger text-white",title:a.data.success?"Thành công ("+t.countPkgs+"/"+e+")":"Lỗi ("+t.countPkgs+"/"+e+")",text:a.data.message})}).catch(function(a){t.appLoading=!1,a&&t.$notify({group:"notifications-default",type:"bg-danger text-white",title:"Lỗi",text:"Có lỗi xảy ra. Vui lòng kiểm tra lại"})}).then(function(){n.length<1e3||t.searchPackages(a,e)})},deleteAllPackagesData:function(){var a=this;this.appLoading=!0,this.jsonData=[],i.a.deleteAllPackagesData({packages:this.packages}).then(function(e){a.appLoading=!1,a.$notify({group:"notifications-default",type:e.data.success?"":"bg-danger text-white",title:e.data.success?"Thành công":"Lỗi",text:e.data.message})}).catch(function(e){a.appLoading=!1,e&&a.$notify({group:"notifications-default",type:"bg-danger text-white",title:"Lỗi",text:"Có lỗi xảy ra. Vui lòng kiểm tra lại"})})}}},r=t("XyMi"),p=Object(r.a)(c,function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("h4",{staticClass:"font-weight-bold py-3 mb-4"},[a._v("\n    Cập nhật vùng tính lương cho đơn hàng\n  ")]),a._v(" "),t("b-card",{staticClass:"mb-4",attrs:{"header-tag":"h6"}},[t("form",[t("b-form-row",[t("b-form-group",{staticClass:"col-md-4",attrs:{label:"Nhập mã đơn hàng"}},[t("b-form-textarea",{attrs:{id:"textarea1",placeholder:"Các mã đơn hàng cách nhau bởi dấu phẩy",rows:5,"max-rows":6},model:{value:a.packages,callback:function(e){a.packages=e},expression:"packages"}})],1),a._v(" "),t("b-form-group",{staticClass:"col-md-2",attrs:{label:"Vùng lấy"}},[t("multiselect",{attrs:{label:"name","track-by":"code",options:a.options,taggable:!0,placeholder:"Chọn vùng"},model:{value:a.pickType,callback:function(e){a.pickType=e},expression:"pickType"}})],1),a._v(" "),t("b-form-group",{staticClass:"col-md-2",attrs:{label:"Vùng giao"}},[t("multiselect",{attrs:{label:"name","track-by":"code",options:a.options,taggable:!0,placeholder:"Chọn vùng"},model:{value:a.deliverType,callback:function(e){a.deliverType=e},expression:"deliverType"}})],1),a._v(" "),t("b-form-group",{staticClass:"col-md-2",attrs:{label:"Vùng trả"}},[t("multiselect",{attrs:{label:"name","track-by":"code",options:a.options,taggable:!0,placeholder:"Chọn vùng"},model:{value:a.returnType,callback:function(e){a.returnType=e},expression:"returnType"}})],1),a._v(" "),t("b-form-group",{staticClass:"col-md-2"},[t("label",{staticClass:"form-label d-none d-md-block"},[a._v(" ")]),a._v(" "),t("b-btn",{attrs:{variant:"primary"},on:{click:a.updateArea}},[a._v("Update")]),a._v(" "),t("b-btn",{attrs:{variant:"outline-danger"},on:{click:a.deleteAllPackagesData}},[a._v("Delete All")])],1)],1)],1),a._v(" "),t("notifications",{attrs:{group:"notifications-default"}})],1),a._v(" "),t("loading-mini-bottom",{attrs:{enable:a.appLoading}}),a._v(" "),t("div",{staticClass:"table-responsive"},[t("b-table",{attrs:{fields:a.fields,items:a.jsonData,striped:!0,bordered:!0,small:!0}})],1)],1)},[],!1,null,null,null);e.default=p.exports}});