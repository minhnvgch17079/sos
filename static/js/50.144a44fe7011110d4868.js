webpackJsonp([50],{p3FO:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("agCp"),n=s("RUzx"),i=s.n(n),r=s("28+M"),c=s.n(r),o=s("YrBS"),l=s("4s2B"),h=s("mCOD"),u={name:"insurance_check",components:{SelectStations:l.a,SelectDepartmentAndPositionJob:o.a,LoadingMiniBottom:h.a,Multiselect:i.a,InputTag:c.a},data:function(){return{success:!0,search:{fullname:"",username:"",insurance_register:"",health_ins_number:"",hospital_register:"",shk_number:"",ins_time:"",email:"",staff_code:"",national_id:"",work_status:"",ins_book_with_comp:"",ins_status:null},ins_opts:[{value:null,text:"Chọn trạng thái đóng BH"},{value:"1",text:"Đóng đủ BHXH"},{value:"2",text:"Không đóng BHXH"},{value:"3",text:"Đóng BHXH nơi khác"},{value:"4",text:"Nghỉ từ 01-15"},{value:"5",text:"Nghỉ từ 01-15, không đóng BHYT"},{value:"6",text:"Nghỉ từ 16-31"}],listUsers:[],selected:{stations:[],department:[],position_job:[]},pageData:{currentPage:1,totalPages:0,totalItems:0,perPage:10,sortBy:"id",sortDesc:!1}}},methods:{pageChanged:function(t){this.searchUsers(t),this.pageData.currentPage=t},searchUsers:function(t,e){var s=this;this.$startLoading();var n={full_name:this.search.fullname,staff_code:this.search.staff_code,username:this.search.username,insurance_register:this.search.insurance_register,national_id:this.search.national_id,tel:this.search.tel,email:this.search.email,department:this.selected.department,position_job:this.selected.position_job,stations:this.selected.stations,page:t,ins_status:this.search.ins_status};e&&(this.pageData.currentPage=1,n.page=1),null!==this.selected.department&&(n.department=this.selected.department,null!==this.selected.position_job&&(n.position_job=this.selected.position_job)),this.appLoading=!0,a.a.insuranceCheck(n).then(function(t){t.data.success?(s.pageData.totalItems=t.data.pagination.total,s.pageData.perPage=t.data.pagination.per_page,s.pageData.totalPages=t.data.pagination.total_page,s.listUsers=t.data.data):s.success=!1}).then(function(){s.$stopLoading()})},exportInsurance:function(t){var e=this;this.$startLoading();var s={full_name:this.search.fullname,personal_id_number:this.search.personal_id_number,staff_code:this.search.staff_code,username:this.search.username,insurance_register:this.search.insurance_register,national_id:this.search.national_id,tel:this.search.tel,email:this.search.email,department:this.selected.department,position_job:this.selected.position_job,stations:this.selected.stations,ins_status:this.search.ins_status};this.appLoading=!0,a.a.exportInsurance(s).then(function(t){t.data.success?window.open(t.data.path_file,"_blank"):e.success=!1}).then(function(){e.$stopLoading()})},resetForm:function(){this.search.insurance_register="",this.search.fullname="",this.search.national_id="",this.search.staff_code="",this.search.username="",this.search.tel="",this.search.email="",this.selected.stations=[],this.selected.ins_status="",this.selected.department="",this.selected.position_job="",this.$refs.select_stations.reset(),this.$refs.select_position_jobs.reset()},updateInsurance:function(t,e){var s=this;this.$startLoading();var n={user_id:t,insurance_id:e};a.a.updateInsurance(n).then(function(t){t.data.success?s.$notify({group:"default",type:"bg-success text-white",title:"Đã cập nhật trạng thái đóng bh",text:t.data.message}):(s.success=!1,s.$notify({group:"default",type:".bg-danger text-white",title:"Có lỗi xảy ra trong quá trình update",text:t.data.message}))}).then(function(){s.$stopLoading()})}},created:function(){this.searchUsers(this.pageData.currentPage)},computed:{totalItems:function(){return this.listUsers.length},totalPages:function(){return Math.ceil(this.totalItems/this.perPage)}},metaInfo:{title:"Tra cứu thông tin bảo hiểm GHTK"}},_=s("XyMi");var d=function(t){s("s5+x")},p=Object(_.a)(u,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"ui-block"},[s("h4",{staticClass:"ui-block-heading"},[t._v("Thông tin nhân viên đóng bảo hiểm")]),t._v(" "),s("div",{staticClass:"search-form"},[s("form",[s("b-form-row",[s("b-form-group",{staticClass:"col-md-2"},[s("b-input",{attrs:{placeholder:"Mã số BH"},model:{value:t.search.insurance_register,callback:function(e){t.$set(t.search,"insurance_register",e)},expression:"search.insurance_register"}})],1),t._v(" "),s("b-form-group",{staticClass:"col-md-2"},[s("b-input",{attrs:{type:"text",placeholder:"Nhập họ tên"},model:{value:t.search.fullname,callback:function(e){t.$set(t.search,"fullname",e)},expression:"search.fullname"}})],1),t._v(" "),s("b-form-group",{staticClass:"col-md-2"},[s("b-input",{attrs:{type:"text",placeholder:"Nhập tên đăng nhập"},model:{value:t.search.username,callback:function(e){t.$set(t.search,"username",e)},expression:"search.username"}})],1),t._v(" "),s("b-form-group",{staticClass:"col-md-2"},[s("b-input",{attrs:{type:"text",placeholder:"Nhập mã nhân viên"},model:{value:t.search.staff_code,callback:function(e){t.$set(t.search,"staff_code",e)},expression:"search.staff_code"}})],1),t._v(" "),s("b-form-group",{staticClass:"col-md-2"},[s("b-input",{attrs:{placeholder:"CMND/Hộ chiếu"},model:{value:t.search.national_id,callback:function(e){t.$set(t.search,"national_id",e)},expression:"search.national_id"}})],1),t._v(" "),s("div",{staticClass:"align-content-center center col-md-2"},[s("b-btn",{attrs:{type:"reset"},on:{click:t.resetForm}},[t._v("Nhập lại")]),t._v(" "),s("b-btn",{attrs:{type:"button",variant:"primary"},on:{click:function(e){return t.searchUsers(t.pageData.currentPage,!0)}}},[s("i",{staticClass:"sidenav-icon ion ion-md-search"}),t._v(" Tìm kiếm\n            ")])],1)],1),t._v(" "),s("b-form-row",[s("div",{staticClass:"col-md-2"},[s("b-form-group",[s("select-stations",{ref:"select_stations",attrs:{placehoder:"Nhập kho cần tìm kiếm"},on:{selected:function(e){t.selected.stations=e}}})],1)],1),t._v(" "),s("div",{staticClass:"col-md-4"},[s("select-department-and-position-job",{ref:"select_position_jobs",on:{getPositionJobName:function(e){t.selected.position_job=e},getDepartment:function(e){t.selected.department=e}}})],1),t._v(" "),s("div",{staticClass:"col-md-2"},[s("b-form-select",{attrs:{options:t.ins_opts},model:{value:t.search.ins_status,callback:function(e){t.$set(t.search,"ins_status",e)},expression:"search.ins_status"}})],1),t._v(" "),s("div",{staticClass:"col-md-2"},[s("b-btn",{staticClass:"btn btn-success",attrs:{type:"button",variant:"primary"},on:{click:function(e){return t.exportInsurance(t.pageData.currentPage,!0)}}},[s("i",{staticClass:"sidenav-icon ion ion-ios-document",on:{click:function(e){return t.exportInsurance(t.pageData.currentPage,!0)}}}),t._v(" Xuất excel\n            ")])],1)])],1)]),t._v(" "),s("div",{staticClass:"result",attrs:{id:"results"}},[s("br"),t._v(" "),t.listUsers?s("b-card",{attrs:{"no-body":""}},[s("div",{staticClass:"table-result"},[s("div",{staticClass:"table-responsive mb-4"},[s("table",{staticClass:"table mb-0 table-bordered"},[s("thead",{staticStyle:{width:"100%"}},[s("tr",[s("th",[t._v("Mã NV")]),t._v(" "),s("th",[t._v("Họ tên")]),t._v(" "),s("th",[t._v("username")]),t._v(" "),s("th",[t._v("CMND")]),t._v(" "),s("th",[t._v("Số sổ bảo hiểm")]),t._v(" "),s("th",[t._v("Số thẻ BHYT")]),t._v(" "),s("th",[t._v("Số sổ hộ khẩu")]),t._v(" "),s("th",[t._v("Thời gian đóng BH")]),t._v(" "),s("th",[t._v("Người giữ sổ")]),t._v(" "),s("th",{staticStyle:{width:"250px"}},[t._v("Đóng bảo hiểm")]),t._v(" "),s("th",[t._v("Lương thử việc")]),t._v(" "),s("th",[t._v("Lương chính thức")]),t._v(" "),s("th",[t._v("Actions")])])]),t._v(" "),s("tbody",t._l(t.listUsers,function(e){return s("tr",[s("th",{attrs:{scope:"row","data-user-id":e.id}},[t._v(t._s(e.staff_code))]),t._v(" "),s("td",[t._v(t._s(e.fullname))]),t._v(" "),s("td",[t._v(t._s(e.username))]),t._v(" "),s("td",[t._v(t._s(e.national_id))]),t._v(" "),s("td",[t._v(t._s(e.insurance_register))]),t._v(" "),s("td",[t._v(t._s(e.health_ins_number))]),t._v(" "),s("td",[t._v(t._s(e.shk_number))]),t._v(" "),s("td",[t._v(t._s(e.ins_time))]),t._v(" "),s("td",[t._v(t._s(e.ins_book_with_comp))]),t._v(" "),s("td",{attrs:{align:"center"}},[s("b-form-select",{attrs:{options:t.ins_opts},model:{value:e.insurance_id,callback:function(s){t.$set(e,"insurance_id",s)},expression:"dataUser.insurance_id"}})],1),t._v(" "),s("td",[t._v(t._s(e.trial_salary))]),t._v(" "),s("td",[t._v(t._s(e.salary))]),t._v(" "),s("td",[s("b-btn",{staticClass:"btn btn-success",attrs:{type:"button",variant:"primary"},on:{click:function(s){return t.updateInsurance(e.id,e.insurance_id)}}},[t._v(" Update ")])],1)])}),0)])]),t._v(" "),s("b-card-body",{staticClass:"pt-0 pb-3"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm pt-3"},[s("b-pagination",{attrs:{"total-rows":t.pageData.totalItems,"per-page":t.pageData.perPage},on:{change:t.pageChanged},model:{value:t.pageData.currentPage,callback:function(e){t.$set(t.pageData,"currentPage",e)},expression:"pageData.currentPage"}})],1),t._v(" "),s("div",{staticClass:"col-sm text-sm-left text-center pt-3"},[t.pageData.totalItems?s("span",{staticClass:"text-muted"},[t._v("Trang "+t._s(t.pageData.currentPage)+" trên "+t._s(t.pageData.totalPages))]):t._e()])])])],1)]):t._e(),t._v(" "),t.listUsers?t._e():s("div",{staticClass:"no-data"},[t._v("\n        Không có dữ liệu phù hợp, vui lòng thử lại với điều kiện tìm kiếm khác.\n      ")])],1)])])},[],!1,d,null,null);e.default=p.exports},"s5+x":function(t,e){}});