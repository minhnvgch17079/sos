webpackJsonp([36],{"8QLy":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("YmGg"),i=a("RUzx"),l=a.n(i),n=a("28+M"),d=a.n(n),o=a("IENG"),c=a("YrBS"),r=a("4s2B"),u=a("agCp"),h={name:"select-module-stations",props:{disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!0},placeholder:{type:String,default:"Chọn nhóm được gán vào"},stationId:{}},components:{staffService:u.a,Multiselect:l.a},data:function(){return{moduleIds:[],selectedModuleIds:[]}},watch:{stationId:function(t,e){this.getOptions(t)}},methods:{getOptions:function(t){var e=this,a={station_id:t};u.a.getListModuleByStationId(a).then(function(t){t.data.success&&(e.moduleIds=t.data.data,e.multiple||e.stations.unshift({id:"",name:e.placeholder}))}).catch(function(t){})},onSelect:function(t){if(this.multiple){var e=[];if(this.selectedModuleIds.length>0)for(var a=0;a<this.selectedModuleIds.length;a++)e.push(this.selectedModuleIds[a].id);e.push(t.id),this.$emit("selected",e)}else this.selectedModuleIds=t.id,this.$emit("selected",this.selectedModuleIds)},onRemove:function(t){var e=[];if(this.multiple){for(var a=0;a<this.selectedModuleIds.length;a++)this.selectedModuleIds[a].id!==t.id&&e.push(this.selectedModuleIds[a].id);this.$emit("selected",e)}},reset:function(){this.selectedModuleIds=this.multiple?[]:""}},created:function(){this.getOptions()}},_=a("XyMi");var f=function(t){a("d8ht")},m=Object(_.a)(h,function(){var t=this,e=t.$createElement;return(t._self._c||e)("multiselect",{attrs:{options:t.moduleIds,multiple:t.multiple,disabled:t.disabled,placeholder:t.placeholder,"track-by":"name",label:"name",selectLabel:"",selectedLabel:"",deselectLabel:"x"},on:{select:t.onSelect,remove:t.onRemove},model:{value:t.selectedModuleIds,callback:function(e){t.selectedModuleIds=e},expression:"selectedModuleIds"}})},[],!1,f,"data-v-35305473",null).exports,v={name:"select-wh-staff-by-module",props:{disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!0},placeholder:{type:String,default:"Chọn phụ kho"},moduleIds:{}},components:{Multiselect:l.a,salaryService:s.a},data:function(){return{whStaffs:[],selectedWhStaffs:[]}},watch:{moduleIds:function(t,e){this.getOptions(t)}},methods:{getOptions:function(t){var e=this,a={child_module_id:t};s.a.getListWhStaffByChildModuleId(a).then(function(t){t.data.success&&(e.whStaffs=t.data.data,e.multiple||e.stations.unshift({id:"",name:e.placeholder}))}).catch(function(t){})},onSelect:function(t){if(this.multiple){var e=[];if(this.selectedWhStaffs.length>0)for(var a=0;a<this.selectedWhStaffs.length;a++)e.push(this.selectedWhStaffs[a].id);e.push(t.id),this.$emit("selected",e)}else this.selectedWhStaffs=t.id,this.$emit("selected",this.selectedWhStaffs)},onRemove:function(t){var e=[];if(this.multiple){for(var a=0;a<this.selectedWhStaffs.length;a++)this.selectedWhStaffs[a].id!==t.id&&e.push(this.selectedWhStaffs[a].id);this.$emit("selected",e)}},reset:function(){this.selectedWhStaffs=this.multiple?[]:""}},created:function(){this.getOptions()}};var p=function(t){a("HO0u")},g=Object(_.a)(v,function(){var t=this,e=t.$createElement;return(t._self._c||e)("multiselect",{attrs:{options:t.whStaffs,multiple:t.multiple,disabled:t.disabled,placeholder:t.placeholder,"track-by":"name",label:"name",selectLabel:"",selectedLabel:"",deselectLabel:"x"},on:{select:t.onSelect,remove:t.onRemove},model:{value:t.selectedWhStaffs,callback:function(e){t.selectedWhStaffs=e},expression:"selectedWhStaffs"}})},[],!1,p,"data-v-22e729f2",null).exports,b={name:"modal-detail-loading-kpi",components:{},props:["masterProfileId","requestData"],data:function(){return{reponseData:[],users:[],loading:!1}},created:function(){},watch:{},methods:{hideModal:function(){this.$refs.myModalRef.hide()},getListLoadingBlockByUserAndDate:function(){var t=this,e={userId:this.requestData.id,date:this.requestData.date};u.a.getListLoadingBlockByUserAndDate(e).then(function(e){e.data.success&&(t.reponseData=e.data.data,t.loading=!1)}).catch(function(t){console.log(t)})},resetDefault:function(){this.reponseData=[]}}},S=Object(_.a)(b,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{ref:"myModalRef",attrs:{id:"modal-detail",size:"lg","hide-footer":"",static:""},on:{show:function(e){t.loading=!0},shown:t.getListLoadingBlockByUserAndDate,hidden:t.resetDefault}},[a("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[t._v("\n        Danh sách tất cả profile của master\n      ")]),t._v(" "),t.reponseData.length>0?a("div",{staticClass:"mb-3"},[a("table",{staticClass:"table mb-0 table-bordered"},[a("thead",[a("tr",[a("th",[t._v("Ngày")]),t._v(" "),a("th",[t._v("Nhóm được duyệt")]),t._v(" "),a("th",[t._v("Số giờ được duyệt")]),t._v(" "),a("th",[t._v("KPI")])])]),t._v(" "),a("tbody",t._l(t.reponseData,function(e){return a("tr",[a("td",[t._v(t._s(e.date))]),t._v(" "),a("td",[t._v(t._s(e.module_alias))]),t._v(" "),a("td",[t._v(t._s(e.hours))]),t._v(" "),a("td",[t._v(t._s(e.kpi))])])}),0)])]):t._e(),t._v(" "),t.loading?a("div",[t._v("\n        Dữ liệu đang loading...\n      ")]):t._e(),t._v(" "),a("div",[a("b-row",[a("b-col",{attrs:{md:"2","offset-md":"10"}},[a("b-btn",{staticClass:"btn btn-outline-secondary",on:{click:t.hideModal}},[t._v("Đóng")])],1)],1)],1)])],1)},[],!1,null,null,null).exports,I=a("mCOD"),k=a("QKlT"),D=a.n(k),y=a("Bo22"),C=a.n(y),M=a("DAYN"),P=a.n(M),w={name:"whstaffsearch",components:{SelectStations:r.a,SelectModuleStations:m,SelectWhStaffByModule:g,SelectDepartmentAndPositionJob:c.a,SelectUserGroup:o.a,ModalDetailLoadingKpi:S,LoadingMiniBottom:I.a,Multiselect:l.a,flatPickr:D.a,VueMonthlyPicker:C.a,InputTag:d.a,draggable:P.a},data:function(){return{success:!0,appLoading:!1,selectedMonth:"",selectedStation:"",selectedModuleStations:"",selectedWhStaffsIds:"",masterProfileId:"",userId:"",requestData:{id:null,date:null},user:{work_types:""},listData:[],selected:{start_date_time:null,end_date_time:null},pageData:{currentPage:1,totalPages:0,totalItems:0,perPage:10,sortBy:"id",sortDesc:!1}}},methods:{showPopup:function(t,e){this.userId=t,this.requestData.id=t,this.requestData.date=e},setSelectedStation:function(t){this.selectedStation=t},setSelectedModuleStations:function(t){this.selectedModuleStations=t},setSelectedWhStaffsIds:function(t){this.selectedWhStaffsIds=t},pageChanged:function(t){this.searchUsers(t),this.pageData.currentPage=t},searchUsers:function(t,e){var a=this,i={module_ids:this.selectedModuleStations,user_ids:this.selectedWhStaffsIds,start_date_time:this.selected.start_date_time,end_date_time:this.selected.end_date_time,page:t};e&&(this.pageData.currentPage=1,i.page=1),this.$startLoading(),s.a.searchWHStaff(i).then(function(t){t.data.success?(a.pageData.totalItems=t.data.pagination.total,a.pageData.perPage=t.data.pagination.per_page,a.pageData.totalPages=t.data.pagination.total_page,a.listData=t.data.data):a.success=!1}).then(function(){a.$stopLoading()}).catch(function(t){console.log(t)})},resetForm:function(){this.selected.range_time_fillter=null,this.selected.range_time=null,this.$refs.select_stations.reset(),this.$refs.select_modules_stations.reset(),this.$refs.select_wh_staff.reset()},showDate:function(t){this.selected.date=t}},created:function(){this.searchUsers(this.pageData.currentPage)},computed:{totalItems:function(){return this.listData.length},totalPages:function(){return Math.ceil(this.totalItems/this.perPage)}},metaInfo:{title:"Tìm kiếm nhân viên"}};var L=function(t){a("OEkN"),a("kj9q")},W=Object(_.a)(w,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui-block"},[a("h4",{staticClass:"ui-block-heading"},[t._v("Tìm kiếm thông tin nhân viên xử lý hàng")]),t._v(" "),a("div",{staticClass:"search-form"},[a("form",[a("b-form-row",[a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Chọn kho"}},[a("select-stations",{ref:"select_stations",attrs:{multiple:!1,placehoder:"Nhập kho cần tìm kiếm"},on:{selected:t.setSelectedStation}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Chọn nhóm được gán vào"}},[a("select-module-stations",{ref:"select_modules_stations",attrs:{stationId:t.selectedStation,multiple:!0},on:{selected:t.setSelectedModuleStations}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-4",attrs:{label:"Chọn nhân viên xử lý hàng"}},[a("select-wh-staff-by-module",{ref:"select_wh_staff",attrs:{moduleIds:t.selectedModuleStations,multiple:!0},on:{selected:t.setSelectedWhStaffsIds}})],1)],1),t._v(" "),a("b-form-row",[a("div",{staticClass:"col-md mb-4"},[a("label",{staticClass:"form-label d-none d-md-block"},[t._v("Chọn Ngày Bắt Đầu ")]),t._v(" "),a("flat-pickr",{attrs:{config:{altInput:!0,animate:!1},placeholder:"Chọn ngày"},model:{value:t.selected.start_date_time,callback:function(e){t.$set(t.selected,"start_date_time",e)},expression:"selected.start_date_time"}})],1),t._v(" "),a("div",{staticClass:"col-md mb-4"},[a("label",{staticClass:"form-label d-none d-md-block"},[t._v("Chọn Ngày Kết Thúc ")]),t._v(" "),a("flat-pickr",{attrs:{config:{altInput:!0,animate:!1},placeholder:"Chọn ngày"},model:{value:t.selected.end_date_time,callback:function(e){t.$set(t.selected,"end_date_time",e)},expression:"selected.end_date_time"}})],1),t._v(" "),a("div",{staticClass:"col-md-4"},[a("b-form-group",[a("label",{staticClass:"form-label"},[t._v(" ")]),t._v(" "),a("div",{staticClass:"align-content-center center"},[a("b-btn",{attrs:{type:"reset"},on:{click:t.resetForm}},[t._v("Nhập lại")]),t._v(" "),a("b-btn",{attrs:{type:"button",variant:"primary"},on:{click:function(e){return t.searchUsers(t.pageData.currentPage,!0,!1)}}},[a("i",{staticClass:"sidenav-icon ion ion-md-search"}),t._v(" Tìm kiếm")])],1)])],1)])],1)]),t._v(" "),a("div",{staticClass:"result",attrs:{id:"results"}},[a("br"),t._v(" "),t.listData?a("b-card",{attrs:{"no-body":""}},[a("div",{staticClass:"table-result"},[a("div",{staticClass:"table-responsive mb-4"},[a("table",{staticClass:"table mb-0 table-bordered"},[a("thead",{staticStyle:{width:"100%"}},[a("tr",[a("th",[t._v("Mã NV")]),t._v(" "),a("th",[t._v("Họ tên")]),t._v(" "),a("th",[t._v("Nhóm được gán vào")]),t._v(" "),a("th",[t._v("Ngày")]),t._v(" "),a("th",[t._v("Thời gian Sorting")]),t._v(" "),a("th",[t._v("KPI Sorting")]),t._v(" "),a("th",[t._v("Thời gian LXT")]),t._v(" "),a("th",[t._v("Sản lượng LXT (thực tế)")]),t._v(" "),a("th",[t._v("KPI quét kiểm bao (thực tế)")]),t._v(" "),a("th",[t._v("KPI bắn hàng (thực tế)")]),t._v(" "),a("th",[t._v("KPI bắn hàng nội miền (thực tế)")]),t._v(" "),a("th",[t._v("KPI bắn hàng liên miền (thực tế)")]),t._v(" "),a("th",[t._v("KPI sản lượng")]),t._v(" "),a("th",[t._v("Thưởng chất lượng")]),t._v(" "),a("th",[t._v("Quản Lý hiện tại")])])]),t._v(" "),a("tbody",t._l(t.listData,function(e){return a("tr",[a("th",{attrs:{scope:"row","data-user-id":e.user_id}},[t._v(t._s(e.staff_code))]),t._v(" "),a("td",[a("router-link",{attrs:{to:{name:"edit-master-profile",params:{id:e.master_profile_id}}}},[t._v(t._s(e.fullname))])],1),t._v(" "),a("td",[t._v(t._s(e.child_module_alias))]),t._v(" "),a("td",[t._v(t._s(e.date))]),t._v(" "),a("td",[t._v(t._s(e.sorting_hours))]),t._v(" "),a("td",[t._v(t._s(e.sorting_kpi))]),t._v(" "),a("td",[a("router-link",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-detail",modifiers:{"modal-detail":!0}}],attrs:{to:{}},nativeOn:{click:function(a){return t.showPopup(e.user_id,e.date)}}},[t._v(t._s(e.loading_hours))])],1),t._v(" "),a("td",[t._v(t._s(e.load_unloading_kpi)+" - ("+t._s(e.load_unloading_raw)+")")]),t._v(" "),a("td",[t._v(t._s(e.verify_bag_kpi)+" - ("+t._s(e.verify_bag_raw)+")")]),t._v(" "),a("td",[t._v(t._s(e.put_action_kpi))]),t._v(" "),a("td",[t._v(t._s(e.int_put_action_kpi)+" - ("+t._s(e.int_put_action_raw)+")")]),t._v(" "),a("td",[t._v(t._s(e.ext_put_action_kpi)+" - ("+t._s(e.ext_put_action_raw)+")")]),t._v(" "),a("td",[t._v(t._s(e.productivity_kpi))]),t._v(" "),a("td",[t._v(t._s(e.quality_reward))]),t._v(" "),a("td",[t._v(t._s(e.manager))])])}),0)])]),t._v(" "),a("b-card-body",{staticClass:"pt-0 pb-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm pt-3"},[a("b-pagination",{attrs:{"total-rows":t.pageData.totalItems,"per-page":t.pageData.perPage},on:{change:t.pageChanged},model:{value:t.pageData.currentPage,callback:function(e){t.$set(t.pageData,"currentPage",e)},expression:"pageData.currentPage"}})],1),t._v(" "),a("div",{staticClass:"col-sm text-sm-left text-center pt-3"},[t.pageData.totalItems?a("span",{staticClass:"text-muted"},[t._v("Trang "+t._s(t.pageData.currentPage)+" trên "+t._s(t.pageData.totalPages))]):t._e()])])])],1)]):t._e(),t._v(" "),t.listData?t._e():a("div",{staticClass:"no-data"},[t._v("\n                        Không có dữ liệu phù hợp, vui lòng thử lại với điều kiện tìm kiếm khác.\n                    ")]),t._v(" "),a("loading-mini-bottom",{attrs:{enable:t.appLoading}})],1),t._v(" "),a("modal-detail-loading-kpi",{attrs:{requestData:t.requestData,masterProfileId:t.userId}})],1)])},[],!1,L,"data-v-1d28b6c2",null);e.default=W.exports},HO0u:function(t,e){},d8ht:function(t,e){},kj9q:function(t,e){}});