webpackJsonp([48],{Uj6k:function(t,e){},tka3:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("fZjL"),n=a.n(i),s=a("YmGg"),r=a("QKlT"),o=a.n(r),l=a("qaB4"),c=a("RUzx"),u=a.n(c),d=a("mCOD"),m={name:"extra-route-configs",metaInfo:{title:"Extra Route Configs"},components:{salaryService:s.a,flatPickr:o.a,LaddaBtn:l.a,Multiselect:u.a,LoadingMiniBottom:d.a},data:function(){return{appLoading:!1,message:"",routeEdit:{minimum_salary:"",required_workshift:"",required_workshift_id:"",route_id:"",route_name:"",route_type:"",route_type_id:"",truck_code:"",update_by:""},listRequiredWorkShifts:[{name:"1 ngày nghỉ 1 ngày",code:1},{name:"2 ngày nghỉ 1 ngày",code:2},{name:"6 ngày nghỉ 1 ngày",code:3},{name:"4 ngày nghỉ 2 ngày",code:4},{name:"8 ngày nghỉ 4 ngày",code:5}],routeObjectEdit:{},searchKeys:["route_name","truck_code","route_type","minimum_salary","required_workshift","update_by"],sortBy:"date",sortDesc:!1,perPage:20,fields:[{key:"route_name",label:"Tên tuyến",sortable:!0,thStyle:"width: 20%"},{key:"truck_code",label:"Xe tải",sortable:!0,thStyle:"width: 20%"},{key:"route_type",label:"Loại",sortable:!0,thStyle:"width: 15%"},{key:"minimum_salary",label:"Lương tối thiểu",sortable:!0},{key:"required_workshift",label:"Cách  tính ngày công chuẩn",sortable:!0},{key:"update_by",label:"Cập nhật bởi",sortable:!0},{key:"actions",label:"Sửa",tdClass:"text-center text-nowrap"}],articlesData:[],articlesBackupData:[],originalArticlesData:[],currentPage:1}},computed:{warningMoney:function(){return!(this.routeEdit.minimum_salary>99999999)},totalItems:function(){return this.articlesData.length},totalPages:function(){return Math.ceil(this.totalItems/this.perPage)}},methods:{changeValueTable:function(){this.routeEdit.required_workshift=void 0===this.routeObjectEdit.name?"":this.routeObjectEdit.name},editButtonClick:function(t){if(this.routeEdit=t,""!==t.required_workshift_id){var e=t.required_workshift_id-1;this.routeObjectEdit=this.listRequiredWorkShifts[e]}},saveChangeExtraRoute:function(t){var e=this;if(t.preventDefault(),this.routeObjectEdit&&this.routeEdit.minimum_salary){this.appLoading=!0;var a={tr_id:this.routeEdit.route_id,minimum_salary:this.routeEdit.minimum_salary,work_type_id:this.routeObjectEdit.code};s.a.apiSaveExtraRouteConfig(a).then(function(t){if(t.data.hasOwnProperty("success")&&(e.$notify({group:"notifications-default",type:t.data.success?"":"bg-danger text-white",title:t.data.success?"Thành công":"Lỗi",text:t.data.message}),e.$refs.myModalRef.hide(),!t.data.success)){var a=e.articlesBackupData;e.articlesData=a,e.originalArticlesData=a.slice(0)}}).catch(function(){e.$notify({group:"notifications-default",type:"bg-danger text-white",title:"Lỗi",text:"Đã có lỗi xảy ra."})}).then(function(){e.appLoading=!1})}else this.message="Vui lòng nhập đầy đủ thông tin"},filter:function(t){var e=this,a=t.toLowerCase(),i=this.originalArticlesData.filter(function(t){return-1!==n()(t).filter(function(t){return e.searchKeys.includes(t)}).map(function(e){return String(t[e])}).join("|").toLowerCase().indexOf(a)||!a});this.articlesData=i}},mounted:function(){},created:function(){var t=this;this.appLoading=!0,s.a.apiGetInfoRoutes({route_type_id:2}).then(function(e){if(e.data.hasOwnProperty("data")){var a=e.data.data;t.articlesData=t.articlesBackupData=a,t.originalArticlesData=a.slice(0),t.appLoading=!1}})}},f=a("XyMi");var g=function(t){a("OEkN"),a("Uj6k")},h=Object(f.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._v(" "),a("b-card",{attrs:{"no-body":""}},[a("b-card-body",[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[t._v("\n          Số lượng:  \n          "),a("b-select",{staticClass:"d-inline-block w-auto",attrs:{size:"sm",options:[10,20,30,40,50]},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}}),t._v("\n          trên "+t._s(t.articlesData.length)+" tuyến\n        ")],1),t._v(" "),a("div",{staticClass:"col"},[a("b-input",{staticClass:"d-inline-block w-auto float-sm-right",attrs:{size:"sm",placeholder:"Tìm kiếm..."},on:{input:function(e){return t.filter(e)}}})],1)])]),t._v(" "),a("hr",{staticClass:"border-light m-0"}),t._v(" "),a("div",{staticClass:"table-responsive"},[a("b-table",{staticClass:"card-table",attrs:{items:t.articlesData,fields:t.fields,"sort-by":t.sortBy,"sort-desc":t.sortDesc,striped:!0,bordered:!0,"current-page":t.currentPage,"per-page":t.perPage},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[a("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modals-default",modifiers:{"modals-default":!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"default btn-xs icon-btn md-btn-flat",title:"Sửa"},on:{click:function(a){return t.editButtonClick(e.item)}}},[a("i",{staticClass:"ion ion-md-create"})])]}}])})],1),t._v(" "),a("b-card-body",{staticClass:"pt-0 pb-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm text-sm-left text-center pt-3"},[t.totalItems?a("span",{staticClass:"text-muted"},[t._v("Trang "+t._s(t.currentPage)+" trên "+t._s(t.totalPages))]):t._e()]),t._v(" "),a("div",{staticClass:"col-sm pt-3"},[t.totalItems?a("b-pagination",{staticClass:"justify-content-center justify-content-sm-end m-0",attrs:{"total-rows":t.totalItems,"per-page":t.perPage,size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)])])],1),t._v(" "),a("b-modal",{ref:"myModalRef",attrs:{id:"modals-default",static:""},on:{ok:t.saveChangeExtraRoute}},[a("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[t._v("\n      Tuyến "+t._s(t.routeEdit.route_name)),a("br"),t._v(" "),a("small",{staticClass:"text-muted"},[t._v(t._s(t.routeEdit.route_type))])]),t._v(" "),a("p",{staticClass:"alert-danger",staticStyle:{"text-align":"center"}},[t._v(t._s(t.message))]),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col",attrs:{label:"Lương tối thiểu"}},[a("b-form-input",{attrs:{id:"inputLive",type:"number",state:t.warningMoney,"aria-describedby":"inputLiveFeedback",placeholder:"đơn vị VNĐ"},model:{value:t.routeEdit.minimum_salary,callback:function(e){t.$set(t.routeEdit,"minimum_salary","string"==typeof e?e.trim():e)},expression:"routeEdit.minimum_salary"}}),t._v(" "),a("b-form-invalid-feedback",{attrs:{id:"inputLiveFeedback"}},[t._v("\n          Số tiền nhập vào quá lớn. Vui lòng kiểm tra lại!\n        ")])],1)],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col",attrs:{label:"Chọn cách tính ngày công chuẩn"}},[a("multiselect",{attrs:{label:"name","track-by":"code",options:t.listRequiredWorkShifts,taggable:!0,placeholder:"Chọn"},on:{input:t.changeValueTable},model:{value:t.routeObjectEdit,callback:function(e){t.routeObjectEdit=e},expression:"routeObjectEdit"}})],1)],1)],1),t._v(" "),a("notifications",{attrs:{group:"notifications-default"}}),t._v(" "),a("loading-mini-bottom",{attrs:{enable:t.appLoading}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{staticClass:"d-flex justify-content-between align-items-center w-100 font-weight-bold py-3 mb-4"},[e("div",[this._v("Lương tối thiểu và ngày công chuẩn theo tuyến")])])}],!1,g,null,null);e.default=h.exports}});