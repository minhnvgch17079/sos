webpackJsonp([75],{Ip1j:function(a,e){},UxJK:function(a,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=s("vxzc"),c=s("PJh5"),o=s.n(c),n=s("hC/b"),i={name:"update-shop-package",components:{Moment:o.a,commonHelper:n.a,saleService:t.a},data:function(){return{shopCode:"",filter:null,from:"",to:"",firstPackage:{pkg_order:null,created:null},lastPackage:{pkg_order:null,created:null},dataShopPackage:[],fields:[{key:"s_code",label:"Mã shop",sortable:!0},{key:"f_pkg_time_ss",label:"Ngày lấy đơn thành công đâu tiên",sortable:!0},{key:"f_pkg_order_ss",label:"Đơn lấy thành công đầu tiên",sortable:!0},{key:"l_pkg_time",label:"Ngày lấy đơn thành công cuối cùng",sortable:!0},{key:"l_pkg_order",label:"Đơn lấy thành công cuối cùng",sortable:!0},{key:"is_active",label:"Active",sortable:!0},{key:"actions",label:"Chỉnh sửa",sortable:!0}],paginConfig:{per_page:10,current_page:1,total_row:0}}},watch:{},methods:{searchShopPackage:function(){var a=this;if(this.dataShopPackage=[],this.shopCode=this.shopCode.replace(/\s+/g,""),""!==this.shopCode){var e={shop_code:this.shopCode};t.a.getShopPackage(e).then(function(e){e.data.success?(a.dataShopPackage=e.data.data,n.a.showMessage(e.data.message,"success")):n.a.showMessage(e.data.message,"warning")}).catch(function(a){console.log(a)})}else n.a.showMessage("Vui lòng nhập shop code!","warning")},searchLog:function(){var a=this;if(this.firstPackage={pkg_order:null,created:null},this.lastPackage={pkg_order:null,created:null},this.shopCode=this.shopCode.replace(/\s+/g,""),""!==this.shopCode&&""!==this.from&&""!==this.to){var e={shop_code:this.shopCode,from:this.from,to:this.to,type:"ASC"};t.a.getPackageSuccess(e).then(function(e){e.data.success?(a.firstPackage=e.data.data,n.a.showMessage(e.data.message,"success")):n.a.showMessage(e.data.message,"warning")}).catch(function(a){console.log(a)});var s={shop_code:this.shopCode,from:this.from,to:this.to,type:"DESC"};t.a.getPackageSuccess(s).then(function(e){e.data.success?(a.lastPackage=e.data.data,n.a.showMessage(e.data.message,"success")):n.a.showMessage(e.data.message,"warning")}).catch(function(a){console.log(a)})}else n.a.showMessage("Vui lòng nhập shop code, thời gian!","warning")},updateFirstPackge:function(a){var e=this;if(null!==this.firstPackage.pkg_order&&null!==this.firstPackage.created){var s={id:a.id,order:this.firstPackage.pkg_order,time:this.firstPackage.created,type:1};t.a.upadteFirstLastPackage(s).then(function(a){a.data.success?(n.a.showMessage(a.data.message,"success"),e.searchShopPackage()):n.a.showMessage(a.data.message,"warning")}).catch(function(a){console.log(a)})}else n.a.showMessage("Chưa có thông tin đơn lấy thành công đầu tiên","warning")},updateLastPackge:function(a){var e=this;if(null!==this.lastPackage.pkg_order&&null!==this.lastPackage.created){var s={id:a.id,order:this.lastPackage.pkg_order,time:this.lastPackage.created,type:2};t.a.upadteFirstLastPackage(s).then(function(a){a.data.success?(n.a.showMessage(a.data.message,"success"),e.searchShopPackage()):n.a.showMessage(a.data.message,"warning")}).catch(function(a){console.log(a)})}else n.a.showMessage("Chưa có thông tin đơn lấy thành công cuối cùng","warning")},createShopPackage:function(){var a=this;if(this.shopCode=this.shopCode.replace(/\s+/g,""),""!==this.shopCode){var e={shop_code:this.shopCode};t.a.createShopPackage(e).then(function(e){e.data.success?(n.a.showMessage(e.data.message,"success"),a.searchShopPackage()):n.a.showMessage(e.data.message,"warning")}).catch(function(a){console.log(a)})}else n.a.showMessage("Vui lòng nhập shop code!","warning")},setActiveShopPackge:function(a){var e=this,s={id:a.id,scode:a.s_code};t.a.setActiceShopPackage(s).then(function(a){a.data.success?(n.a.showMessage(a.data.message,"success"),e.searchShopPackage()):n.a.showMessage(a.data.message,"warning")}).catch(function(a){console.log(a)})},onFiltered:function(a){this.paginConfig.total_row=a.length,this.paginConfig.current_page=1}}},r=s("XyMi");var l=function(a){s("OEkN"),s("Ip1j")},h=Object(r.a)(i,function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("b-card",{attrs:{"no-body":""}},[s("b-card-body",[s("b-row",[s("h4",[a._v("Update shop package:")])]),a._v(" "),s("hr"),a._v(" "),s("b-row",[s("b-col",{staticClass:"mt-1 min-w-300"},[s("b-form-input",{attrs:{type:"date"},model:{value:a.from,callback:function(e){a.from=e},expression:"from"}})],1),a._v(" "),s("b-col",{staticClass:"mt-1 min-w-300"},[s("b-form-input",{attrs:{type:"date"},model:{value:a.to,callback:function(e){a.to=e},expression:"to"}})],1),a._v(" "),s("b-col",{staticClass:"mt-1 min-w-300"},[s("b-form-input",{attrs:{placeholder:"Nhập mã shop"},model:{value:a.shopCode,callback:function(e){a.shopCode=e},expression:"shopCode"}})],1)],1),a._v(" "),s("hr"),a._v(" "),s("b-row",[s("b-col",[s("b-row",[s("p",{staticClass:"ml-2"},[s("b",[a._v("Đơn thành công đầu tiên:")])]),a._v(" "),s("b-button",{staticClass:"ml-2 h-25",attrs:{variant:"success",size:"sm"},on:{click:a.searchLog}},[s("i",{staticClass:"ion ion-md-search"}),a._v(" Tìm logs\n        ")])],1),a._v(" "),s("ul",[s("li",[s("b",[a._v("Package order:")]),a._v("   "),s("span",{staticClass:"red"},[a._v(a._s(a.firstPackage.pkg_order))])]),a._v(" "),s("li",[s("b",[a._v("Thời gian:")]),a._v("   "),s("span",{staticClass:"red"},[a._v(a._s(a.firstPackage.created))])])])],1),a._v(" "),s("b-col",[s("p",[s("b",[a._v("Đơn thành công cuối cùng:")])]),a._v(" "),s("ul",[s("li",[s("b",[a._v("Package order:")]),a._v("   "),s("span",{staticClass:"red"},[a._v(a._s(a.lastPackage.pkg_order))])]),a._v(" "),s("li",[s("b",[a._v("Thời gian:")]),a._v("   "),s("span",{staticClass:"red"},[a._v(a._s(a.lastPackage.created))])])])])],1),a._v(" "),s("b-row",[s("p",{staticClass:"ml-2"},[s("b",[a._v("Danh sách shop packages:")])]),a._v(" "),s("b-button",{staticClass:"ml-2 h-25",attrs:{size:"sm",variant:"danger"},on:{click:a.searchShopPackage}},[s("i",{staticClass:"ion ion-md-search"}),a._v(" Tìm shop\n      ")]),a._v(" "),s("b-button",{staticClass:"ml-2 h-25",attrs:{disabled:0==a.dataShopPackage.length,variant:"primary",size:"sm"},on:{click:a.createShopPackage}},[s("i",{staticClass:"ion ion-ios-add"}),a._v(" Tao mới\n      ")])],1),a._v(" "),s("b-table",{ref:"dataTable",staticClass:"card-table",staticStyle:{"text-align":"center"},attrs:{id:"shop-duplicate",items:a.dataShopPackage,fields:a.fields,striped:!1,bordered:!0,outlined:!0,hover:!0,"per-page":a.paginConfig.per_page,"current-page":a.paginConfig.current_page,filter:a.filter},on:{filtered:a.onFiltered},scopedSlots:a._u([{key:"cell(actions)",fn:function(e){return[s("div",[s("b-button",{staticClass:"mt-1",attrs:{variant:"info",size:"sm"},on:{click:function(s){return a.updateFirstPackge(e.item)}}},[a._v("Update first")]),a._v(" "),s("b-button",{staticClass:"mt-1",attrs:{variant:"info",size:"sm"},on:{click:function(s){return a.updateLastPackge(e.item)}}},[a._v("Update last")]),a._v(" "),s("b-button",{staticClass:"mt-1",attrs:{variant:"success",size:"sm"},on:{click:function(s){return a.setActiveShopPackge(e.item)}}},[a._v("Set Active")])],1)]}}])})],1)],1)},[],!1,l,"data-v-323faab3",null);e.default=h.exports}});