webpackJsonp([23],{"1OCo":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("4s2B"),i=s("4WGu"),l=s("mtWM"),n=s.n(l),o=s("RUzx"),c=s.n(o),r={name:"select-cods",props:{multiple:{type:Boolean,default:!0},placeholder:{type:String,default:"Nhập tên hoặc mã cod để tìm kiếm"}},components:{Multiselect:c.a},data:function(){return{cods:[],selectedCods:[],isLoading:!1}},methods:{limitText:function(t){return"và "+t+" cods"},asyncFind:function(t){var e=this;this.isLoading=!0,t.length>1?n.a.get(i.a.baseApiUrl+"services/autocompleteCod?term="+t).then(function(t){e.cods=t.data.items,e.isLoading=!1}):this.isLoading=!1},aliasWithName:function(t){return t.alias+" - "+t.fullname},getOptions:function(){var t=this;n.a.get(i.a.baseApiUrl+"bills/getOptionForSearchCod").then(function(e){e.data.success&&(t.cods=e.data.data.options.cods,t.multiple||t.cods.unshift({code:"",name:t.placeholder}))}).catch(function(t){})},onSelect:function(t){if(this.multiple){var e=[];if(this.selectedCods.length>0)for(var s=0;s<this.selectedCods.length;s++)e.push(this.selectedCods[s].id);e.push(t.id),this.$emit("selected",e)}else this.selectedCods=t.id,this.$emit("selected",this.selectedCods)},onRemove:function(t){var e=[];if(this.multiple){for(var s=0;s<this.selectedCods.length;s++)this.selectedCods[s].id!==t.id&&e.push(this.selectedCods[s].id);this.$emit("selected",e)}},reset:function(){this.selectedCods=this.multiple?[]:"",this.$emit("selected",this.selectedCods)}},created:function(){}},d=s("XyMi");var h=function(t){s("JJPT")},_=Object(d.a)(r,function(){var t=this,e=t.$createElement;return(t._self._c||e)("multiselect",{attrs:{options:t.cods,multiple:t.multiple,placeholder:t.placeholder,searchable:!0,loading:t.isLoading,"open-direction":"bottom","internal-search":!1,"clear-on-select":!0,"close-on-select":!1,"options-limit":300,limit:20,"limit-text":t.limitText,"max-height":600,"show-no-results":!1,"hide-selected":!0,"track-by":"id",id:"ajax",label:"fullname","custom-label":t.aliasWithName,deselectLabel:"x"},on:{"search-change":t.asyncFind,select:t.onSelect,remove:t.onRemove},model:{value:t.selectedCods,callback:function(e){t.selectedCods=e},expression:"selectedCods"}})},[],!1,h,"data-v-3b8fd59b",null).exports,p=s("IC97"),u=s("PJh5"),b=s.n(u),v={name:"select-bill-type",props:{multiple:{type:Boolean,default:!0},placeholder:{type:String,default:"Chọn kiểu hóa đơn"}},components:{Multiselect:c.a},data:function(){return{types:[{code:"refund",name:"Hóa đơn thu tiền"},{code:"prepayment",name:"Hóa đơn trả trước"},{code:"debt",name:"Hóa đơn shop nợ"},{code:"return_debt",name:"Hóa đơn thu nợ trả hàng"}],selectedBillType:[]}},methods:{onSelect:function(t){if(this.multiple){var e=[];if(this.selectedBillType.length>0)for(var s=0;s<this.selectedBillType.length;s++)e.push(this.selectedBillType[s].code);e.push(t.code),this.$emit("selected",e)}else this.selectedBillType=t.code,this.$emit("selected",this.selectedBillType)},onRemove:function(t){var e=[];if(this.multiple){for(var s=0;s<this.selectedBillType.length;s++)this.selectedBillType[s].code!==t.code&&e.push(this.selectedBillType[s].code);this.$emit("selected",e)}},reset:function(){this.selectedBillType=this.multiple?[]:"",this.$emit("selected",this.selectedBillType)}}};var g=function(t){s("J8Ii")},f=Object(d.a)(v,function(){var t=this,e=t.$createElement;return(t._self._c||e)("multiselect",{attrs:{options:t.types,multiple:t.multiple,placeholder:t.placeholder,"track-by":"name",label:"name",selectLabel:"",selectedLabel:"",deselectLabel:"x"},on:{select:t.onSelect,remove:t.onRemove},model:{value:t.selectedBillType,callback:function(e){t.selectedBillType=e},expression:"selectedBillType"}})},[],!1,g,"data-v-3eb54aba",null).exports,m={name:"select-cashier",props:{multiple:{type:Boolean,default:!0},placeholder:{type:String,default:"Chọn người tạo hóa đơn"}},components:{Multiselect:c.a},data:function(){return{cashier:[],selectedCashier:[]}},methods:{getOptions:function(){var t=this;n.a.get(i.a.baseApiUrl+"bills/listCashier").then(function(e){e.data.success&&(t.cashier=e.data.data.options.cashier,t.multiple||t.cashier.unshift({code:"",name:t.placeholder}))}).catch(function(t){})},onSelect:function(t){if(this.multiple){var e=[];if(this.selectedCashier.length>0)for(var s=0;s<this.selectedCashier.length;s++)e.push(this.selectedCashier[s].code);e.push(t.code),this.$emit("selected",e)}else this.selectedCashier=t.code,this.$emit("selected",this.selectedCashier)},onRemove:function(t){var e=[];if(this.multiple){for(var s=0;s<this.selectedCashier.length;s++)this.selectedCashier[s].code!==t.code&&e.push(this.selectedCashier[s].code);this.$emit("selected",e)}},reset:function(){this.selectedCashier=this.multiple?[]:"",this.$emit("selected",this.selectedCashier)}},created:function(){this.getOptions()}};var C=function(t){s("qi5d")},w=Object(d.a)(m,function(){var t=this,e=t.$createElement;return(t._self._c||e)("multiselect",{attrs:{options:t.cashier,multiple:t.multiple,placeholder:t.placeholder,"track-by":"name",label:"name",selectLabel:"",selectedLabel:"",deselectLabel:"x"},on:{select:t.onSelect,remove:t.onRemove},model:{value:t.selectedCashier,callback:function(e){t.selectedCashier=e},expression:"selectedCashier"}})},[],!1,C,"data-v-48a88e92",null).exports,k=s("aq6A"),x=s("qaB4"),y=s("mCOD"),B=s("KVzY");s("7+uW").default.use(B.default);var T={components:{SelectCashier:w,SelectBillType:f,SelectStations:a.a,SelectCods:_,Datepicker:p.a,Multiselect:c.a,LaddaBtn:x.a,LoadingMiniBottom:y.a},data:function(){return{selected:{stations:[],cods:[],types:[],cashier:[]},from:b()().format("YYYY-MM-DD"),to:b()().format("YYYY-MM-DD"),bills:{bill_code:"",cod_bill_alias:""},loading:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],pageData:{currentPage:1,totalPages:0,totalItems:0,perPage:10,sortBy:"id",sortDesc:!1},appLoading:!1,listBills:[],packageAjax:[],inputDisable:!1,codTotalPaidShipMoney:"",shopTotalShipMoney:"",codTotalUnpaidShipMoney:"",codTotalPickMoney:"",codTotalPrepayment:"",codTotalShipMoney:"",codTotalDebtMoney:"",codTotalBill:"",codTotal:"",codTotalReturnDebtMoney:"",checkResult:!1,packageStatuses:[],bills_export_url:"https://newkt.ghtk.vn/adm/bills-export",packageDebtBill:[],packageReturnDebtBill:[],loadingSum:!1,loadingExcel:!1,loadingExcelHtml:'\n      <div class="sk-folding-cube sk-primary">\n        <div class="sk-cube1 sk-cube"></div>\n        <div class="sk-cube2 sk-cube"></div>\n        <div class="sk-cube4 sk-cube"></div>\n        <div class="sk-cube3 sk-cube"></div>\n      </div>\n      <h5 class="text-center mb-0">LOADING...</h5>\n    ',errorExport:!1,msgErr:"",exportedFilesRefund:"",exportedFilesPrepayment:"",exportedFilesDebt:"",exportedFilesReturnDebt:"",successExport:!1,dismissSeconds:10,dismissCountDownSE:0,msgNotify:""}},methods:{clearExcels:function(){this.exportedFilesRefund="",this.exportedFilesPrepayment="",this.exportedFilesDebt="",this.exportedFilesReturnDebt=""},customFormatter:function(t){return b()(t).format("YYYY-MM-DD")},dateSelectedFromInChild:function(t){this.from=t},dateSelectedToInChild:function(t){this.to=t},resetForm:function(){this.$refs.select_stations.reset(),this.$refs.select_billType.reset(),this.$refs.select_cashier.reset(),this.$refs.select_cods.reset(),this.bills.bill_code="",this.bills.cod_bill_alias=""},getSummaries:function(t){var e=this,s=this;this.loadingSum=!0,s.codTotalPaidShipMoney="",s.shopTotalShipMoney="",s.codTotalUnpaidShipMoney="",s.codTotalPickMoney="",s.codTotalPrepayment="",s.codTotalShipMoney="",s.codTotalDebtMoney="",s.codTotalBill="",s.codTotal="",s.codTotalReturnDebtMoney="",k.a.getSummariesCod(t).then(function(t){if(t.data.success&&t.data.data){var a=t.data.data;s.codTotalPaidShipMoney=a.codTotalPaidShipMoney,s.shopTotalShipMoney=a.shopTotalShipMoney,s.codTotalUnpaidShipMoney=a.codTotalUnpaidShipMoney,s.codTotalPickMoney=a.codTotalPickMoney,s.codTotalPrepayment=a.codTotalPrepayment,s.codTotalShipMoney=a.codTotalShipMoney,s.codTotalDebtMoney=a.codTotalDebtMoney,s.codTotalBill=a.codTotalBill,s.codTotal=a.codTotal,s.codTotalReturnDebtMoney=a.codTotalReturnDebtMoney,e.loadingSum=!1}else e.loadingSum=!1})},searchBill:function(t,e,s){var a=this;a.errorExport=!1;var i={cod_id:a.selected.cods,station_id:a.selected.stations,bill_code:a.bills.bill_code,cod_bill_alias:a.bills.cod_bill_alias,action:a.selected.types,created_user_id:a.selected.cashier,cod_bill_created_from:this.customFormatter(a.from),cod_bill_created_to:this.customFormatter(a.to),page:t};e&&(this.pageData.currentPage=1,i.page=1),1===t&&(this.getSummaries(i),this.clearExcels()),a.appLoading=!0,this.startLoading(s),k.a.searchBillCod(i).then(function(t){if(t.data.success){a.checkResult=t.data.success,a.packageStatuses=t.data.options.packageStatuses,a.pageData.totalItems=t.data.options.total,a.pageData.perPage=t.data.options.per_page,a.pageData.totalPages=t.data.options.total_page,a.listBills=t.data.options.bills,a.packageAjax.length=t.data.options.bills.length;for(var e=0;e<a.packageAjax.length;e++)a.packageAjax[e]=0;a.packageDebtBill.length=t.data.options.bills.length;for(var i=0;i<a.packageDebtBill.length;i++)a.packageDebtBill[i]=0;a.packageReturnDebtBill.length=t.data.options.bills.length;for(var l=0;l<a.packageReturnDebtBill.length;l++)a.packageReturnDebtBill[l]=0;a.updateLoadingValue(s,!1)}else a.updateLoadingValue(s,!1)}).catch(function(t){t&&a.updateLoadingValue(s,!1)}).then(function(){a.updateLoadingValue(s,!1),a.appLoading=!1})},exportDetail:function(){this.selected.cods,this.selected.stations;var t=this.bills.bill_code,e=this.bills.cod_bill_alias,s=(this.selected.types,this.selected.cashier,this.customFormatter(this.from)),a=this.customFormatter(this.to),i="",l="",n="",o="";if(null!=this.selected.cods)for(var c=0;c<this.selected.cods.length;c++)i+="&cod_id[]="+this.selected.cods[c];if(null!=this.selected.stations)for(var r=0;r<this.selected.stations.length;r++)l+="&station_id[]="+this.selected.stations[r];if(null!=this.selected.action)for(var d=0;d<this.selected.action.length;d++)n+="&action[]="+this.selected.action[d];if(null!=this.selected.createdUserId)for(var h=0;h<this.selected.createdUserId.length;h++)o+="&created_user_id[]="+this.selected.createdUserId[h];return"/admin/bills/cod?bill_code="+t+"&cod_bill_alias="+e+"&cod_bill_created_from="+s+"&cod_bill_created_to="+a+"&is_export=1"+n+i+l+o},exportDetailV2:function(){var t=this,e={cod_id:t.selected.cods,station_id:t.selected.stations,bill_code:t.bills.bill_code,cod_bill_alias:t.bills.cod_bill_alias,action:t.selected.types,created_user_id:t.selected.cashier,cod_bill_created_from:this.customFormatter(t.from),cod_bill_created_to:this.customFormatter(t.to),is_export:1};t.loadingExcel=!0,t.successExport=!1,k.a.exportDetailExcel(e).then(function(e){if(e.data.success)window.open("/adm/bills/download-manage?type=detail_cod"),t.successExport=!0,t.dismissCountDownSE=t.dismissSeconds,t.msgNotify=e.data.message?e.data.message:'Xuất file thành công. Vui lòng chuyển sang màn hình "Quản lý Download" để tải file.';else{var s=e.data.msg?e.data.msg:"Có lỗi xảy ra. Hãy thử lại nhé!";alert(s)}}).catch(function(t){t&&alert("Có lỗi xảy ra. Hãy thử lại nhé!")}).then(function(){t.loadingExcel=!1})},exportByStation:function(){var t=this,e={cod_id:t.selected.cods,station_id:t.selected.stations,bill_code:t.bills.bill_code,cod_bill_alias:t.bills.cod_bill_alias,action:t.selected.types,created_user_id:t.selected.cashier,cod_bill_created_from:this.customFormatter(t.from),cod_bill_created_to:this.customFormatter(t.to),is_export_stations:1};t.loadingExcel=!0,k.a.exportStationExcel(e).then(function(t){if(t.data.success)window.location.href=t.data.data;else{var e=t.data.msg?t.data.msg:"Có lỗi xảy ra. Hãy thử lại nhé!";alert(e)}}).catch(function(t){t&&alert("Có lỗi xảy ra. Hãy thử lại nhé!")}).then(function(){t.loadingExcel=!1})},exportPackage:function(){var t=this;t.errorExport=!1,t.loadingExcel=!0;var e={cod_id:t.selected.cods,station_id:t.selected.stations,bill_code:t.bills.bill_code,cod_bill_alias:t.bills.cod_bill_alias,action:t.selected.types,created_user_id:t.selected.cashier,cod_bill_created_from:this.customFormatter(t.from),cod_bill_created_to:this.customFormatter(t.to),is_export_packages:1};k.a.exportPackageExcel(e).then(function(e){if(e.data.success&&e.data.data.files){var s=e.data.data.files;for(var a in s)t[a]=s[a];t.errorExport=!1}else t.errorExport=!0,t.msgErr=e.data.msg?e.data.msg:"Có lỗi khi sinh file. Hãy thử lại nhé!"}).catch(function(e){e&&(t.errorExport=!0,t.msgErr="Có lỗi khi sinh file. Hãy thử lại nhé!")}).then(function(){t.loadingExcel=!1})},downloadExcel:function(t){return"/admin/bills/downloadExcel/"+t},startLoading:function(t){this.loading[t]||this.updateLoadingValue(t,!0)},updateLoadingValue:function(t,e){this.loading[t]=e,this.loading=this.loading.slice(0)},clickAlias:function(t){return"/admin?alias="+t},slug:function(t){return"/admin/bills/download/"+t},pageChanged:function(t){this.searchBill(t),this.pageData.currentPage=t},getPackageForBill:function(t,e){var s=this;k.a.listCodPackages(t).then(function(t){t.data.Package.length>0?s.packageAjax.splice(e,1,t.data.Package):s.packageAjax.splice(e,1,!1)}).catch(function(t){}).then(function(){})},billsExport:function(){return this.bills_export_url},getPackageForDebtBill:function(t,e){var s=this;k.a.listPackagesDebtBill(t).then(function(t){t.data.Package.length>0?s.packageDebtBill.splice(e,1,t.data.Package):s.packageDebtBill.splice(e,1,!1)}).catch(function(t){}).then(function(){})},getPackageForReturnDebtBill:function(t,e){var s=this;k.a.listPackagesReturnDebtBill(t).then(function(t){t.data?s.packageReturnDebtBill.splice(e,1,[t.data.Package]):s.packageReturnDebtBill.splice(e,1,!1)}).catch(function(t){}).then(function(){})},getCustomerTel:function(t,e,s){var a=this,i={package_order:t};k.a.saveLogCustomerTelAdd(i).then(function(t){a.$set(a.packageAjax[e][s],"show_tel",!0),a.$set(a.packageAjax[e][s],"customer_tel",t.data.data)}).catch(function(t){}).then(function(){})},getCustomerAddress:function(t,e,s){var a=this,i={package_order:t};k.a.saveLogCustomerTelAdd(i).then(function(t){a.$set(a.packageAjax[e][s],"show_first_address",!0),a.$set(a.packageAjax[e][s],"customer_first_address",t.data.customer_ad)}).catch(function(t){}).then(function(){})},redirectDownload:function(){window.open("/adm/bills/download-manage?type=detail_cod")}},computed:{totalItems:function(){return this.listBills.length},totalPages:function(){return Math.ceil(this.totalItems/this.perPage)}}};var D=function(t){s("6aA6"),s("mgBJ")},S=Object(d.a)(T,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"ui-block"},[s("b-form-row",[s("h4",{staticClass:"ui-block-heading col-md-8"},[t._v("Quản lý hóa đơn COD")]),t._v(" "),s("div",{staticClass:"col-md-4 center"},[s("a",{staticClass:"btn btn-success",attrs:{href:t.billsExport(),target:"_blank","data-style":"zoom-out"}},[s("i",{staticClass:"sidenav-icon ion ion-md-filing"}),t._v("\n          Xuất Excel doanh thu\n        ")]),t._v(" "),s("button",{staticClass:"btn btn-warning",on:{click:t.redirectDownload}},[s("i",{staticClass:"sidenav-icon ion ion-md-filing"}),t._v("\n          Quản lý Download\n        ")])])]),t._v(" "),s("div",[s("form",[s("div",{staticClass:"form-filter"},[s("b-form-row",[s("div",{staticClass:"col-md-6"},[s("b-form-group",{attrs:{label:"Chọn COD"}},[s("select-cods",{ref:"select_cods",on:{selected:function(e){t.selected.cods=e}}})],1)],1),t._v(" "),s("div",{staticClass:"col-md-6"},[s("b-form-group",{attrs:{label:"Chọn kho"}},[s("select-stations",{ref:"select_stations",on:{selected:function(e){t.selected.stations=e}}})],1)],1)]),t._v(" "),s("b-form-row",[s("div",{staticClass:"col-md-3"},[s("b-form-group",{attrs:{label:"Mã hóa đơn"}},[s("b-input",{attrs:{type:"text",placeholder:"Nhập mã hóa đơn cách nhau bởi dấu phẩy hoặc dấu cách"},model:{value:t.bills.bill_code,callback:function(e){t.$set(t.bills,"bill_code",e)},expression:"bills.bill_code"}})],1)],1),t._v(" "),s("div",{staticClass:"col-md-3"},[s("b-form-group",{attrs:{label:"Mã đơn hàng"}},[s("b-input",{attrs:{type:"text",placeholder:"Nhập mã đơn hàng cách nhau bởi dấu phẩy"},model:{value:t.bills.cod_bill_alias,callback:function(e){t.$set(t.bills,"cod_bill_alias",e)},expression:"bills.cod_bill_alias"}})],1)],1),t._v(" "),s("div",{staticClass:"col-md-6"},[s("b-form-group",{attrs:{label:"Kiểu hóa đơn"}},[s("select-bill-type",{ref:"select_billType",on:{selected:function(e){t.selected.types=e}}})],1)],1)]),t._v(" "),s("b-form-row",[s("div",{staticClass:"col-md-6"},[s("b-form-group",{attrs:{label:"Người tạo hóa đơn"}},[s("select-cashier",{ref:"select_cashier",on:{selected:function(e){t.selected.cashier=e}}})],1)],1),t._v(" "),s("div",{staticClass:"col-md-3"},[s("b-form-group",{attrs:{label:"Từ:"}},[s("datepicker",{staticClass:"from-date",attrs:{bootstrapStyling:!0,format:t.customFormatter,disabled:t.inputDisable},on:{selected:t.dateSelectedFromInChild},model:{value:t.from,callback:function(e){t.from=e},expression:"from"}})],1)],1),t._v(" "),s("div",{staticClass:"col-md-3"},[s("b-form-group",{attrs:{label:"Đến:"}},[s("datepicker",{staticClass:"to-date",attrs:{bootstrapStyling:!0,format:t.customFormatter,disabled:t.inputDisable},on:{selected:t.dateSelectedToInChild},model:{value:t.to,callback:function(e){t.to=e},expression:"to"}})],1)],1)])],1),t._v(" "),s("b-form-row",[s("div",{staticClass:"align-content-center center"},[s("ladda-btn",{staticClass:"btn",attrs:{"data-style":"zoom-out"},on:{click:t.resetForm}},[t._v("\n              Nhập lại\n            ")]),t._v(" "),s("ladda-btn",{staticClass:"btn btn-success",attrs:{loading:t.loading[7],"data-style":"zoom-out"},nativeOn:{click:function(e){return t.searchBill(t.pageData.currentPage,!0,7)}}},[s("i",{staticClass:"sidenav-icon ion ion-md-search"}),t._v("\n              Xem hóa đơn\n            ")]),t._v(" "),s("b-button",{staticClass:"btn btn-success",on:{click:function(e){return t.exportDetailV2()}}},[s("i",{staticClass:"sidenav-icon ion ion-md-filing"}),t._v("\n              Xuất File Chi Tiết\n            ")]),t._v(" "),s("b-button",{staticClass:"btn btn-success",on:{click:function(e){return t.exportByStation()}}},[s("i",{staticClass:"sidenav-icon ion ion-md-filing"}),t._v("\n              Xuất file theo kho\n            ")])],1)])],1)]),t._v(" "),t.successExport?s("div",[s("b-alert",{attrs:{show:t.dismissCountDownSE,dismissible:"",variant:"success"},on:{dismissed:function(e){t.dismissCountDownSE=0}}},[t._v("\n        "+t._s(t.msgNotify)+"\n      ")])],1):t._e(),t._v(" "),t.listBills.length>0?s("div",{staticClass:"row checkbox-bill table-responsive"},[t.loadingExcel?s("BlockUI",{attrs:{message:"Dữ liệu đang được xử lý, vui lòng đợi!",html:t.loadingExcelHtml}}):t._e(),t._v(" "),s("a",{attrs:{href:"javascript:void(0);"},on:{click:t.exportPackage}},[s("span",{staticClass:"badge badge-primary float-right"},[t._v("Sinh file chi tiết hóa đơn")])])],1):t._e(),t._v(" "),!0===t.errorExport?s("div",{staticClass:"no-data"},[s("b-alert",{attrs:{show:"",dismissible:"",variant:"warning"}},[s("i",{staticClass:"sidenav-icon ion ion-ios-warning"}),t._v("\n        "+t._s(t.msgErr)+"\n      ")])],1):t._e(),t._v(" "),t.listBills.length>0?s("div",{staticClass:"download-file-banks"},[s("div",[s("div",{staticClass:"total-fee"},[t.exportedFilesRefund.length>0?s("span",{staticClass:"font-weight-bold"},[t._v("\n            Download file chi tiết:\n            "),s("a",{attrs:{href:t.downloadExcel(t.exportedFilesRefund),target:"_blank"}},[t._v("\n              Hóa đơn thu tiền\n            ")])]):t._e(),t._v(" "),t.exportedFilesRefund.length>0?s("br"):t._e(),t._v(" "),t.exportedFilesPrepayment.length>0?s("span",{staticClass:"font-weight-bold"},[t._v("\n            Download file chi tiết:\n            "),s("a",{attrs:{href:t.downloadExcel(t.exportedFilesPrepayment),target:"_blank"}},[t._v("\n              Hóa đơn trả trước\n            ")])]):t._e(),t._v(" "),t.exportedFilesPrepayment.length>0?s("br"):t._e(),t._v(" "),t.exportedFilesDebt.length>0?s("span",{staticClass:"font-weight-bold"},[t._v("\n            Download file chi tiết:\n            "),s("a",{attrs:{href:t.downloadExcel(t.exportedFilesDebt),target:"_blank"}},[t._v("\n              Hóa đơn shop nợ\n            ")])]):t._e(),t._v(" "),t.exportedFilesDebt.length>0?s("br"):t._e(),t._v(" "),t.exportedFilesReturnDebt.length>0?s("span",{staticClass:"font-weight-bold"},[t._v("\n            Download file chi tiết:\n            "),s("a",{attrs:{href:t.downloadExcel(t.exportedFilesReturnDebt),target:"_blank"}},[t._v("\n              Hóa đơn thu nợ trả hàng\n            ")])]):t._e(),t._v(" "),t.exportedFilesReturnDebt.length>0?s("br"):t._e()])])]):t._e(),t._v(" "),t.listBills.length>0?s("div",{staticClass:"row fee-count"},[s("div",[t.loadingSum?s("div",{staticClass:"text-center loading-sum"},[t._m(0)]):t._e(),t._v(" "),s("div",{staticClass:"total-fee"},[s("span",{staticClass:"font-weight-bold"},[t._v("Tổng thu: "+t._s(t.codTotal))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Phí khách trả: "+t._s(t.codTotalPaidShipMoney))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Phí shop trả: "+t._s(t.shopTotalShipMoney))]),s("br")]),t._v(" "),s("div",{staticClass:"total-fee"},[s("span",{staticClass:"font-weight-bold"},[t._v("Tổng phí dịch vụ: "+t._s(t.codTotalShipMoney))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Shop trả trước: "+t._s(t.codTotalPrepayment))]),t._v(" "),s("br")]),t._v(" "),s("div",{staticClass:"total-fee"},[s("span",{staticClass:"font-weight-bold"},[t._v("Tổng thu cũ: "+t._s(t.codTotalBill))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Tổng thu shop nợ: "+t._s(t.codTotalDebtMoney))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Tổng thu nợ trả hàng: "+t._s(t.codTotalReturnDebtMoney))]),t._v(" "),s("br")])])]):t._e(),t._v(" "),t.checkResult?s("div",{staticClass:"result",attrs:{id:"results"}},[t.listBills.length>0?s("b-card",{attrs:{"no-body":""}},[s("div",{staticClass:"table-result"},[s("b-card-body",{staticClass:"pt-0 pb-3"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm pt-3"},[s("b-pagination",{attrs:{"total-rows":t.pageData.totalItems,"per-page":t.pageData.perPage},on:{change:t.pageChanged},model:{value:t.pageData.currentPage,callback:function(e){t.$set(t.pageData,"currentPage",e)},expression:"pageData.currentPage"}}),t._v("\n                Tổng số hóa đơn: "+t._s(t.pageData.totalItems)+"\n              ")],1),t._v(" "),s("div",{staticClass:"col-sm text-sm-left text-center pt-3"},[t.pageData.totalItems?s("span",{staticClass:"text-muted"},[t._v("Trang "+t._s(t.pageData.currentPage)+" trên "+t._s(t.pageData.totalPages))]):t._e()])])]),t._v(" "),s("div",{staticClass:"table-responsive mb-4"},[s("table",{staticClass:"table mb-0 table-bordered table-striped"},[s("thead",{staticStyle:{width:"100%"}},[s("tr",[s("th",{attrs:{width:"25%"}},[t._v("Thông tin hóa đơn")]),t._v(" "),s("th",{attrs:{width:"75%"}},[t._v("Nội dung chi tiết")]),t._v(" "),s("th")])]),t._v(" "),s("tbody",t._l(t.listBills,function(e,a){return s("tr",{staticClass:"tr-bill"},[s("td",["prepayment"===e.Bill.action?s("div",[s("span",{staticClass:"badge badge-outline-success"},[t._v(t._s(e.Bill.code))]),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Shop trả trước:")]),s("span",{staticClass:"font-weight-bold float-right"},[t._v(t._s(e.Bill.total_prepayment))]),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("SL ĐH: ")]),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.Bill.count_packages))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("SL ĐH LH: ")]),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.Bill.count_picked))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("SL ĐH LH fail: ")]),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.Bill.count_picked_fail))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("SL ĐH LH delay: ")]),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.Bill.count_pickup_delay))]),t._v(" "),s("br")]):t._e(),t._v(" "),"refund"===e.Bill.action?s("div",[s("span",{staticClass:"badge badge-outline-success"},[t._v(t._s(e.Bill.code))]),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Tổng tiền thu:")]),s("span",{staticClass:"font-weight-bold float-right"},[t._v(t._s(e.Bill.total_pick_money))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Tổng phí bảo hiểm:")]),s("span",{staticClass:"font-weight-bold float-right"},[t._v(t._s(e.Bill.total_insurance_fee))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Tổng phí ship:")]),s("span",{staticClass:"font-weight-bold float-right"},[t._v(t._s(e.Bill.total_ship_money))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Phí shop trả:")]),s("span",{staticClass:"font-weight-bold float-right"},[t._v(t._s(e.Bill.total_shop_ship_money))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Phí khách trả:")]),s("span",{staticClass:"font-weight-bold float-right"},[t._v(t._s(e.Bill.total_paid_ship_money))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Shop trả trước:")]),s("span",{staticClass:"font-weight-bold float-right"},[t._v(t._s(e.Bill.total_prepayment))]),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("SL ĐH: ")]),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.Bill.count_packages))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("SL ĐH đã đối soát: ")]),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.Bill.count_done_packages))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("SL ĐH đã trả: ")]),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.Bill.count_failed_packages))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("SL ĐH delay: ")]),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.Bill.count_delay_packages))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("SL ĐH thực nhận: ")]),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.Bill.no_hold_packages))]),t._v(" "),s("br")]):t._e(),t._v(" "),"debt"===e.Bill.action?s("div",[s("span",{staticClass:"badge badge-outline-success"},[t._v(t._s(e.Bill.code))]),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Tổng thu shop nợ:")]),s("span",{staticClass:"font-weight-bold float-right"},[t._v(t._s(e.DebtBill.money))]),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("SL ĐH: ")]),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.DebtBill.count_pkg))]),t._v(" "),s("br")]):t._e(),t._v(" "),"return_debt"===e.Bill.action?s("div",[s("span",{staticClass:"badge badge-outline-success"},[t._v(t._s(e.Bill.code))]),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Tổng thu nợ trả hàng:")]),s("span",{staticClass:"font-weight-bold float-right"},[t._v(t._s(e.ReturnDebtMoney.money))]),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("SL ĐH: ")]),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.ReturnDebtMoney.count_pkg))]),t._v(" "),s("br")]):t._e(),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Người tạo: ")]),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.Bill.created_username))]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("TG tạo: ")]),s("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.Bill.created))]),t._v(" "),s("br")]),t._v(" "),s("td",{staticClass:"bill-info"},[null!=e.Cod?s("span",{staticClass:"badge align-text-bottom badge-success"},[t._v(t._s(e.Cod.alias)+" - "+t._s(e.Cod.fullname))]):t._e(),t._v(" "),s("br"),t._v(" "),"debt"!==e.Bill.action&&"return_debt"!==e.Bill.action?s("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"toggle-"+a,expression:"'toggle-' + index"}],staticClass:"d-flex justify-content-between text-decoration-none bill-show-package",attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.getPackageForBill(e.Bill.id,a)}}},[t._v("\n                      Xem đơn hàng   \n                      "),s("span",{staticClass:"collapse-icon"})]):t._e(),t._v(" "),"debt"===e.Bill.action?s("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"toggle-debt-"+a,expression:"'toggle-debt-' + index"}],staticClass:"d-flex justify-content-between text-decoration-none bill-show-package",attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.getPackageForDebtBill(e.Bill.id,a)}}},[t._v("\n                      Xem đơn hàng   \n                      "),s("span",{staticClass:"collapse-icon"})]):t._e(),t._v(" "),"return_debt"===e.Bill.action?s("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"toggle-return-debt-"+a,expression:"'toggle-return-debt-' + index"}],staticClass:"d-flex justify-content-between text-decoration-none bill-show-package",attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.getPackageForReturnDebtBill(e.Bill.id,a)}}},[t._v("\n                      Xem đơn hàng   \n                      "),s("span",{staticClass:"collapse-icon"})]):t._e(),t._v(" "),s("a",{attrs:{href:t.slug(e.Bill.id),target:"_blank"}},[t._v("\n                      Download file excel\n                    ")]),t._v(" "),s("div",[s("b-collapse",{attrs:{id:"toggle-"+a}},t._l(t.packageAjax[a],function(e,i){return s("b-card",{key:e.order,staticClass:"package-bill"},[s("a",{staticClass:"text-decoration-none text-alias",attrs:{href:t.clickAlias(e.alias),target:"_blank"}},[t._v("\n                            "+t._s(e.alias)+"\n                          ")]),t._v(" "),s("br"),t._v(" "),1==e.is_freeship?s("span",{staticClass:"font-weight-bold"},[t._v("Free Ship cho khách")]):t._e(),t._v(" "),0==e.is_freeship?s("span",{staticClass:"font-weight-bold"},[t._v("Khách trả tiền Ship")]):t._e(),t._v(" "),s("br"),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Trạng thái: ")]),t._v(" "+t._s(t.packageStatuses[e.package_status_id])+" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Tiền thu hộ: ")]),t._v(" "+t._s(e.getFinalPickMoney)),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Phí dịch vụ: ")]),t._v(" "+t._s(e.isExcludeInsuranceFee)),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Shop trả trước: ")]),t._v(" "+t._s(e.getFinalPrePaidAmount)),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Tên KH: ")]),t._v(" "+t._s(e.customer_fullname)+" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Địa chỉ: ")]),t._v(" "),e.show_first_address?s("span",[t._v(t._s(e.customer_first_address))]):t._e(),t._v(" "),e.show_first_address?t._e():s("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{href:"javascript:void(0)",title:"Bấm để xem chi tiết! Thông tin người bấm sẽ được lưu lại!"},on:{click:function(s){return t.getCustomerAddress(e.order,a,i)}}},[t._v("\n                            Bấm xem địa chỉ\n                          ")]),t._v("\n                          - "+t._s(e.customer_last_address)+" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("ĐT KH: ")]),t._v(" "),e.show_tel?s("span",[t._v(t._s(e.customer_tel))]):t._e(),t._v(" "),e.show_tel?t._e():s("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{href:"javascript:void(0)",title:"Bấm để xem chi tiết! Thông tin người bấm sẽ được lưu lại!"},on:{click:function(s){return t.getCustomerTel(e.order,a,i)}}},[t._v("\n                            "+t._s(e.customer_tel)+"\n                          ")]),t._v(" "),s("br")])}),1)],1),t._v(" "),!1===t.packageAjax[a]&&"debt"!==e.Bill.action&&"return_debt"!==e.Bill.action?s("b-alert",{attrs:{show:"",dismissible:"",variant:"warning"}},[s("i",{staticClass:"sidenav-icon ion ion-ios-warning"}),t._v("\n                      Không có đơn hàng\n                    ")]):t._e(),t._v(" "),s("div",[s("b-collapse",{attrs:{id:"toggle-debt-"+a}},t._l(t.packageDebtBill[a],function(e){return s("b-card",{key:e.order,staticClass:"package-bill"},[s("a",{staticClass:"text-decoration-none text-alias",attrs:{href:t.clickAlias(e.alias),target:"_blank"}},[t._v("\n                            "+t._s(e.alias)+"\n                          ")]),t._v(" "),s("br"),t._v(" "),1==e.is_freeship?s("span",{staticClass:"font-weight-bold"},[t._v("Free Ship cho khách")]):t._e(),t._v(" "),0==e.is_freeship?s("span",{staticClass:"font-weight-bold"},[t._v("Khách trả tiền Ship")]):t._e(),t._v(" "),s("br"),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Trạng thái: ")]),t._v(" "+t._s(t.packageStatuses[e.package_status_id])+" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Tiền thu hộ: ")]),t._v(" "+t._s(e.getFinalPickMoney)),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Phí dịch vụ: ")]),t._v(" "+t._s(e.isExcludeInsuranceFee)),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Shop trả trước: ")]),t._v(" "+t._s(e.getFinalPrePaidAmount)),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Phí đồng kiểm: ")]),t._v(" "+t._s(e.getFinalCoCheckFee)),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Phí chuyển hoàn: ")]),t._v(" "+t._s(e.getFinalReturnFee)),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Khuyến mãi: ")]),t._v(" "+t._s(e.discountAmount)),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Tiền trả shop: ")]),t._v(" "+t._s(e.finalCashBack)),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Tên KH: ")]),t._v(" "+t._s(e.customer_fullname)+" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Địa chỉ: ")]),t._v(" "+t._s(e.customer_first_address)+" - "+t._s(e.customer_last_address)+" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("ĐT KH: ")]),t._v(" "+t._s(e.customer_tel)+" "),s("br")])}),1)],1),t._v(" "),!1===t.packageDebtBill[a]&&"debt"===e.Bill.action?s("b-alert",{attrs:{show:"",dismissible:"",variant:"warning"}},[s("i",{staticClass:"sidenav-icon ion ion-ios-warning"}),t._v("\n                      Không có đơn hàng\n                    ")]):t._e(),t._v(" "),s("div",[s("b-collapse",{attrs:{id:"toggle-return-debt-"+a}},t._l(t.packageReturnDebtBill[a],function(e){return s("b-card",{key:e.order,staticClass:"package-bill"},[s("a",{staticClass:"text-decoration-none text-alias",attrs:{href:t.clickAlias(e.alias),target:"_blank"}},[t._v("\n                            "+t._s(e.alias)+"\n                          ")]),t._v(" "),s("br"),t._v(" "),1==e.is_freeship?s("span",{staticClass:"font-weight-bold"},[t._v("Free Ship cho khách")]):t._e(),t._v(" "),0==e.is_freeship?s("span",{staticClass:"font-weight-bold"},[t._v("Khách trả tiền Ship")]):t._e(),t._v(" "),s("br"),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Trạng thái: ")]),t._v(" "+t._s(t.packageStatuses[e.package_status_id])+" "),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Tiền thu hộ: ")]),t._v(" "+t._s(e.getFinalPickMoney)),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Phí dịch vụ: ")]),t._v(" "+t._s(e.isExcludeInsuranceFee)),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Phí bảo hiểm: ")]),t._v(" "+t._s(e.insuranceFee)),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Shop trả trước: ")]),t._v(" "+t._s(e.getFinalPrePaidAmount)),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Phí chuyển hoàn: ")]),t._v(" "+t._s(e.getFinalReturnFee)),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Phí thay đổi địa chỉ: ")]),t._v(" "+t._s(e.changeAddressFee)),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Khuyến mãi: ")]),t._v(" "+t._s(e.discountAmount)),s("br"),t._v(" "),s("span",{staticClass:"font-weight-bold"},[t._v("Tên KH: ")]),t._v(" "+t._s(e.customer_fullname)+" "),s("br")])}),1)],1),t._v(" "),!1===t.packageReturnDebtBill[a]&&"return_debt"===e.Bill.action?s("b-alert",{attrs:{show:"",dismissible:"",variant:"warning"}},[s("i",{staticClass:"sidenav-icon ion ion-ios-warning"}),t._v("\n                      Không có đơn hàng\n                    ")]):t._e()],1)])}),0)])])],1)]):t._e(),t._v(" "),0==t.listBills.length?s("div",{staticClass:"no-data"},[s("b-alert",{attrs:{show:"",dismissible:"",variant:"warning"}},[s("i",{staticClass:"sidenav-icon ion ion-ios-warning"}),t._v("\n          Không có dữ liệu phù hợp, vui lòng thử lại.\n        ")])],1):t._e()],1):t._e(),t._v(" "),s("loading-mini-bottom",{attrs:{enable:t.appLoading}})],1)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"lds-spinner"},[e("div"),e("div"),e("div"),e("div"),e("div"),e("div"),e("div"),this._v(" "),e("div"),e("div"),e("div"),e("div"),e("div")])}],!1,D,"data-v-5f3e59b7",null);e.default=S.exports},J8Ii:function(t,e){},JJPT:function(t,e){},aq6A:function(t,e,s){"use strict";var a=s("PikB");e.a={searchBillCod:function(t){return a.a.get("AdBills/getBillsCod",{params:t})},listCodPackages:function(t){return a.a.get("bills/listCodPackages/"+t)},getSummariesCod:function(t){return a.a.get("bills/getSummariesCod",{params:t})},listPackagesDebtBill:function(t){return a.a.get("bills/listPackagesDebtBill/"+t)},listPackagesReturnDebtBill:function(t){return a.a.get("bills/listPackagesReturnDebtBill/"+t)},exportPackageExcel:function(t){return a.a.get("bills/exportPackageExcel",{params:t})},exportDetailExcel:function(t){return a.a.get("bills/exportDetailExcel",{params:t})},exportStationExcel:function(t){return a.a.get("bills/exportStationExcel",{params:t})},saveLogCustomerTelAdd:function(t){return a.a.post("xem-thong-tin/saveViewCustomerTelLog",t)},billDownloadInfo:function(t){return a.a.get("AdDownloadManager/indexDownloadCod",{params:t})}}},mgBJ:function(t,e){},qi5d:function(t,e){}});