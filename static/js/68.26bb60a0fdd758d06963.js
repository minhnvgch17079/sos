webpackJsonp([68],{HpyY:function(t,a){},w2dE:function(t,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var c=n("mvHQ"),e=n.n(c),s=n("RUzx"),o=n.n(s),i=n("IC97"),l=n("7+uW"),r=n("CLX7"),d=n.n(r),u=n("agCp"),p=n("oonE");l.default.use(d.a);var _={name:"contract-update",components:{Notification:Notification,Multiselect:o.a,Datepicker:i.a},data:function(){return{contract_id:null,contract:null,user:null,mode:"update",showCreateButton:!0,appLoading:!1,contract_update:{},options:{contract_type:p.a.getTypeOptions()},notify:{message:"",class:"",title:""}}},methods:{getContractById:function(){var t=this,a={id:this.$route.params.id};u.a.getContractById(a).then(function(a){a.data.success&&(t.user=a.data.data.user,t.contract=a.data.data.contract,t.contract_id=a.data.data.contract.id,t.contract_update=JSON.parse(e()(t.contract)))}).catch(function(t){console.log(t)})},showNotification:function(t){var a="bg-success text-white";t||(a="bg-warning text-dark"),this.$notify({group:"create-appendix",title:this.notify.title,text:this.notify.message,type:a})},saveContract:function(){var t=this;this.notify.success=!1,this.notify.title="Không thành công";var a=this.contract_update;a.contract_id=this.contract.id,a.type_contract=this.contract_update.contract_type,"indefinite"===this.contract_update.contract_type&&(this.contract_update.end_date=null),u.a.updateContract(a).then(function(a){a.data.hasOwnProperty("success")&&(a.data.success&&(t.notify.success=!0,t.notify.title="Thành công"),t.notify.message=a.data.message)}).then(function(){t.showNotification(t.notify.success),t.notify.success&&setTimeout(function(){location.reload()},600)})},updateAppendix:function(t){this.appendix=t},alertNotFound:function(){this.$emit("not_found",!0)}},created:function(){this.getContractById()}},h=n("XyMi");var v=function(t){n("LZVb"),n("6aA6"),n("HpyY")},m=Object(h.a)(_,function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12 contract-detail"},[n("div",{staticClass:"card mb-4"},[n("div",{staticClass:"row no-gutters row-bordered"},[n("div",{staticClass:"col-md-8 col-lg-12 col-xl-8"},[n("h6",{staticClass:"card-header"},[n("i",{staticClass:"ion  ion-ios-cloud-done"}),t._v(" Cập nhật thông tin hợp đồng - "),n("b",[t._v(t._s(t.contract_update.contract_number))])]),t._v(" "),n("div",{staticClass:"card-body"},[n("b-form-row",[n("b-form-group",{staticClass:"col-md-12",attrs:{label:"Nhập ngày kí hợp đồng"}},[n("datepicker",{attrs:{typeable:!0,format:"yyyy-MM-dd",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,placeholder:"Chọn ngày kí hợp đồng","calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},on:{input:t.onChangeContractDate},model:{value:t.contract_update.contract_date,callback:function(a){t.$set(t.contract_update,"contract_date",a)},expression:"contract_update.contract_date"}})],1),t._v(" "),n("b-form-group",{staticClass:"col-md-6",attrs:{label:"Chọn ngày HĐ có hiệu lực"}},[n("datepicker",{attrs:{typeable:!0,format:"yyyy-MM-dd",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,placeholder:"Ngày HĐ có hiệu lực","calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},on:{input:t.onChangeStartDate},model:{value:t.contract_update.start_date,callback:function(a){t.$set(t.contract_update,"start_date",a)},expression:"contract_update.start_date"}})],1),t._v(" "),"indefinite"!==t.contract_update.contract_type?n("b-form-group",{staticClass:"col-md-6",attrs:{label:"Chọn ngày kết thúc hợp đồng"}},[n("datepicker",{attrs:{typeable:!0,format:"yyyy-MM-dd",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,placeholder:"Chọn ngày kết thúc","calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.contract_update.end_date,callback:function(a){t.$set(t.contract_update,"end_date",a)},expression:"contract_update.end_date"}})],1):t._e(),t._v(" "),n("b-form-group",{staticClass:"col-md-12",attrs:{label:""}},[n("b-form-checkbox",{attrs:{value:"1","unchecked-value":"0"},model:{value:t.contract_update.has_kpi,callback:function(a){t.$set(t.contract_update,"has_kpi",a)},expression:"contract_update.has_kpi"}},[n("b",[t._v("Tính lương theo KPI")])])],1)],1)],1),t._v(" "),n("div",{staticClass:"card-footer border-0 text-center py-3"},[n("b-row",[n("b-col",{attrs:{md:"4",offset:"2"}},[n("b-btn",{staticClass:"btn btn-md btn-outline-warning",on:{click:t.saveContract}},[n("i",{staticClass:"ion ion-ios-save"}),t._v("  Lưu thông tin hợp đồng")])],1),t._v(" "),n("b-col",{attrs:{md:"2"}},[n("router-link",{staticClass:"btn btn-md btn-outline-info",attrs:{to:{name:"contract-detail",params:{id:t.contract_update.id}}}},[n("i",{staticClass:"ion ion-md-eye"}),t._v(" Xem hợp đồng")])],1)],1)],1)]),t._v(" "),t.user?n("div",{staticClass:"col-md-4 col-lg-12 col-xl-4 current-salary"},[t._m(0),t._v(" "),n("div",{staticClass:"card-body"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-6 col-xl-5 text-muted mb-3"},[t._v("Mã nhân viên")]),t._v(" "),n("div",{staticClass:"col-6 col-xl-7 mb-3"},[n("span",{staticClass:"text-big"},[t._v(t._s(t.user.staff_code))])]),t._v(" "),n("div",{staticClass:"col-6 col-xl-5 text-muted mb-3"},[t._v("Họ tên")]),t._v(" "),n("div",{staticClass:"col-6 col-xl-7 mb-3"},[n("span",{staticClass:"text-big"},[t._v(t._s(t.user.fullname))]),t._v(" "),n("sup",{staticClass:"text-success"})]),t._v(" "),n("div",{staticClass:"col-6 col-xl-5 text-muted mb-3"},[t._v("Số CMT")]),t._v(" "),n("div",{staticClass:"col-6 col-xl-7 mb-3"},[n("span",{staticClass:"text-big"},[t._v(t._s(t.user.national_id))])]),t._v(" "),n("div",{staticClass:"col-6 col-xl-5 text-muted mb-3"},[t._v("Vị trí")]),t._v(" "),n("div",{staticClass:"col-6 col-xl-7 mb-3"},[n("span",{staticClass:"text-big"},[t._v(t._s(t.user.department)+" - "+t._s(t.user.position))])]),t._v(" "),n("div",{staticClass:"col-6 col-xl-5 text-muted mb-3"},[t._v("Kho")]),t._v(" "),n("div",{staticClass:"col-6 col-xl-7 mb-3"},[n("span",{staticClass:"text-big"},[t._v(t._s(t.user.station))])])])])]):t._e()])])])])},[function(){var t=this.$createElement,a=this._self._c||t;return a("h6",{staticClass:"card-header"},[a("i",{staticClass:"ion ion-ios-person"}),this._v(" Thông tin cá nhân")])}],!1,v,"data-v-524a082a",null);a.default=m.exports}});