webpackJsonp([24],{"74g/":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("RUzx"),o=i.n(n),a=i("wX3c"),l=i("TyzE"),s=i("3BrW"),c=i("TKVu"),r=i("rNeS"),d={computed:{lenProvinceIds:function(){if(this.formConfig.stationIds)return this.formConfig.stationIds.includes(",")?2:1}},props:["editConfig"],components:{MultiSelectStation:s.a,MultiSelectProvince:l.a,MultiSelectModule:c.a,MultiSelectCart:r.a},created:function(){var t=this;this.formConfig.remunerationPackage=this.editConfig.item.remunerationPackage,this.formConfig.additionalPackage=this.editConfig.item.additionalPackage,a.a.getListSelectRemunerationPackage().then(function(e){e.data.success&&(t.listRemunerationPackages1=e.data.data)}).catch(function(e){t.errors.push(e)}),a.a.getAdditionalPackage().then(function(e){e.data.success&&(t.listAdditionalPackage1=e.data.data)}).catch(function(e){t.errors.push(e)})},data:function(){return{isDisabled:!1,formConfig:{id:this.editConfig.item.id,provinceIds:null,stationIds:null,moduleId:null,cartId:null,additionalPackage:null,remunerationPackage:null},listAdditionalPackage1:[],listRemunerationPackages1:[]}},watch:{"formConfig.stationIds":function(){this.formConfig.moduleId=null,this.formConfig.cartId=null},"formConfig.provinceIds":function(){this.formConfig.moduleId=null,this.formConfig.cartId=null}},methods:{editConfigCampaign:function(){var t=this;a.a.updateConfigCampaign(this.formConfig).then(function(e){e.data.success?(t.$notify({group:"default",type:"bg-success text-white",title:"Thông báo",text:e.data.message}),t.$emit("exit",!0)):t.$notify({group:"default",type:"bg-warning text-dark",title:"Thông báo",text:e.data.message})}).catch(function(e){t.errors.push(e)})},handleStationSelected:function(t){this.formConfig.stationIds=t?t.map(function(t){return t.id}).toString():""},handleProvinceSelected:function(t){this.formConfig.provinceIds=t?t.map(function(t){return t.id}).toString():""},handleModuleSelected:function(t){this.formConfig.moduleId=t},handleCartSelected:function(t){this.formConfig.cartId=t}}},u=i("XyMi"),f=Object(u.a)(d,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-container",[i("b-row",[i("b-col",[i("b-form-group",{attrs:{id:"input-group-5",label:"Tỉnh được gán: ","label-for":"input-5"}},[i("multi-select-province",{attrs:{"province-ids":t.editConfig.item.province},on:{handleProvinceSelected:t.handleProvinceSelected},model:{value:t.formConfig.provinceIds,callback:function(e){t.$set(t.formConfig,"provinceIds",e)},expression:"formConfig.provinceIds"}})],1)],1),t._v(" "),i("b-col",[i("b-form-group",{attrs:{id:"input-group-6",label:"Kho được gán tương ứng: ","label-for":"input-6"}},[i("multi-select-station",{attrs:{"province-ids":t.formConfig.provinceIds,"station-ids":t.editConfig.item.station},on:{handleStationSelected:t.handleStationSelected}})],1)],1)],1),t._v(" "),i("br"),t._v(" "),1==t.lenProvinceIds?i("b-row",[i("b-col",[i("b-form-group",{attrs:{id:"input-group-9",label:"Chọn modul tương ứng với kho: ","label-for":"input-9"}},[i("multi-select-module",{attrs:{"module-id":t.editConfig.item.module,"station-id":t.formConfig.stationIds},on:{handleModuleSelected:function(e){return t.handleModuleSelected(e)}}})],1)],1),t._v(" "),i("b-col",[i("b-form-group",{attrs:{id:"input-group-10",label:"Chọn giỏ tương ứng với modul: ","label-for":"input-9"}},[i("multi-select-cart",{attrs:{"cart-id":t.editConfig.item.cart,"module-ids":t.formConfig.moduleId},on:{handleCartSelected:function(e){return t.handleCartSelected(e)}}})],1)],1)],1):t._e(),t._v(" "),i("br"),t._v(" "),i("b-row",[i("b-col",[i("b-form-group",{attrs:{id:"input-group-7",label:"Gói tiền công: ","label-for":"input-7"}},[i("b-form-select",{attrs:{id:"input-7",required:"",options:t.listRemunerationPackages1},model:{value:t.formConfig.remunerationPackage,callback:function(e){t.$set(t.formConfig,"remunerationPackage",e)},expression:"formConfig.remunerationPackage"}})],1)],1),t._v(" "),i("b-col",[i("b-form-group",{attrs:{id:"input-group-8",label:"Gói bổ sung`: ","label-for":"input-8"}},[i("b-form-select",{attrs:{id:"input-8",required:"",options:t.listAdditionalPackage1},model:{value:t.formConfig.additionalPackage,callback:function(e){t.$set(t.formConfig,"additionalPackage",e)},expression:"formConfig.additionalPackage"}})],1)],1)],1),t._v(" "),i("b-button",{staticClass:"mt-3",attrs:{block:"",variant:"primary"},on:{click:t.editConfigCampaign}},[t._v("Cập nhập")])],1)},[],!1,null,null,null).exports,m=i("9kyz"),g={components:{MultiSelectModule:c.a,MultiSelectCart:r.a,ModalConfigCampaign:m.a,MultiSelectStation:s.a,MultiSelectProvince:l.a,ModalEditConfigCampaign:f,Multiselect:o.a},computed:{rows:function(){return this.items.length}},created:function(){var t=this;this.showConfig(),a.a.getCampaign(this.fId).then(function(e){t.receiveDataroute.name=e.data.data.campaign_name,t.receiveDataroute.from=e.data.data.active_time,t.receiveDataroute.to=e.data.data.expire_time}).catch(function(e){t.errors.push(e)}),a.a.getListSelectRemunerationPackage().then(function(e){e.data.success&&(t.listRemunerationPackages=e.data.data)}).catch(function(e){t.errors.push(e)}),a.a.getAdditionalPackage().then(function(e){e.data.success&&(t.listAdditionalPackage=e.data.data)}).catch(function(e){t.errors.push(e)})},methods:{hideModal:function(){this.$refs["modal-noti"].hide()},btnBack:function(){this.$router.push({name:"manager-campaign"})},saveConfig:function(t){this.editConfig=t,this.$refs["modal-edit-config"].show()},showConfig:function(){var t=this;this.$startLoading(),a.a.getConfigCampaign(this.fId).then(function(e){e.data.success?("special"===e.data.data&&t.$router.push({name:"manager-campaign"}),t.items=e.data.data,t.$stopLoading()):t.$refs["modal-noti"].show()}).catch(function(e){t.errors.push(e)})},closeModal:function(){this.$refs["modal-create-config"].hide(),this.showConfig()},closeModalEdit:function(){this.$refs["modal-edit-config"].hide(),location.reload()},showModalCreateConfigCampaign:function(){this.$refs["modal-create-config"].show()},handleStationSelected:function(t,e){this.formConfig[e]||(this.formConfig[e]={}),this.formConfig[e].stationIds=t?t.map(function(t){return t.id}).join(","):""},handleProvinceSelected:function(t,e){this.formConfig[e]||(this.formConfig[e]={}),this.formConfig[e].provinceIds=t?t.map(function(t){return t.id}).join(","):""},handleModuleSelected:function(t){this.formConfig1.moduleId=t},handleCartSelected:function(t){this.formConfig1.cartId=t}},data:function(){return{editConfig:{},fixed:!0,fId:{id:this.$route.query.id},receiveDataroute:{name:"",from:"",to:""},formConfig:[],formConfig1:{moduleId:null,cartId:null},listRemunerationPackages:[],perPage:9,currentPage:1,fields:[{key:"province",label:"Tỉnh được gán"},{key:"station",label:"Kho được gán"},{key:"module",label:"Module được gán"},{key:"cart",label:"Giỏ được gán"},{key:"remunerationPackage",label:"Gói tiền công được áp dụng"},{key:"additionalPackage",label:"Gói bổ sung"},{key:"save",label:""}],items:[],listAdditionalPackage:[],options:[{name:"Vue.js",language:"JavaScript"},{name:"Rails",language:"Ruby"},{name:"Sinatra",language:"Ruby"},{name:"Laravel",language:"PHP"},{name:"Phoenix",language:"Elixir"}]}}},h=Object(u.a)(g,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-modal",{ref:"modal-create-config",attrs:{title:"Thêm cấu hình",size:"lg","hide-footer":""}},[i("modal-config-campaign",{attrs:{id:t.fId.id},on:{exit:t.closeModal}})],1),t._v(" "),i("b-modal",{ref:"modal-edit-config",attrs:{title:"Sửa cấu hình",size:"lg","hide-footer":""}},[t._v("\n  `   "),i("modal-edit-config-campaign",{attrs:{editConfig:t.editConfig},on:{exit:t.closeModalEdit}})],1),t._v(" "),i("b-row",[i("h3",[t._v(t._s(t.receiveDataroute.name)+" ( Bắt đầu từ "+t._s(t.receiveDataroute.from)+" đến "+t._s(t.receiveDataroute.to)+" )")])]),t._v(" "),i("h3",{staticClass:"d-flex justify-content-between align-items-center w-100 font-weight-bold py-3 mb-4"},[i("div"),t._v(" "),i("b-btn",{staticClass:"d-block",attrs:{id:"show-btn",variant:"primary btn-round"},on:{click:t.showModalCreateConfigCampaign}},[i("span",{staticClass:"ion ion-md-add"}),t._v(" Thêm config")])],1),t._v(" "),i("b-card",[i("b-table",{attrs:{fixed:t.fixed,id:"my-table",small:"",fields:t.fields,items:t.items,"per-page":t.perPage,"current-page":t.currentPage,responsive:"sm"},scopedSlots:t._u([{key:"cell(province)",fn:function(e){return[i("multi-select-province",{attrs:{"province-ids":e.item.province,isDisabled:!0},on:{handleProvinceSelected:function(i){return t.handleProvinceSelected(i,e.item.id)}}})]}},{key:"cell(station)",fn:function(e){return[i("multi-select-station",{attrs:{"province-ids":e.item.province,"station-ids":e.item.station,isDisabled:!0},on:{handleStationSelected:function(i){return t.handleStationSelected(i,e.item.id)}}})]}},{key:"cell(module)",fn:function(e){return[i("multi-select-module",{attrs:{"module-id":e.item.module,"station-id":e.item.station,isDisabled:!0},on:{handleModuleSelected:function(e){return t.handleModuleSelected(e)}}})]}},{key:"cell(cart)",fn:function(e){return[i("multi-select-cart",{attrs:{"cart-id":e.item.cart,"module-ids":e.item.module,isDisabled:!0},on:{handleCartSelected:function(e){return t.handleCartSelected(e)}}})]}},{key:"cell(remunerationPackage)",fn:function(e){return[i("b-form-select",{attrs:{id:"input-1",required:"",options:t.listRemunerationPackages,disabled:!0},model:{value:e.item.remunerationPackage,callback:function(i){t.$set(e.item,"remunerationPackage",i)},expression:"data.item.remunerationPackage"}})]}},{key:"cell(additionalPackage)",fn:function(e){return[i("b-form-select",{attrs:{id:"input-2",required:"",options:t.listAdditionalPackage,disabled:!0},model:{value:e.item.additionalPackage,callback:function(i){t.$set(e.item,"additionalPackage",i)},expression:"data.item.additionalPackage"}})]}},{key:"cell(save)",fn:function(e){return[i("div",[i("b-button",{staticClass:"d-block btn-lg",attrs:{variant:"outline-info icon-btn",block:""},on:{click:function(i){return t.saveConfig(e)}}},[i("span",{staticClass:"ion ion-md-create"})])],1)]}}])})],1),t._v(" "),i("br"),t._v(" "),i("div",{staticClass:"overflow-auto"},[i("b-pagination",{attrs:{items:t.items,"total-rows":t.rows,"per-page":t.perPage,"aria-controls":"my-table",align:"right"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),i("b-btn",{staticClass:"d-block",attrs:{id:"back",variant:"success btn-round"},on:{click:t.btnBack}},[i("span",{staticClass:"ion ion-md-return-left"}),t._v(" Quay lại")]),t._v(" "),i("b-modal",{ref:"modal-noti",attrs:{"hide-footer":"",title:"Thông báo"}},[i("div",{staticClass:"d-block text-center"},[i("h3",[t._v("Campaign chưa được gán với bất kì gói tiền công cộng tác viên nào cụ thể, bạn có thể đóng thông báo và tạo chúng")])]),t._v(" "),i("b-button",{staticClass:"mt-3",attrs:{variant:"outline-danger",block:""},on:{click:t.hideModal}},[t._v("Đóng")])],1)],1)},[],!1,null,null,null);e.default=h.exports},"9kyz":function(t,e,i){"use strict";var n=i("wX3c"),o=i("TyzE"),a=i("3BrW"),l=i("TKVu"),s=i("rNeS"),c={computed:{lenProvinceIds:function(){if(this.formConfig.stationIds)return this.formConfig.stationIds.includes(",")?2:1}},props:["id"],components:{MultiSelectStation:a.a,MultiSelectProvince:o.a,MultiSelectModule:l.a,MultiSelectCart:s.a},created:function(){var t=this;n.a.getListSelectRemunerationPackage().then(function(e){e.data.success&&(t.listRemunerationPackages1=e.data.data)}),n.a.getAdditionalPackage().then(function(e){e.data.success&&(t.listAdditionalPackage1=e.data.data)}).catch(function(e){t.errors.push(e)})},data:function(){return{isDisabled:!1,formConfig:{campaignId:this.id,provinceIds:null,stationIds:null,moduleId:null,cartId:null,additionalPackage:"0",remunerationPackage:null},listAdditionalPackage1:[],listRemunerationPackages1:[]}},methods:{createConfigCampaign:function(){var t=this;this.isDisabled=!0,this.$startLoading(),n.a.createConfigCampaign(this.formConfig).then(function(e){e.data.success?(t.$notify({group:"default",type:"bg-success text-white",title:"Thông báo",text:e.data.message}),t.$emit("exit",!0),t.$refs["modal-create-config"].hide(),t.$stopLoading()):t.$notify({group:"default",type:"bg-warning text-dark",title:"Thông báo",text:e.data.message}),t.isDisabled=!1})},handleStationSelected:function(t){this.formConfig.stationIds=t?t.map(function(t){return t.id}).toString():""},handleProvinceSelected:function(t){this.formConfig.provinceIds=t?t.map(function(t){return t.id}).toString():""},handleModuleSelected:function(t){this.formConfig.moduleId=t},handleCartSelected:function(t){this.formConfig.cartId=t}}},r=i("XyMi"),d=Object(r.a)(c,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-container",[i("b-row",[i("b-col",[i("b-form-group",{attrs:{id:"input-group-5",label:"Tỉnh được gán: ","label-for":"input-5"}},[i("multi-select-province",{on:{handleProvinceSelected:t.handleProvinceSelected}})],1)],1),t._v(" "),i("b-col",[i("b-form-group",{attrs:{id:"input-group-6",label:"Kho được gán tương ứng: ","label-for":"input-6"}},[i("multi-select-station",{attrs:{"province-ids":t.formConfig.provinceIds,"station-ids":t.formConfig.stationIds},on:{handleStationSelected:t.handleStationSelected}})],1)],1)],1),t._v(" "),i("br"),t._v(" "),1==t.lenProvinceIds?i("b-row",[i("b-col",[i("b-form-group",{attrs:{id:"input-group-9",label:"Chọn modul tương ứng với kho: ","label-for":"input-9"}},[i("multi-select-module",{attrs:{"station-id":t.formConfig.stationIds},on:{handleModuleSelected:function(e){return t.handleModuleSelected(e)}}})],1)],1),t._v(" "),i("b-col",[i("b-form-group",{attrs:{id:"input-group-10",label:"Chọn giỏ tương ứng với modul: ","label-for":"input-9"}},[i("multi-select-cart",{attrs:{"module-ids":t.formConfig.moduleId},on:{handleCartSelected:function(e){return t.handleCartSelected(e)}}})],1)],1)],1):t._e(),t._v(" "),i("br"),t._v(" "),i("b-row",[i("b-col",[i("b-form-group",{attrs:{id:"input-group-7",label:"Gói tiền công: ","label-for":"input-7"}},[i("b-form-select",{attrs:{id:"input-7",required:"",options:t.listRemunerationPackages1},model:{value:t.formConfig.remunerationPackage,callback:function(e){t.$set(t.formConfig,"remunerationPackage",e)},expression:"formConfig.remunerationPackage"}})],1)],1),t._v(" "),i("b-col",[i("b-form-group",{attrs:{id:"input-group-8",label:"Gói bổ sung`: ","label-for":"input-8"}},[i("b-form-select",{attrs:{id:"input-8",required:"",options:t.listAdditionalPackage1},model:{value:t.formConfig.additionalPackage,callback:function(e){t.$set(t.formConfig,"additionalPackage",e)},expression:"formConfig.additionalPackage"}})],1)],1)],1),t._v(" "),i("b-button",{staticClass:"mt-3",attrs:{variant:"primary",block:""},on:{click:t.createConfigCampaign}},[t._v("Thêm")])],1)},[],!1,null,null,null);e.a=d.exports},TKVu:function(t,e,i){"use strict";var n=i("RUzx"),o=i.n(n),a=i("wX3c"),l={name:"multi-select-module",components:{Multiselect:o.a},props:{stationId:{},autoClose:{},hideSelected:{},limitProp:{default:5},isDisabled:{default:!1},moduleId:{}},data:function(){return{moduleIds:null,autoClosed:!0,hideSelect:!1,option:[],options:[]}},created:function(){void 0!==this.autoClose&&null!==this.autoClose&&(this.autoClosed=this.autoClose),void 0!==this.hideSelected&&null!==this.hideSelected&&(this.hideSelect=this.hideSelected),this.getList()},watch:{hideSelected:function(t,e){this.hideSelect=this.hideSelected},autoClose:function(t,e){this.autoClosed=this.autoClose},option:function(t){var e=this.setList(t);this.$emit("handleModuleSelected",e)},stationId:function(t){this.getList()}},methods:{setList:function(t){var e=this;if(t)return this.moduleIds=[],t.forEach(function(t){t&&e.moduleIds.push(t.id)}),this.moduleIds.toString()},getList:function(){var t=this,e={id:this.stationId};a.a.getAllModuleByStationId(e).then(function(e){e.data.success&&(t.options=e.data.data,t.moduleId&&(t.option=[],t.moduleId.split(",").forEach(function(e){var i=t.options.find(function(t){return t.id===e});i&&t.option.push(i)})))}).catch(function(t){console.log(t)})}}},s=i("XyMi");var c=function(t){i("lz83")},r=Object(s.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("multiselect",{staticClass:"multiselect-primary",attrs:{options:t.options,multiple:!0,placeholder:"Chọn module",label:"name","track-by":"name",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",disabled:t.isDisabled,limit:t.limitProp,"hide-selected":t.hideSelect,"close-on-select":t.autoClosed},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[i("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")])])],1)},[],!1,c,"data-v-2464f8bd",null);e.a=r.exports},iI7v:function(t,e){},lz83:function(t,e){},rNeS:function(t,e,i){"use strict";var n=i("RUzx"),o=i.n(n),a=i("wX3c"),l={name:"multi-select-station",components:{Multiselect:o.a},props:{moduleIds:{},cartId:{},stationIds:{},autoClose:{},hideSelected:{},limitProp:{default:5},isDisabled:{default:!1}},data:function(){return{cartIds:null,autoClosed:!0,hideSelect:!1,option:[],options:[]}},created:function(){void 0!==this.autoClose&&null!==this.autoClose&&(this.autoClosed=this.autoClose),void 0!==this.hideSelected&&null!==this.hideSelected&&(this.hideSelect=this.hideSelected),this.getList()},watch:{hideSelected:function(t,e){this.hideSelect=this.hideSelected},autoClose:function(t,e){this.autoClosed=this.autoClose},option:function(t){var e=this.setList(t);this.$emit("handleCartSelected",e)},moduleIds:function(t,e){this.getList()}},methods:{setList:function(t){var e=this;return this.cartIds=[],t.forEach(function(t){t&&e.cartIds.push(t.id)}),this.cartIds.toString()},getList:function(){var t=this,e={id:this.moduleIds};a.a.getAllCartByModuleIds(e).then(function(e){e.data.success?(t.options=e.data.data,t.cartId&&(t.option=[],t.cartId.split(",").forEach(function(e){var i=t.options.find(function(t){return t.id===e});i&&t.option.push(i)}))):(t.options=[],t.option=[])}).catch(function(t){console.log(t)})}}},s=i("XyMi");var c=function(t){i("iI7v")},r=Object(s.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("multiselect",{staticClass:"multiselect-primary",attrs:{options:t.options,multiple:!0,placeholder:"Chọn giỏ",label:"name","track-by":"name",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",disabled:t.isDisabled,limit:t.limitProp,"hide-selected":t.hideSelect,"close-on-select":t.autoClosed},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[i("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")])])],1)},[],!1,c,"data-v-62b542e4",null);e.a=r.exports}});