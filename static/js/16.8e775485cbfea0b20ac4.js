webpackJsonp([16],{"1alW":function(t,a,e){var n=e("kM2E");n(n.S,"Number",{isInteger:e("AKgy")})},"7etK":function(t,a,e){var n;n=function(){return function(t){function a(n){if(e[n])return e[n].exports;var s=e[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,a),s.loaded=!0,s.exports}var e={};return a.m=t,a.c=e,a.p="",a(0)}([function(t,a,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var s=e(1);Object.defineProperty(a,"createAutoCorrectedDatePipe",{enumerable:!0,get:function(){return n(s).default}});var r=e(2);Object.defineProperty(a,"createNumberMask",{enumerable:!0,get:function(){return n(r).default}});var i=e(3);Object.defineProperty(a,"emailMask",{enumerable:!0,get:function(){return n(i).default}})},function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mm dd yyyy";return function(a){var e=[],n=t.split(/[^dmyHMS]+/),s={dd:31,mm:12,yy:99,yyyy:9999,HH:23,MM:59,SS:59},r={dd:1,mm:1,yy:0,yyyy:1,HH:0,MM:0,SS:0},i=a.split("");return n.forEach(function(a){var n=t.indexOf(a),r=parseInt(s[a].toString().substr(0,1),10);parseInt(i[n],10)>r&&(i[n+1]=i[n],i[n]=0,e.push(n))}),!n.some(function(e){var n=t.indexOf(e),i=e.length,o=a.substr(n,i).replace(/\D/g,""),l=parseInt(o,10);return l>s[e]||o.length===i&&l<r[e]})&&{value:i.join(""),indexesOfPipedChars:e}}}},function(t,a){"use strict";function e(t){return t.split(r).map(function(t){return d.test(t)?d:t})}Object.defineProperty(a,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};a.default=function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,a=t.length;if(t===r||t[0]===h[0]&&1===a)return h.split(r).concat([d]).concat(f.split(r));if(t===D&&w)return h.split(r).concat(["0",D,d]).concat(f.split(r));var s=t[0]===l&&N;s&&(t=t.toString().substr(1));var i=t.lastIndexOf(D),o=-1!==i,v=void 0,y=void 0,_=void 0;if(t.slice(-1*A)===f&&(t=t.slice(0,-1*A)),o&&(w||S)?(v=t.slice(t.slice(0,F)===h?F:0,i),y=e((y=t.slice(i+1,a)).replace(u,r))):v=t.slice(0,F)===h?t.slice(F):t,E&&(void 0===E?"undefined":n(E))===p){var g="."===C?"[.]":""+C,x=(v.match(new RegExp(g,"g"))||[]).length;v=v.slice(0,E+x*$)}return v=v.replace(u,r),M||(v=v.replace(/^0+(0$|[^0])/,"$1")),_=e(v=b?function(t,a){return t.replace(/\B(?=(\d{3})+(?!\d))/g,a)}(v,C):v),(o&&w||!0===S)&&(t[i-1]!==D&&_.push(m),_.push(D,m),y&&((void 0===P?"undefined":n(P))===p&&(y=y.slice(0,P)),_=_.concat(y)),!0===S&&t[i-1]===D&&_.push(d)),F>0&&(_=h.split(r).concat(_)),s&&(_.length===F&&_.push(d),_=[c].concat(_)),f.length>0&&(_=_.concat(f.split(r))),_}var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=a.prefix,h=void 0===v?s:v,y=a.suffix,f=void 0===y?r:y,_=a.includeThousandsSeparator,b=void 0===_||_,g=a.thousandsSeparatorSymbol,C=void 0===g?i:g,x=a.allowDecimal,w=void 0!==x&&x,k=a.decimalSymbol,D=void 0===k?o:k,T=a.decimalLimit,P=void 0===T?2:T,I=a.requireDecimal,S=void 0!==I&&I,O=a.allowNegative,N=void 0!==O&&O,j=a.allowLeadingZeroes,M=void 0!==j&&j,B=a.integerLimit,E=void 0===B?null:B,F=h&&h.length||0,A=f&&f.length||0,$=C&&C.length||0;return t.instanceOf="createNumberMask",t};var s="$",r="",i=",",o=".",l="-",c=/-/,u=/\D+/g,p="number",d=/\d/,m="[]"},function(t,a,e){"use strict";function n(t,a,e){var n=[];return t[a]===e?n.push(e):n.push(d,e),n.push(d),n}function s(t,a,e,n){var s=u;return-1!==a&&(s=-1===e?t.slice(a+1,t.length):t.slice(a+1,e)),(s=s.replace(new RegExp("[\\s"+n+"]",v),u))===p?l:s.length<1?m:s[s.length-1]===c?s.slice(0,s.length-1):s}function r(t,a,e,n){var s=u;return-1!==a&&(s=t.slice(a+1,t.length)),0===(s=s.replace(new RegExp("[\\s"+e+".]",v),u)).length?t[a-1]===c&&n!==t.length?l:u:s}function i(t,a){return t.split(u).map(function(t){return t===m?t:a?y:h})}Object.defineProperty(a,"__esModule",{value:!0});var o=function(t){return t&&t.__esModule?t:{default:t}}(e(4)),l="*",c=".",u="",p="@",d="[]",m=" ",v="g",h=/[^\s]/,y=/[^.\s]/,f=/\s/g;a.default={mask:function(t,a){t=t.replace(f,u);var e=a.placeholderChar,o=a.currentCaretPosition,l=t.indexOf(p),d=t.lastIndexOf(c),m=d<l?-1:d,v=n(t,l+1,p),h=n(t,m-1,c),y=function(t,a){return-1===a?t:t.slice(0,a)}(t,l),_=s(t,l,m,e),b=r(t,m,e,o);return y=i(y),_=i(_),b=i(b,!0),y.concat(v).concat(_).concat(h).concat(b)},pipe:o.default}},function(t,a){"use strict";function e(t){var a=0;return t.replace(s,function(){return 1===++a?n:r})}Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(t,a){var s=a.currentCaretPosition,p=a.rawValue,d=a.previousConformedValue,m=a.placeholderChar,v=t,h=(v=e(v)).indexOf(i);if(null===p.match(new RegExp("[^@\\s."+m+"]")))return r;if(-1!==v.indexOf(l)||-1!==h&&s!==h+1||-1===p.indexOf(n)&&d!==r&&-1!==p.indexOf(o))return!1;var y=v.indexOf(n);return(v.slice(y+1,v.length).match(u)||c).length>1&&v.substr(-1)===o&&s!==p.length&&(v=v.slice(0,v.length-1)),v};var n="@",s=/@/g,r="",i="@.",o=".",l="..",c=[],u=/\./g}])},t.exports=n()},"8flC":function(t,a,e){"use strict";var n=e("woOf"),s=e.n(n),r=e("Zx67"),i=e.n(r),o=e("Zrlr"),l=e.n(o),c=e("zwoO"),u=e.n(c),p=e("Pf15"),d=e.n(p),m=function(t){function a(){return l()(this,a),u()(this,(a.__proto__||i()(a)).apply(this,arguments))}return d()(a,t),a}(e("MUME").a),v=e("hC/b");a.a=function(t){var a=t;a.other_allowances&&v.a.isJsonString(a.other_allowances)?a.other_allowances=JSON.parse(a.other_allowances):a.other_allowances=[{amount:"",description:""}],a.deductions&&v.a.isJsonString(a.deductions)?a.deductions=JSON.parse(a.deductions):a.deductions=[{type:"",amount:"",description:""}],a.adjustments&&v.a.isJsonString(a.adjustments)?a.adjustments=JSON.parse(a.adjustments):a.adjustments=[{type:"",amount:"",description:""}];var e=s()({},a);return new m(e)}},AKgy:function(t,a,e){var n=e("EqjI"),s=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&s(t)===t}},"RRo+":function(t,a,e){t.exports={default:e("c45H"),__esModule:!0}},Ren4:function(t,a,e){"use strict";var n=e("PikB"),s=e("4WGu");a.a={getList:function(t){return n.a.get("/AdPayslip/getList",{params:t})},getDetail:function(t){return n.a.get("/AdPayslip/getDetail",{params:t})},update:function(t){return n.a.post("/AdPayslip/update",t)},delete:function(t){var a={id:t};return n.a.post("/AdPayslip/delete",a)},deleteByConditions:function(t){return n.a.post("/AdPayslip/deleteByConditions",t)},requestExportFile:function(t){return n.a.get("/AdPayslip/exportExcel",{params:t})},checkExportFileComplete:function(t){return n.a.get("/AdPayslip/checkExportFileComplete",{params:t})},getDownloadExcelLink:function(t){return s.a.baseApiUrl+"AdPayslip/downloadExportFile?file="+t},checkBeforeCreatePayslip:function(t){return n.a.get("/AdPayslip/countUserByFilter",{params:t})},createPayslipByFilter:function(t){return n.a.get("/AdPayslip/createPayslipByFilter",{params:t})},uploadExcelPayslip:function(){return n.a.get("/AdPayslip/uploadExcelPayslip")},getListSalaryFormulaCod:function(){return n.a.get("/AdPayslip/getListSalaryFormulaOfCod")},changeStatusPayslip:function(t,a){var e={id:t,status:a};return n.a.post("/AdPayslip/changeStatusPayslip",e)}}},c45H:function(t,a,e){e("1alW"),t.exports=e("FeBl").Number.isInteger},gUk1:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("mvHQ"),s=e.n(n),r=e("RRo+"),i=e.n(r),o=e("hC/b"),l=e("Ren4"),c=e("8flC"),u=e("yekR"),p=e.n(u),d=e("7etK"),m=e("oVsO"),v={name:"ecom-payslip-detail",components:{MaskedInput:p.a,EcomPayslipDetailInfo:m.a},data:function(){return{numberMask:d.createNumberMask({prefix:""}),statusOptions:[{text:"Đã duyệt",value:"approved"},{text:"Đang chờ duyệt",value:"pending"}],listDeductions:[{value:"",text:"Chọn loại"},{value:"vi_pham",text:"Vi phạm"},{value:"boi_hoan",text:"Bồi hoàn"},{value:"ky_quy",text:"Ký quỹ"},{value:"tam_ung",text:"Tạm ứng"},{value:"khac",text:"Khác"}],listAdjustments:[{value:"",text:"Chọn loại"},{value:"luong",text:"Lương"},{value:"thue",text:"Thuế"},{value:"bao_hiem",text:"Bảo hiểm"},{value:"doan_phi",text:"Đoàn phí"},{value:"khac",text:"Khác"}],payslipData:{other_allowances:[],deductions:[],adjustments:[]},profile:{},workType:{},contract:{},contractSalary:{},insuranceId:2,hasDataLoaded:!1}},computed:{hasInsurance:function(){return[1,6].includes(parseInt(this.insuranceId))?1:0},totalInsuranceByEmployee:function(){return parseFloat(this.payslipData.bhxh_employee)+parseFloat(this.payslipData.bhyt_employee)+parseFloat(this.payslipData.bhtn_employee)},totalInsuranceByCompany:function(){return parseFloat(this.payslipData.bhxh_company)+parseFloat(this.payslipData.bhyt_company)+parseFloat(this.payslipData.bhtn_company)},otSalary:function(){return 0===parseFloat(this.payslipData.total_workday)||this.checkHasKPI()?0:parseFloat(this.payslipData.ot_trial_workday)/parseFloat(this.payslipData.total_workday)*parseFloat(this.contractSalary.trial_ot_salary)+parseFloat(this.payslipData.ot_workday)/parseFloat(this.payslipData.total_workday)*parseFloat(this.contractSalary.ot_salary)},totalIncome:function(){var t=this.payslipData.other_allowances.reduce(function(t,a){return t+(i()(parseFloat(a.amount))?parseFloat(a.amount):0)},0),a=isNaN(parseFloat(this.payslipData.bonus_good_employee))?0:parseFloat(this.payslipData.bonus_good_employee),e=isNaN(parseFloat(this.payslipData.bonus_holiday))?0:parseFloat(this.payslipData.bonus_holiday);return parseFloat(this.payslipData.basic_salary_by_workday)+parseFloat(this.payslipData.allowance_by_workday)+parseFloat(this.payslipData.kpi_salary)+parseFloat(a)+parseFloat(e)+parseFloat(this.otSalary)+t},incomeBeTax:function(){return 0===parseFloat(this.payslipData.total_workday)?this.totalIncome:this.totalIncome-this.sumTotalAllowanceHasNotTax()*(parseFloat(this.payslipData.trial_workday)+parseFloat(this.payslipData.workday))/parseFloat(this.payslipData.total_workday)},lastIncomeBeTax:function(){if("cod"===this.workType.group_type&&0===this.hasInsurance||"cod"!==this.workType.group_type&&"part_time"===this.workType.work_type)return this.incomeBeTax;if(3===this.insuranceId)return this.incomeBeTax-this.hasInsurance*this.totalInsuranceByEmployee;var t=this.profile.no_of_dependants?parseFloat(this.profile.no_of_dependants):0;return this.incomeBeTax-9e6-36e5*t-this.hasInsurance*this.totalInsuranceByEmployee},personalIncomeTax:function(){var t=this.workType.work_type;return"part_time"===t||"cod"===this.workType.group_type&&"full_time"===t&&0===this.hasInsurance?this.lastIncomeBeTax>=2e6?.1*this.lastIncomeBeTax:0:this.lastIncomeBeTax>8e7?.35*this.lastIncomeBeTax-985e4:this.lastIncomeBeTax>52e6?.3*this.lastIncomeBeTax-585e4:this.lastIncomeBeTax>32e6?.25*this.lastIncomeBeTax-325e4:this.lastIncomeBeTax>18e6?.2*this.lastIncomeBeTax-165e4:this.lastIncomeBeTax>1e7?.15*this.lastIncomeBeTax-75e4:this.lastIncomeBeTax>5e6?.1*this.lastIncomeBeTax-25e4:this.lastIncomeBeTax>0?.05*this.lastIncomeBeTax:0},incomeAfterTax:function(){return this.totalIncome-this.hasInsurance*this.totalInsuranceByEmployee-this.personalIncomeTax-this.hasInsurance*parseFloat(this.payslipData.union_dues_employee)},netSalary:function(){var t=this.payslipData.deductions.reduce(function(t,a){return t+(i()(parseFloat(a.amount))?parseFloat(a.amount):0)},0),a=this.payslipData.adjustments.reduce(function(t,a){return t+(i()(parseFloat(a.amount))?parseFloat(a.amount):0)},0);return this.incomeAfterTax-t+a}},beforeCreate:function(){var t=this;this.$startLoading();var a={id:this.$route.params.id};l.a.getDetail(a).then(function(a){a.data.success&&(t.payslipData=Object(c.a)(a.data.payslip),t.profile=a.data.profile,t.workType=a.data.work_type,t.contract=a.data.contract,t.contractSalary=a.data.contract_salary,t.insuranceId=a.data.insurance_id,t.checkHasKPI()||(t.payslipData.kpi_salary=0)),o.a.isEmpty(t.profile)?t.$router.push({name:"error-404"}):t.hasDataLoaded=!0}).catch(function(t){console.log(t)}).then(function(){t.$stopLoading()})},methods:{checkHasKPI:function(){return"1"===this.contract.has_kpi||"cod"===this.workType.group_type},addOtherAllowance:function(){o.a.isEmpty(this.payslipData.other_allowances)&&(this.payslipData.other_allowances=[]),this.payslipData.other_allowances.push({amount:"",description:""})},addDeduction:function(){o.a.isEmpty(this.payslipData.deductions)&&(this.payslipData.deductions=[]),this.payslipData.deductions.push({type:"",amount:"",description:""})},addAdjustment:function(){o.a.isEmpty(this.payslipData.adjustments)&&(this.payslipData.adjustments=[]),this.payslipData.adjustments.push({type:"",amount:"",description:""})},removeOtherAllowance:function(t){this.payslipData.other_allowances.splice(t,1)},removeDeduction:function(t){this.payslipData.deductions.splice(t,1)},removeAdjustment:function(t){this.payslipData.adjustments.splice(t,1)},sumTotalAllowanceHasNotTax:function(){var t=this,a=0;return["resp_allowance","trans_allowance","meal_allowance","mobile_allowance","biztrip_allowance"].forEach(function(e){t.contractSalary[e]&&"0"===t.contractSalary[e].has_tax&&(a+=parseFloat(t.contractSalary[e].value))}),a},saveData:function(){var t=this;this.$startLoading();var a={id:this.$route.params.id,status:this.payslipData.status,bonus_good_employee:this.payslipData.bonus_good_employee,bonus_holiday:this.payslipData.bonus_holiday,other_allowances:s()(this.payslipData.other_allowances),deductions:s()(this.payslipData.deductions),adjustments:s()(this.payslipData.adjustments)};l.a.update(a).then(function(a){a.data.success?t.$notify({group:"default",type:"bg-success text-white",title:"Thông báo",text:"Update thành công!"}):t.$notify({group:"default",type:"bg-warning text-dark",title:"Thông báo",text:"Có lỗi xảy ra trong quá trình update"})}).catch(function(a){console.log(a),t.$notify({group:"default",type:"bg-warning text-dark",title:"Thông báo",text:"Có lỗi xảy ra trong quá trình update"})}).then(function(){t.$stopLoading()})},clickCancel:function(){this.$router.push({name:"payslip-manager"})}}},h=e("XyMi");var y=function(t){e("mpYx")},f=Object(h.a)(v,function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.hasDataLoaded?e("div",{staticClass:"payslip-page"},[e("h4",{staticClass:"d-flex justify-content-between align-items-center w-100 font-weight-bold py-3 mb-4"},[e("div",[t._v("Chi tiết bảng lương: "+t._s(t.profile.fullname)+" - Tháng "+t._s(t.payslipData.month)+"/"+t._s(t.payslipData.year))]),t._v(" "),e("b-btn",{staticClass:"d-block",attrs:{variant:"primary btn-round"},on:{click:function(a){return t.saveData()}}},[e("span",{staticClass:"ion ion-md-save"}),t._v(" Save changes")])],1),t._v(" "),e("div",{staticClass:"row"},[t._m(0),t._v(" "),e("div",{staticClass:"col-md-11"},[e("b-radio-group",{attrs:{options:t.statusOptions},model:{value:t.payslipData.status,callback:function(a){t.$set(t.payslipData,"status",a)},expression:"payslipData.status"}})],1)]),t._v(" "),e("ecom-payslip-detail-info",{attrs:{profile:t.profile,"work-type":t.workType,payslip:t.payslipData,contract:t.contract,"contract-salary":t.contractSalary}}),t._v(" "),e("b-card",{staticClass:"mb-4",attrs:{header:"Ngày công","header-tag":"h5"}},[e("b-form-row",[e("div",{staticClass:"col-md-6"},[e("b-form-row",[e("b-form-group",{staticClass:"col-md-3",attrs:{label:"Công chuẩn"}},[e("b-input",{attrs:{type:"number",readonly:""},model:{value:t.payslipData.total_workday,callback:function(a){t.$set(t.payslipData,"total_workday",a)},expression:"payslipData.total_workday"}})],1),t._v(" "),e("b-form-group",{staticClass:"col-md-3",attrs:{label:"Công thử việc"}},[e("b-input",{attrs:{type:"number",readonly:""},model:{value:t.payslipData.trial_workday,callback:function(a){t.$set(t.payslipData,"trial_workday",a)},expression:"payslipData.trial_workday"}})],1),t._v(" "),e("b-form-group",{staticClass:"col-md-3",attrs:{label:"Công chính thức"}},[e("b-input",{attrs:{type:"number",readonly:""},model:{value:t.payslipData.workday,callback:function(a){t.$set(t.payslipData,"workday",a)},expression:"payslipData.workday"}})],1),t._v(" "),e("b-form-group",{staticClass:"col-md-3",attrs:{label:"Số ngày nghỉ phép"}},[e("b-input",{attrs:{type:"number",readonly:""},model:{value:t.payslipData.leave_number,callback:function(a){t.$set(t.payslipData,"leave_number",a)},expression:"payslipData.leave_number"}})],1)],1)],1),t._v(" "),e("div",{staticClass:"col-md-6"},[e("b-form-row",[e("b-form-group",{staticClass:"col-md-3",attrs:{label:"Nghỉ lễ thử việc"}},[e("b-input",{attrs:{type:"number",readonly:""},model:{value:t.payslipData.trial_leave_holiday,callback:function(a){t.$set(t.payslipData,"trial_leave_holiday",a)},expression:"payslipData.trial_leave_holiday"}})],1),t._v(" "),e("b-form-group",{staticClass:"col-md-3",attrs:{label:"Nghỉ lễ chính thức"}},[e("b-input",{attrs:{type:"number",readonly:""},model:{value:t.payslipData.leave_holiday,callback:function(a){t.$set(t.payslipData,"leave_holiday",a)},expression:"payslipData.leave_holiday"}})],1),t._v(" "),e("b-form-group",{staticClass:"col-md-3",attrs:{label:"Công trực thử việc"}},[e("b-input",{attrs:{type:"number",readonly:""},model:{value:t.payslipData.ot_trial_workday,callback:function(a){t.$set(t.payslipData,"ot_trial_workday",a)},expression:"payslipData.ot_trial_workday"}})],1),t._v(" "),e("b-form-group",{staticClass:"col-md-3",attrs:{label:"Công trực chính thức"}},[e("b-input",{attrs:{type:"number",readonly:""},model:{value:t.payslipData.ot_workday,callback:function(a){t.$set(t.payslipData,"ot_workday",a)},expression:"payslipData.ot_workday"}})],1)],1)],1)])],1),t._v(" "),e("b-card",{staticClass:"mb-4",attrs:{header:"Dữ liệu lương","header-tag":"h5"}},[e("b-form-row",[e("b-form-group",{staticClass:"col-md-4",attrs:{label:"Lương cơ bản theo ngày công"}},[e("b-input",{attrs:{type:"number",readonly:""},model:{value:t.payslipData.basic_salary_by_workday,callback:function(a){t.$set(t.payslipData,"basic_salary_by_workday",a)},expression:"payslipData.basic_salary_by_workday"}})],1),t._v(" "),e("b-form-group",{staticClass:"col-md-4",attrs:{label:"Phụ cấp theo ngày công"}},[e("b-input",{attrs:{type:"number",readonly:""},model:{value:t.payslipData.allowance_by_workday,callback:function(a){t.$set(t.payslipData,"allowance_by_workday",a)},expression:"payslipData.allowance_by_workday"}})],1),t._v(" "),e("b-form-group",{staticClass:"col-md-4",attrs:{label:"Lương NS/KPI"}},[e("b-input",{attrs:{type:"number",readonly:""},model:{value:t.payslipData.kpi_salary,callback:function(a){t.$set(t.payslipData,"kpi_salary",a)},expression:"payslipData.kpi_salary"}})],1)],1),t._v(" "),e("b-form-row",[e("b-form-group",{staticClass:"col-md-4",attrs:{label:"Thưởng NVXS"}},[e("b-input",{attrs:{type:"number"},model:{value:t.payslipData.bonus_good_employee,callback:function(a){t.$set(t.payslipData,"bonus_good_employee",a)},expression:"payslipData.bonus_good_employee"}})],1),t._v(" "),e("b-form-group",{staticClass:"col-md-4",attrs:{label:"Thưởng lễ"}},[e("b-input",{attrs:{type:"number"},model:{value:t.payslipData.bonus_holiday,callback:function(a){t.$set(t.payslipData,"bonus_holiday",a)},expression:"payslipData.bonus_holiday"}})],1),t._v(" "),e("b-form-group",{staticClass:"col-md-4",attrs:{label:"Lương ngoài giờ"}},[e("b-input",{attrs:{type:"number",value:t.otSalary,readonly:""}})],1)],1),t._v(" "),e("h5",[t._v("Các khoản trợ cấp khác")]),t._v(" "),e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table is_align_middle"},[e("tbody",t._l(t.payslipData.other_allowances,function(a,n){return e("tr",[e("td",[e("b-input",{attrs:{type:"number",placeholder:"Số tiền"},model:{value:a.amount,callback:function(e){t.$set(a,"amount",e)},expression:"allowance.amount"}})],1),t._v(" "),e("td",[e("b-input",{attrs:{type:"text",placeholder:"Diễn giải"},model:{value:a.description,callback:function(e){t.$set(a,"description",e)},expression:"allowance.description"}})],1),t._v(" "),e("td",[e("b-btn",{attrs:{variant:"default md-btn-flat icon-btn",size:"sm"},on:{click:function(a){return t.removeOtherAllowance(n)}}},[e("i",{staticClass:"ion ion-md-close"})])],1)])}),0)])]),t._v(" "),e("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-primary"},on:{click:function(a){return t.addOtherAllowance()}}},[e("i",{staticClass:"ion ion-md-add"}),t._v("  Thêm trợ cấp\n    ")]),t._v(" "),e("h5",[t._v("Thu nhập")]),t._v(" "),e("p",{staticClass:"income-box"},[t._v("\n      Tổng thu nhập: "),e("b",[e("span",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(t.totalIncome)}})]),t._v(" "),e("br"),t._v("\n      Thu nhập chịu thuế: "),e("b",[e("span",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(t.incomeBeTax)}})]),t._v(" "),e("br"),t._v("\n      Thu nhập tính thuế: "),e("b",[e("span",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(t.lastIncomeBeTax)}})]),t._v(" "),e("br"),t._v("\n      Thuế TNCN: "),e("b",[e("span",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(t.personalIncomeTax)}})]),t._v(" "),e("br"),t._v("\n      Thu nhập sau nghĩa vụ NN: "),e("b",[e("span",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(t.incomeAfterTax)}})])])],1),t._v(" "),e("b-card",{staticClass:"mb-4",attrs:{header:"Các khoản trừ","header-tag":"h5"}},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table is_align_middle"},[e("tbody",t._l(t.payslipData.deductions,function(a,n){return e("tr",[e("td",[e("b-select",{attrs:{options:t.listDeductions},model:{value:a.type,callback:function(e){t.$set(a,"type",e)},expression:"deduction.type"}})],1),t._v(" "),e("td",[e("b-input",{attrs:{type:"number",placeholder:"Số tiền"},model:{value:a.amount,callback:function(e){t.$set(a,"amount",e)},expression:"deduction.amount"}})],1),t._v(" "),e("td",[e("b-input",{attrs:{type:"text",placeholder:"Diễn giải"},model:{value:a.description,callback:function(e){t.$set(a,"description",e)},expression:"deduction.description"}})],1),t._v(" "),e("td",[e("b-btn",{attrs:{variant:"default md-btn-flat icon-btn",size:"sm"},on:{click:function(a){return t.removeDeduction(n)}}},[e("i",{staticClass:"ion ion-md-close"})])],1)])}),0)])]),t._v(" "),e("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-primary"},on:{click:function(a){return t.addDeduction()}}},[e("i",{staticClass:"ion ion-md-add"}),t._v("  Thêm khoản trừ\n    ")])],1),t._v(" "),e("b-card",{staticClass:"mb-4",attrs:{header:"Truy thu/hoàn","header-tag":"h5"}},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table is_align_middle"},[e("tbody",t._l(t.payslipData.adjustments,function(a,n){return e("tr",[e("td",[e("b-select",{attrs:{options:t.listAdjustments},model:{value:a.type,callback:function(e){t.$set(a,"type",e)},expression:"adjustment.type"}})],1),t._v(" "),e("td",[e("b-input",{attrs:{type:"text",placeholder:"Số tiền"},model:{value:a.amount,callback:function(e){t.$set(a,"amount",e)},expression:"adjustment.amount"}})],1),t._v(" "),e("td",[e("b-input",{attrs:{type:"text",placeholder:"Diễn giải"},model:{value:a.description,callback:function(e){t.$set(a,"description",e)},expression:"adjustment.description"}})],1),t._v(" "),e("td",[e("b-btn",{attrs:{variant:"default md-btn-flat icon-btn",size:"sm"},on:{click:function(a){return t.removeAdjustment(n)}}},[e("i",{staticClass:"ion ion-md-close"})])],1)])}),0)])]),t._v(" "),e("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-primary"},on:{click:function(a){return t.addAdjustment()}}},[e("i",{staticClass:"ion ion-md-add"}),t._v("  Thêm truy thu/hoàn\n    ")]),t._v(" "),e("div",{staticClass:"total-net-salary"},[t._v("Tổng thu nhập NET: "),e("b",[e("span",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(t.netSalary)}})])])],1),t._v(" "),e("div",{staticClass:"text-right mt-3"},[e("b-btn",{attrs:{variant:"primary"},on:{click:function(a){return t.saveData()}}},[t._v("Save changes")]),t._v(" \n    "),e("b-btn",{attrs:{variant:"default"},on:{click:function(a){return t.clickCancel()}}},[t._v("Cancel")])],1)],1):t._e()},[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"col-md-1"},[a("h5",[this._v("Trạng thái")])])}],!1,y,"data-v-5b913239",null);a.default=f.exports},mpYx:function(t,a){},oVsO:function(t,a,e){"use strict";var n=e("fZjL"),s=e.n(n),r={name:"ecom-payslip-detail-info",props:{profile:{type:Object,required:!0},workType:{type:Object,required:!0},contract:{type:Object,required:!0},contractSalary:{type:Object,required:!0},payslip:{type:Object,required:!0}},data:function(){return{taxAllowances:[],noTaxAllowances:[]}},computed:{totalInsuranceByEmployee:function(){return parseInt(this.payslip.bhxh_employee)+parseInt(this.payslip.bhyt_employee)+parseInt(this.payslip.bhtn_employee)},totalInsuranceByCompany:function(){return parseInt(this.payslip.bhxh_company)+parseInt(this.payslip.bhyt_company)+parseInt(this.payslip.bhtn_company)}},created:function(){var t=this,a={resp_allowance:"Phụ cấp trách nhiệm",trans_allowance:"Xăng xe, ăn đêm",meal_allowance:"Cơm trưa",mobile_allowance:"Điện thoại",biztrip_allowance:"Khoản công tác"};s()(a).forEach(function(e){if(t.contractSalary[e]){var n=t.contractSalary[e];n.name=a[e],"1"===n.has_tax?t.taxAllowances.push(n):t.noTaxAllowances.push(n)}})}},i=e("XyMi"),o=Object(i.a)(r,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"ui-block"},[e("div",{staticClass:"row d-flex top-detail"},[e("div",{staticClass:"col-sm-6 col-xl-3"},[e("b-card",{staticClass:"mb-4",attrs:{"no-body":""}},[e("b-card-header",{attrs:{"header-tag":"h5"}},[t._v("Thông tin cá nhân")]),t._v(" "),e("b-card-body",[e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-4 text-muted"},[t._v("Họ và tên:")]),t._v(" "),e("div",{staticClass:"col-md-8",domProps:{textContent:t._s(t.profile.fullname)}})]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-4 text-muted"},[t._v("username:")]),t._v(" "),e("div",{staticClass:"col-md-8",domProps:{textContent:t._s(t.profile.username)}})]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-4 text-muted"},[t._v("Bộ phân:")]),t._v(" "),e("div",{staticClass:"col-md-8",domProps:{textContent:t._s(t.profile.department)}})]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-4 text-muted"},[t._v("Vị trí:")]),t._v(" "),e("div",{staticClass:"col-md-8",domProps:{textContent:t._s(t.profile.position_name)}})]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-4 text-muted"},[t._v("Kiểu nhân viên:")]),t._v(" "),e("div",{staticClass:"col-md-8",domProps:{textContent:t._s(t.workType.work_type_description)}})]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-4 text-muted"},[t._v("Kho:")]),t._v(" "),e("div",{staticClass:"col-md-8",domProps:{textContent:t._s(t.profile.station_name)}})])])],1)],1),t._v(" "),e("div",{staticClass:"col-sm-6 col-xl-3"},[e("b-card",{staticClass:"mb-4",attrs:{"no-body":""}},[e("b-card-header",{attrs:{"header-tag":"h5"}},[t._v("Lương hợp đồng")]),t._v(" "),e("b-card-body",[e("h6",[t._v("Lương cơ bản")]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-4 text-muted"},[t._v("Thử việc:")]),t._v(" "),e("div",{directives:[{name:"numeral",rawName:"v-numeral"}],staticClass:"col-md-8",domProps:{textContent:t._s(t.contractSalary.trial_salary)}})]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-4 text-muted"},[t._v("Chính thức:")]),t._v(" "),e("div",{directives:[{name:"numeral",rawName:"v-numeral"}],staticClass:"col-md-8",domProps:{textContent:t._s(t.contractSalary.salary)}})]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-12"},[e("span",{staticClass:"text-muted"},[t._v("Mức lương tính ngoài giờ thử việc: ")]),e("span",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(t.contractSalary.trial_ot_salary)}})])]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-12"},[e("span",{staticClass:"text-muted"},[t._v("Mức lương tính ngoài giờ chính thức: ")]),e("span",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(t.contractSalary.ot_salary)}})])]),t._v(" "),e("h6",[t._v("Phụ cấp chịu thuế TNCN")]),t._v(" "),t._l(t.taxAllowances,function(a){return e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-12"},[e("span",{staticClass:"text-muted"},[t._v(t._s(a.name)+": ")]),e("span",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(a.value)}},[t._v("0")])])])}),t._v(" "),e("h6",[t._v("Phụ cấp không chịu thuế TNCN")]),t._v(" "),t._l(t.noTaxAllowances,function(a){return e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-12"},[e("span",{staticClass:"text-muted"},[t._v(t._s(a.name)+": ")]),e("span",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(a.value)}},[t._v("0")])])])})],2)],1)],1),t._v(" "),e("div",{staticClass:"col-sm-6 col-xl-3"},[e("b-card",{staticClass:"mb-4",attrs:{"no-body":""}},[e("b-card-header",{attrs:{"header-tag":"h5"}},[t._v("Thông tin BHXH")]),t._v(" "),e("b-card-body",[e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-12"},[e("span",{staticClass:"text-muted"},[t._v("Lương tính BHXH: ")]),e("span",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(t.payslip.bhxh_salary)}})])]),t._v(" "),e("h6",[t._v("Các khoản người lao động đóng")]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-4 text-muted"},[t._v("BHXH:")]),e("div",{directives:[{name:"numeral",rawName:"v-numeral"}],staticClass:"col-md-8",domProps:{textContent:t._s(t.payslip.bhxh_employee)}})]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-4 text-muted"},[t._v("BHYT:")]),e("div",{directives:[{name:"numeral",rawName:"v-numeral"}],staticClass:"col-md-8",domProps:{textContent:t._s(t.payslip.bhyt_employee)}})]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-4 text-muted"},[t._v("BHTN:")]),e("div",{directives:[{name:"numeral",rawName:"v-numeral"}],staticClass:"col-md-8",domProps:{textContent:t._s(t.payslip.bhtn_employee)}})]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-4 text-muted"},[t._v("Cộng:")]),e("div",{directives:[{name:"numeral",rawName:"v-numeral"}],staticClass:"col-md-8",domProps:{textContent:t._s(t.totalInsuranceByEmployee)}})]),t._v(" "),e("h6",[t._v("Các khoản công ty phải trả")]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-4 text-muted"},[t._v("BHXH:")]),e("div",{directives:[{name:"numeral",rawName:"v-numeral"}],staticClass:"col-md-8",domProps:{textContent:t._s(t.payslip.bhxh_company)}})]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-4 text-muted"},[t._v("BHYT:")]),e("div",{directives:[{name:"numeral",rawName:"v-numeral"}],staticClass:"col-md-8",domProps:{textContent:t._s(t.payslip.bhyt_company)}})]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-4 text-muted"},[t._v("BHTN:")]),e("div",{directives:[{name:"numeral",rawName:"v-numeral"}],staticClass:"col-md-8",domProps:{textContent:t._s(t.payslip.bhtn_company)}})]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-4 text-muted"},[t._v("Cộng:")]),e("div",{directives:[{name:"numeral",rawName:"v-numeral"}],staticClass:"col-md-8",domProps:{textContent:t._s(t.totalInsuranceByCompany)}})])])],1)],1),t._v(" "),e("div",{staticClass:"col-sm-6 col-xl-3"},[e("b-card",{staticClass:"mb-4",attrs:{"no-body":""}},[e("b-card-header",{attrs:{"header-tag":"h5"}},[t._v("Công đoàn phí")]),t._v(" "),e("b-card-body",[e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-12"},[e("span",{staticClass:"text-muted"},[t._v("Đoàn phí người lao động đóng: ")]),e("span",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(t.payslip.union_dues_employee)}})])]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-12"},[e("span",{staticClass:"text-muted"},[t._v("Đoàn phí công ty đóng: ")]),e("span",{directives:[{name:"numeral",rawName:"v-numeral"}],domProps:{textContent:t._s(t.payslip.union_dues_company)}})])])])],1),t._v(" "),e("b-card",{staticClass:"mb-4",attrs:{"no-body":""}},[e("b-card-header",{attrs:{"header-tag":"h5"}},[t._v("Thông tin thuế TNCN")]),t._v(" "),e("b-card-body",[e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-12"},[e("span",{staticClass:"text-muted"},[t._v("Mã số thuế: ")]),e("span",{domProps:{textContent:t._s(t.profile.tax_iden_number)}})])]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-12"},[e("span",{staticClass:"text-muted"},[t._v("Bản thân: ")]),e("span",[t._v("9,000,000")])])]),t._v(" "),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-12"},[e("span",{staticClass:"text-muted"},[t._v("Phụ thuộc: ")]),e("span",[t._v("3,600,000 x "+t._s(t.profile.no_of_dependants?t.profile.no_of_dependants:0)+" người")])])])])],1)],1)])])},[],!1,null,null,null);a.a=o.exports},yekR:function(t,a,e){var n;n=function(){return function(t){function a(n){if(e[n])return e[n].exports;var s=e[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,a),s.loaded=!0,s.exports}var e={};return a.m=t,a.c=e,a.p="",a(0)}([function(t,a,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0}),a.conformToMask=void 0;var s=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},r=e(2);Object.defineProperty(a,"conformToMask",{enumerable:!0,get:function(){return n(r).default}});var i=n(e(5));a.default={render:function(t){var a=this;return t("input",{ref:"input",domProps:{value:this.value},on:{input:function(t){return a.updateValue(t.target.value)},focus:function(t){return a.emitEvent(t)},blur:function(t){return a.emitEvent(t)},keypress:function(t){return a.emitEvent(t)},click:function(t){return a.emitEvent(t)}}})},name:"masked-input",props:{value:{type:String,required:!1,default:""},mask:{type:[Array,Function,Boolean,Object],required:!0},guide:{type:Boolean,required:!1},placeholderChar:{type:String,required:!1},keepCharPositions:{type:Boolean,required:!1},pipe:{type:Function,required:!1},showMask:{type:Boolean,required:!1}},mounted:function(){this.initMask()},methods:{createTextMaskInputElement:i.default,setTextMaskInputElement:function(){this.textMaskInputElement=this.createTextMaskInputElement(s({inputElement:this.$refs.input},this.$options.propsData))},initMask:function(){this.setTextMaskInputElement(),this.textMaskInputElement.update(this.value)},bind:function(){this.setTextMaskInputElement(),this.updateValue(this.value)},updateValue:function(t){this.textMaskInputElement.update(t),this.$emit("input",this.$refs.input.value)},emitEvent:function(t){this.$emit(t.type,t)}},watch:{mask:function(t,a){this.mask!==a&&this.bind()},guide:function(){this.bind()},placeholderChar:function(){this.bind()},keepCharPositions:function(){this.bind()},pipe:function(){this.bind()},showMask:function(){this.bind()}}}},function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.placeholderChar="_",a.strFunction="function"},function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};a.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(0,s.isArray)(a)){if((void 0===a?"undefined":n(a))!==r.strFunction)throw new Error("Text-mask:conformToMask; The mask property must be an array.");a=a(t,e),a=(0,s.processCaretTraps)(a).maskWithoutCaretTraps}var l=e.guide,c=void 0===l||l,u=e.previousConformedValue,p=void 0===u?o:u,d=e.placeholderChar,m=void 0===d?r.placeholderChar:d,v=e.placeholder,h=void 0===v?(0,s.convertMaskToPlaceholder)(a,m):v,y=e.currentCaretPosition,f=e.keepCharPositions,_=!1===c&&void 0!==p,b=t.length,g=p.length,C=h.length,x=a.length,w=b-g,k=w>0,D=y+(k?-w:0),T=D+Math.abs(w);if(!0===f&&!k){for(var P=o,I=D;I<T;I++)h[I]===m&&(P+=m);t=t.slice(0,D)+P+t.slice(D,b)}for(var S=t.split(o).map(function(t,a){return{char:t,isNew:a>=D&&a<T}}),O=b-1;O>=0;O--){var N=S[O].char;N!==m&&N===h[O>=D&&g===x?O-w:O]&&S.splice(O,1)}var j=o,M=!1;t:for(var B=0;B<C;B++){var E=h[B];if(E===m){if(S.length>0)for(;S.length>0;){var F=S.shift(),A=F.char,$=F.isNew;if(A===m&&!0!==_){j+=m;continue t}if(a[B].test(A)){if(!0===f&&!1!==$&&p!==o&&!1!==c&&k){for(var H=S.length,V=null,L=0;L<H;L++){var q=S[L];if(q.char!==m&&!1===q.isNew)break;if(q.char===m){V=L;break}}null!==V?(j+=A,S.splice(V,1)):B--}else j+=A;continue t}M=!0}!1===_&&(j+=h.substr(B,C));break}j+=E}if(_&&!1===k){for(var R=null,K=0;K<j.length;K++)h[K]===m&&(R=K);j=null!==R?j.substr(0,R+1):o}return{conformedValue:j,meta:{someCharsRejected:M}}};var s=e(3),r=e(1),i=[],o=""},function(t,a,e){"use strict";function n(t){return Array.isArray&&Array.isArray(t)||t instanceof Array}Object.defineProperty(a,"__esModule",{value:!0}),a.convertMaskToPlaceholder=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.placeholderChar;if(!n(t))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==t.indexOf(a))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\nThe placeholder character that was received is: "+JSON.stringify(a)+"\n\nThe mask that was received is: "+JSON.stringify(t));return t.map(function(t){return t instanceof RegExp?a:t}).join("")},a.isArray=n,a.isString=function(t){return"string"==typeof t||t instanceof String},a.isNumber=function(t){return"number"==typeof t&&void 0===t.length&&!isNaN(t)},a.processCaretTraps=function(t){for(var a=[],e=void 0;-1!==(e=t.indexOf(i));)a.push(e),t.splice(e,1);return{maskWithoutCaretTraps:t,indexes:a}};var s=e(1),r=[],i="[]"},function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(t){var a=t.previousConformedValue,s=void 0===a?n:a,r=t.previousPlaceholder,i=void 0===r?n:r,o=t.currentCaretPosition,l=void 0===o?0:o,c=t.conformedValue,u=t.rawValue,p=t.placeholderChar,d=t.placeholder,m=t.indexesOfPipedChars,v=void 0===m?e:m,h=t.caretTrapIndexes,y=void 0===h?e:h;if(0===l||!u.length)return 0;var f=u.length,_=s.length,b=d.length,g=c.length,C=f-_,x=C>0;if(C>1&&!x&&0!==_)return l;var w=0,k=void 0,D=void 0;if(!x||s!==c&&c!==d){var T=c.toLowerCase(),P=u.toLowerCase().substr(0,l).split(n).filter(function(t){return-1!==T.indexOf(t)});D=P[P.length-1];var I=i.substr(0,P.length).split(n).filter(function(t){return t!==p}).length,S=d.substr(0,P.length).split(n).filter(function(t){return t!==p}).length!==I,O=void 0!==i[P.length-1]&&void 0!==d[P.length-2]&&i[P.length-1]!==p&&i[P.length-1]!==d[P.length-1]&&i[P.length-1]===d[P.length-2];!x&&(S||O)&&I>0&&d.indexOf(D)>-1&&void 0!==u[l]&&(k=!0,D=u[l]);for(var N=v.map(function(t){return T[t]}).filter(function(t){return t===D}).length,j=P.filter(function(t){return t===D}).length,M=d.substr(0,d.indexOf(p)).split(n).filter(function(t,a){return t===D&&u[a]!==t}).length+j+N+(k?1:0),B=0,E=0;E<g&&(w=E+1,T[E]===D&&B++,!(B>=M));E++);}else w=l-C;if(x){for(var F=w,A=w;A<=b;A++)if(d[A]===p&&(F=A),d[A]===p||-1!==y.indexOf(A)||A===b)return F}else if(k){for(var $=w-1;$>=0;$--)if(c[$]===D||-1!==y.indexOf($)||0===$)return $}else for(var H=w;H>=0;H--)if(d[H-1]===p||-1!==y.indexOf(H)||0===H)return H};var e=[],n=""},function(t,a,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,a){document.activeElement===t&&(v?h(function(){return t.setSelectionRange(a,a,d)},0):t.setSelectionRange(a,a,d))}Object.defineProperty(a,"__esModule",{value:!0});var r=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};a.default=function(t){var a={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:a,update:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,d=n.inputElement,v=n.mask,h=n.guide,y=n.pipe,f=n.placeholderChar,_=void 0===f?u.placeholderChar:f,b=n.keepCharPositions,g=void 0!==b&&b,C=n.showMask,x=void 0!==C&&C;if(void 0===e&&(e=d.value),e!==a.previousConformedValue){(void 0===v?"undefined":i(v))===m&&void 0!==v.pipe&&void 0!==v.mask&&(y=v.pipe,v=v.mask);var w=void 0,k=void 0;if(v instanceof Array&&(w=(0,c.convertMaskToPlaceholder)(v,_)),!1!==v){var D=function(t){if((0,c.isString)(t))return t;if((0,c.isNumber)(t))return String(t);if(void 0===t||null===t)return p;throw new Error("The 'value' provided to Text Mask needs to be a string or a number. The value received was:\n\n "+JSON.stringify(t))}(e),T=d.selectionEnd,P=a.previousConformedValue,I=a.previousPlaceholder,S=void 0;if((void 0===v?"undefined":i(v))===u.strFunction){if(!1===(k=v(D,{currentCaretPosition:T,previousConformedValue:P,placeholderChar:_})))return;var O=(0,c.processCaretTraps)(k);k=O.maskWithoutCaretTraps,S=O.indexes,w=(0,c.convertMaskToPlaceholder)(k,_)}else k=v;var N={previousConformedValue:P,guide:h,placeholderChar:_,pipe:y,placeholder:w,currentCaretPosition:T,keepCharPositions:g},j=(0,l.default)(D,k,N).conformedValue,M=(void 0===y?"undefined":i(y))===u.strFunction,B={};M&&(!1===(B=y(j,r({rawValue:D},N)))?B={value:P,rejected:!0}:(0,c.isString)(B)&&(B={value:B}));var E=M?B.value:j,F=(0,o.default)({previousConformedValue:P,previousPlaceholder:I,conformedValue:E,placeholder:w,rawValue:D,currentCaretPosition:T,placeholderChar:_,indexesOfPipedChars:B.indexesOfPipedChars,caretTrapIndexes:S}),A=E===w&&0===F?x?w:p:E;a.previousConformedValue=A,a.previousPlaceholder=w,d.value!==A&&(d.value=A,s(d,F))}}}}};var o=n(e(4)),l=n(e(2)),c=e(3),u=e(1),p="",d="none",m="object",v="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),h="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout}])},t.exports=n()}});