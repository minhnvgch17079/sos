webpackJsonp([3],{"/b0+":function(t,e,i){"use strict";var s=i("RUzx"),n=i.n(s),o=i("xF2Z"),a={name:"multi-select-department",props:["departmentNames","departmentIds","autoClose","hideSelected"],components:{Multiselect:n.a},data:function(){return{autoClosed:!0,hideSelect:!1,departmentOption:null,departmentOptions:[]}},created:function(){this.getAllDepartment(),void 0!==this.autoClose&&null!==this.autoClosed&&(this.autoClosed=this.autoClose),void 0!==this.hideSelected&&null!==this.hideSelected&&(this.hideSelect=this.hideSelected)},watch:{hideSelected:function(t,e){this.hideSelect=this.hideSelected},autoClose:function(t,e){this.autoClosed=this.autoClose},departmentNames:function(t,e){void 0!==this.departmentOptions&&this.departmentOptions.length>0&&this.setList()},departmentIds:function(t,e){void 0!==this.departmentOptions&&this.departmentOptions.length>0&&this.setList()},departmentOption:function(t,e){this.$emit("handleDepartmentSelected",t)}},methods:{setList:function(){var t=this;this.departmentNames&&(this.departmentOption=[],this.departmentNames.split(",").forEach(function(e){t.departmentOption.push(t.departmentOptions.find(function(t){return""+t.name===e}))})),this.departmentIds&&(this.departmentOption=[],this.departmentIds.split(",").forEach(function(e){t.departmentOption.push(t.departmentOptions.find(function(t){return parseInt(t.id)===parseInt(e)}))}))},getAllDepartment:function(){var t=this;o.a.getDepartmentList().then(function(e){e.data.success&&(t.departmentOptions=e.data.data,t.setList())}).catch(function(t){console.log(t)})}}},l=i("XyMi"),d=Object(l.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("multiselect",{staticClass:"multiselect-primary",attrs:{options:t.departmentOptions,multiple:!0,placeholder:"Chọn Bộ Phận",label:"name","track-by":"name",selectedLabel:"Đã chọn",deselectLabel:"Nhấn để bỏ chọn bộ phận",selectLabel:"Nhấn enter để chọn","hide-selected":t.hideSelect,"close-on-select":t.autoClosed},model:{value:t.departmentOption,callback:function(e){t.departmentOption=e},expression:"departmentOption"}},[i("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")])])],1)},[],!1,null,null,null);e.a=d.exports},"3fZB":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("RUzx"),n=i.n(s),o=i("7+uW"),a=i("mG5u"),l=i("sUu7"),d=i("TyzE"),r=i("3BrW"),c=i("InrP"),u=i("/b0+"),m=i("DbLI"),h=i("nmdP");o.default.use(l.a);var p={name:"update-hrteam",components:{Notification:Notification,Multiselect:n.a,MultiSelectProvince:d.a,MultiSelectStation:r.a,MultiSelectModule:c.a,MultiSelectDepartment:u.a,MultiSelectPosition:m.a,SelectHrMember:h.a},data:function(){return{toggleLog:!1,isLoading:!1,notify:{message:"",class:"",title:""},teamName:"",leaderId:null,memberIds:null,provinceIds:null,stationIds:null,moduleIds:null,departmentIds:null,positionIds:null}},computed:{isEdit:function(){return this.$route.params.id>0}},created:function(){this.$route.params.id&&this.getHrTeam()},methods:{handleSelectedLeader:function(t){this.leaderId=t?t.id:null},handleSelectedMember:function(t){this.memberIds=t?t.map(function(t){return t.id}).toString():""},handlePositionSelected:function(t){this.positionIds=t?t.map(function(t){return t.id}).toString():""},handleDepartmentSelected:function(t){this.departmentIds=t?t.map(function(t){return t.id}).toString():""},handleProvinceSelected:function(t){console.log(t),this.provinceIds=t?t.map(function(t){return t.id}).toString():""},handleStationSelected:function(t){this.stationIds=t?t.map(function(t){return t.id}).toString():""},handleModuleSelected:function(t){this.moduleIds=t?t.map(function(t){return t.id}).toString():""},getHrTeam:function(){var t=this;this.$startLoading();var e={id:this.$route.params.id};a.a.getHrTeamById(e).then(function(e){e.data.success&&t.setData(e.data.data)}).then(function(){t.$stopLoading()})},setData:function(t){this.teamId=t.id,this.teamName=t.name,this.provinceIds=t.province_id,this.stationIds=t.station_id,this.moduleIds=t.module_id,this.departmentIds=t.department_ids,this.positionIds=t.position_id,this.leaderId=t.leader_id,this.memberIds=t.member_id},showNotification:function(t){var e="bg-success text-white";t||(e="bg-warning text-dark"),this.$notify({group:"add-emp",title:this.notify.title,text:this.notify.message,type:e})},addHrTeam:function(){var t=this,e={name:this.teamName,leaderId:this.leaderId,memberIds:this.memberIds,provinceIds:this.provinceIds,stationIds:this.stationIds,moduleIds:this.moduleIds,departmentIds:this.departmentIds,positionIds:this.positionIds};this.validate(e)&&a.a.addHrTeam(e).then(function(e){e.data.success?t.$router.push({name:"manager-hrteam"}):t.$notify({group:"default",type:"bg-warning text-dark",title:"Thông báo",text:e.data.message})})},validate:function(){return!0},editHrTeam:function(){var t=this,e={id:this.teamId,name:this.teamName,leaderId:this.leaderId,memberIds:this.memberIds,provinceIds:this.provinceIds,stationIds:this.stationIds,moduleIds:this.moduleIds,departmentIds:this.departmentIds,positionIds:this.positionIds};this.validate(e)&&a.a.updateHrTeam(e).then(function(e){e.data.success?t.$notify({group:"default",type:"bg-success text-white",title:"Thông báo",text:"Update thông tin nhóm thành công!"}):t.$notify({group:"default",type:"bg-warning text-dark",title:"Thông báo",text:e.data.message})})}}},f=i("XyMi");var b=function(t){i("6aA6"),i("tPhD")},v=Object(f.a)(p,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"update-master"},[i("div",{staticClass:"top-title"},[t.isEdit?i("h2",[t._v("Sửa nhóm hành chính nhân sự")]):i("h2",[t._v("Thêm nhóm hành chính nhân sự")]),t._v(" "),i("div",{staticClass:"top-title__right-button"},[this.$route.params.id?i("b-btn",{attrs:{type:"button",variant:"btn btn-info"},on:{click:t.editHrTeam}},[i("i",{staticClass:"icon ion-md-archive"}),t._v(" Cập nhật\n            ")]):i("b-btn",{attrs:{type:"button",variant:"btn btn-primary"},on:{click:t.addHrTeam}},[i("i",{staticClass:"ion ion-ios-add"}),t._v(" Thêm nhóm\n            ")]),t._v(" "),i("router-link",{staticClass:"btn btn-default",attrs:{to:{name:"manager-hrteam"}}},[i("i",{staticClass:"ion ion-ios-return-left"}),t._v(" Quay lại")])],1)]),t._v(" "),i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-12"},[i("div",{staticClass:"card mb-4"},[i("div",{staticClass:"row no-gutters row-bordered"},[i("div",{staticClass:"col-md-12 col-lg-12 col-xl-12"},[i("h6",{staticClass:"card-header ttcn-header"},[i("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-ttcn",modifiers:{"accordion-ttcn":!0}}],staticClass:"text-dark",attrs:{href:"javascript:void(0)"}},[t._v(" Thông tin nhóm")])]),t._v(" "),i("b-collapse",{attrs:{id:"accordion-ttcn",visible:""}},[i("div",{staticClass:"card-body"},[i("b-form-row",[i("div",{staticClass:"col-md-10 col-lg-10 col-xl-10"},[i("b-form-row",[i("b-form-group",{staticClass:"col-xl-4 col-md-6",attrs:{label:"Tên nhóm",id:"group-fullname"}},[i("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-danger":t.errors.has("fullname")},attrs:{name:"name",placeholder:"Tên nhóm"},model:{value:t.teamName,callback:function(e){t.teamName=e},expression:"teamName"}})],1),t._v(" "),i("b-form-group",{staticClass:"col-xl-4 col-md-6",attrs:{label:"Trưởng nhóm"}},[i("select-hr-member",{attrs:{"member-ids":t.leaderId},on:{handleSelectedHrMember:t.handleSelectedLeader}})],1)],1),t._v(" "),i("b-form-row",[i("b-form-group",{staticClass:"col-md-12",attrs:{label:"Thành viên trong nhóm",id:"input-group-tel"}},[i("select-hr-member",{attrs:{"is-multi":!0,"member-ids":t.memberIds,"limit-prop":99999},on:{handleSelectedHrMember:t.handleSelectedMember}})],1)],1),t._v(" "),i("b-form-row",[i("b-form-group",{staticClass:"col-md-12",attrs:{label:"Tỉnh quản lý",id:"input-group-tel"}},[i("multi-select-province",{attrs:{"display-all":!0,"province-ids":t.provinceIds,"limit-prop":99999,"auto-close":!1,"hide-selected":!0},on:{handleProvinceSelected:t.handleProvinceSelected}})],1)],1),t._v(" "),i("b-form-row",[i("b-form-group",{staticClass:"col-md-12",attrs:{label:"Kho quản lý",id:"input-group-tel"}},[i("multi-select-station",{attrs:{"limit-prop":9999,provinceIds:t.provinceIds,"station-ids":t.stationIds,"auto-close":!1,"hide-selected":!0},on:{handleStationSelected:t.handleStationSelected}})],1)],1),t._v(" "),i("b-form-row",[i("b-form-group",{staticClass:"col-md-12",attrs:{label:"Module quản lý",id:"input-group-tel"}},[i("multi-select-module",{attrs:{stationIds:t.stationIds,"module-ids":t.moduleIds,"auto-close":!1,"hide-selected":!0},on:{handleModuleSelected:t.handleModuleSelected}})],1)],1),t._v(" "),i("b-form-row",[i("b-form-group",{staticClass:"col-md-12",attrs:{label:"Bộ phận quản lý",id:"input-group-tel"}},[i("multi-select-department",{attrs:{"department-ids":t.departmentIds,"auto-close":!1,"hide-selected":!0},on:{handleDepartmentSelected:t.handleDepartmentSelected}})],1)],1),t._v(" "),i("b-form-row",[i("b-form-group",{staticClass:"col-md-12",attrs:{label:"Vị trí quản lý",id:"input-group-tel"}},[i("multi-select-position",{attrs:{"department-ids":t.departmentIds,"position-ids":t.positionIds,"auto-close":!1,"hide-selected":!0},on:{handlePositionSelected:t.handlePositionSelected}})],1)],1)],1)])],1)])],1)])])])]),t._v(" "),i("div",{staticClass:"card-footer border-0 text-center py-3"},[null==this.$route.params.id?i("b-btn",{attrs:{type:"button",variant:"btn btn-primary"},on:{click:t.addHrTeam}},[i("i",{staticClass:"ion ion-ios-add"}),t._v(" Thêm nhóm\n            ")]):i("div",[i("b-btn",{attrs:{type:"button",variant:"btn btn-info"},on:{click:t.editHrTeam}},[i("i",{staticClass:"icon ion-md-archive"}),t._v(" Cập nhật\n                ")]),t._v(" "),i("router-link",{staticClass:"btn btn-default",attrs:{to:{name:"manager-hrteam"}}},[i("i",{staticClass:"ion ion-ios-return-left"}),t._v(" Quay lại")])],1)],1),t._v(" "),i("notifications",{attrs:{group:"add-emp"}})],1)])},[],!1,b,"data-v-c39bfac2",null);e.default=v.exports},InrP:function(t,e,i){"use strict";var s=i("RUzx"),n=i.n(s),o=i("mG5u"),a={name:"multi-select-module",components:{Multiselect:n.a},props:["stationIds","moduleIds","autoClose","hideSelected"],data:function(){return{autoClosed:!0,hideSelect:!1,option:null,options:[]}},created:function(){void 0!==this.autoClose&&null!=this.autoClose&&(this.autoClosed=this.autoClose),void 0!==this.hideSelected&&null!==this.hideSelected&&(this.hideSelect=this.hideSelected)},watch:{hideSelected:function(t,e){this.hideSelect=this.hideSelected},autoClose:function(t,e){this.autoClosed=this.autoClose},option:function(t,e){this.$emit("handleModuleSelected",t)},stationIds:function(t,e){t&&(this.getList(t),this.option=null)},moduleIds:function(t,e){void 0!==this.options&&this.options.length>0&&this.setList()}},methods:{setList:function(){var t=this;this.moduleIds&&(this.option=[],this.moduleIds.split(",").forEach(function(e){t.options.forEach(function(i){""+i.id===e&&t.option.push(i)})}))},getList:function(t){var e=this,i={stationIds:t};o.a.getAllModuleByStationIds(i).then(function(t){t.data.success&&(e.options=t.data.data,e.setList())}).catch(function(t){console.log(t)})}}},l=i("XyMi"),d=Object(l.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("multiselect",{staticClass:"multiselect-primary",attrs:{options:t.options,multiple:!0,placeholder:"Chọn module",label:"alias","track-by":"alias",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn","close-on-select":t.autoClosed,"hide-selected":t.hideSelect},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[i("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")])])],1)},[],!1,null,null,null);e.a=d.exports},nmdP:function(t,e,i){"use strict";var s=i("RUzx"),n=i.n(s),o=i("mG5u"),a={name:"select-hr-member",components:{Multiselect:n.a},props:{isDisabled:{type:Boolean},isMulti:{type:Boolean},memberIds:{type:String},limitProp:{type:Number}},data:function(){return{option:null,options:[],limit:5,isMultiple:!1,closeOnSelect:!0}},created:function(){this.getList(),this.isMulti&&(this.isMultiple=!0,this.closeOnSelect=!1),this.limitProp&&(this.limit=this.limitProp)},watch:{limitProp:function(t,e){this.limit=t},memberIds:function(t,e){void 0!==this.options&&0!==this.options.length?(this.memberIds||(this.option=[]),this.setList()):this.option=[]},option:function(t,e){this.$emit("handleSelectedHrMember",t)},isMulti:function(t,e){this.isMultiple=this.isMulti}},methods:{customLabel:function(t){return t.fullname+" ("+t.username+" - "+t.stationname+")"},setList:function(){var t=this;this.memberIds&&(this.isMultiple?(this.option=[],this.memberIds.split(",").forEach(function(e){var i=t.options.find(function(t){return t.id===e});i&&t.option.push(i)})):this.option=this.options.find(function(e){return e.id===t.memberIds}))},setSelectedOption:function(){var t=this;this.options.length>0&&this.hrmember&&(this.option=this.options.find(function(e){return e.id===t.hrmember}))},getList:function(){var t=this;o.a.getAllHrMember().then(function(e){e.data.success&&(t.options=e.data.data,t.setList())}).catch(function(t){console.log(t)})}}},l=i("XyMi"),d=Object(l.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("multiselect",{staticClass:"multiselect-primary",attrs:{options:t.options,placeholder:"Chọn nhân sự","custom-label":t.customLabel,"track-by":"fullname",limit:t.limit,selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",searchable:!0,disabled:t.isDisabled,multiple:t.isMultiple,"hide-selected":t.isMultiple,"close-on-select":t.closeOnSelect},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[i("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")])])],1)},[],!1,null,null,null);e.a=d.exports},tPhD:function(t,e){}});