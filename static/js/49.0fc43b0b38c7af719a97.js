webpackJsonp([49],{aq6A:function(t,a,e){"use strict";var s=e("PikB");a.a={searchBillCod:function(t){return s.a.get("AdBills/getBillsCod",{params:t})},listCodPackages:function(t){return s.a.get("bills/listCodPackages/"+t)},getSummariesCod:function(t){return s.a.get("bills/getSummariesCod",{params:t})},listPackagesDebtBill:function(t){return s.a.get("bills/listPackagesDebtBill/"+t)},listPackagesReturnDebtBill:function(t){return s.a.get("bills/listPackagesReturnDebtBill/"+t)},exportPackageExcel:function(t){return s.a.get("bills/exportPackageExcel",{params:t})},exportDetailExcel:function(t){return s.a.get("bills/exportDetailExcel",{params:t})},exportStationExcel:function(t){return s.a.get("bills/exportStationExcel",{params:t})},saveLogCustomerTelAdd:function(t){return s.a.post("xem-thong-tin/saveViewCustomerTelLog",t)},billDownloadInfo:function(t){return s.a.get("AdDownloadManager/indexDownloadCod",{params:t})}}},eBhl:function(t,a){},lvk0:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("aq6A"),i=e("RUzx"),o=e.n(i),n=e("KVzY"),l=e("7+uW"),r=e("PJh5"),c=e.n(r),d=e("IC97"),p=e("4WGu");l.default.use(n.default);var u={components:{Multiselect:o.a,Datepicker:d.a},data:function(){return{subjects:"",uuid:"",listFiles:[],selectExportType:{name:"Chọn kiểu dữ liệu",export_type:""},exportTypes:[{name:"Chọn kiểu dữ liệu",export_type:""},{name:"Chi tiết hóa đơn COD",export_type:"detail_bill_cod"}],pageData:{currentPage:1,totalPages:0,totalItems:0,perPage:10,sortBy:"id",sortDesc:!1},domainDownload:p.a.domainDownloadFile,loadingExcel:!1,loadingExcelHtml:'\n      <div class="sk-folding-cube sk-primary">\n        <div class="sk-cube1 sk-cube"></div>\n        <div class="sk-cube2 sk-cube"></div>\n        <div class="sk-cube4 sk-cube"></div>\n        <div class="sk-cube3 sk-cube"></div>\n      </div>\n      <h5 class="text-center mb-0">LOADING...</h5>\n    ',from:c()().format("YYYY-MM-DD"),to:c()().format("YYYY-MM-DD")}},computed:{showResult:function(){return this.listFiles.length>0},totalItems:function(){return this.listFiles.length},totalPages:function(){return Math.ceil(this.totalItems/this.perPage)}},methods:{resetForm:function(){this.subjects="",this.uuid=""},searchFileDownload:function(t,a){var e=this,i={subjects:e.subjects,uuid:e.uuid,export_type:e.selectExportType.export_type,page:t,limit:e.pageData.perPage,date_from:e.customFormatter(this.from),date_to:e.customFormatter(this.to)};a&&(this.pageData.currentPage=1,i.page=1),e.loadingExcel=!0,s.a.billDownloadInfo(i).then(function(t){t.data.success&&(e.listFiles=t.data.data,e.pageData.totalItems=t.data.options.total,e.pageData.totalPages=t.data.options.total_page)}).catch(function(t){}).then(function(){e.loadingExcel=!1})},pageChanged:function(t){this.searchFileDownload(t),this.pageData.currentPage=t},customFormatter:function(t){return c()(t).format("YYYY-MM-DD")},dateSelectedFromInChild:function(t){this.from=t},dateSelectedToInChild:function(t){this.to=t}},created:function(){"detail_cod"===this.$route.query.type&&(this.selectExportType={name:"Chi tiết hóa đơn COD",export_type:"detail_bill_cod"}),this.searchFileDownload(this.pageData.currentPage)}},g=e("XyMi");var b=function(t){e("eBhl")},v=Object(g.a)(u,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t._m(0),t._v(" "),e("form",[e("b-form-row",[e("div",{staticClass:"col-md-6"},[e("b-form-group",{attrs:{label:"Người tạo"}},[e("b-form-input",{attrs:{type:"text",placeholder:"Nhiều người tạo cách nhau bằng dấu phẩy. Ví dụ: amdmin,user1..."},model:{value:t.subjects,callback:function(a){t.subjects=a},expression:"subjects"}})],1)],1),t._v(" "),e("div",{staticClass:"col-md-6"},[e("b-form-group",{attrs:{label:"File"}},[e("b-form-input",{attrs:{type:"text",placeholder:"Nhiều tên file cách nhau bằng dấu phẩy. Ví dụ: file1,file2..."},model:{value:t.uuid,callback:function(a){t.uuid=a},expression:"uuid"}})],1)],1)]),t._v(" "),e("b-form-row",[e("div",{staticClass:"col-md-6"},[e("b-form-group",{attrs:{label:"Kiểu dữ liệu"}},[e("multiselect",{attrs:{"track-by":"name",label:"name",placeholder:"Chọn kiểu dữ liệu",options:t.exportTypes,searchable:!1,"allow-empty":!1},model:{value:t.selectExportType,callback:function(a){t.selectExportType=a},expression:"selectExportType"}})],1)],1),t._v(" "),e("div",{staticClass:"col-md-3"},[e("b-form-group",{attrs:{label:"Từ:"}},[e("datepicker",{staticClass:"from-date",attrs:{bootstrapStyling:!0,format:t.customFormatter},on:{selected:t.dateSelectedFromInChild},model:{value:t.from,callback:function(a){t.from=a},expression:"from"}})],1)],1),t._v(" "),e("div",{staticClass:"col-md-3"},[e("b-form-group",{attrs:{label:"Đến:"}},[e("datepicker",{staticClass:"to-date",attrs:{bootstrapStyling:!0,format:t.customFormatter},on:{selected:t.dateSelectedToInChild},model:{value:t.to,callback:function(a){t.to=a},expression:"to"}})],1)],1)]),t._v(" "),e("b-form-row",[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"align-content-center text-center"},[e("b-btn",{attrs:{type:"button"},on:{click:t.resetForm}},[t._v("\n                        Nhập lại\n                    ")]),t._v(" "),e("b-btn",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return t.searchFileDownload(t.pageData.currentPage,!0)}}},[e("i",{staticClass:"sidenav-icon ion ion-md-search"}),t._v("\n                        Tìm kiếm\n                    ")])],1)])])],1),t._v(" "),e("br"),t._v(" "),e("div",{staticClass:"result",attrs:{id:"results"}},[t.showResult?e("b-card",{attrs:{"no-body":""}},[e("b-card-body",{staticClass:"pt-0 pb-3"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm pt-3"},[e("b-pagination",{attrs:{"total-rows":t.pageData.totalItems,"per-page":t.pageData.perPage},on:{change:t.pageChanged},model:{value:t.pageData.currentPage,callback:function(a){t.$set(t.pageData,"currentPage",a)},expression:"pageData.currentPage"}}),t._v("\n                        Tổng số file: "+t._s(t.pageData.totalItems)+"\n                    ")],1),t._v(" "),e("div",{staticClass:"col-sm text-sm-left text-center pt-3"},[t.pageData.totalItems?e("span",{staticClass:"text-muted"},[t._v("Trang "+t._s(t.pageData.currentPage)+" trên "+t._s(t.pageData.totalPages))]):t._e()])])]),t._v(" "),e("div",{staticClass:"table-result"},[e("div",{staticClass:"table-responsive mb-4"},[e("table",{staticClass:"table mb-0 table-bordered"},[e("thead",{staticStyle:{width:"100%"}},[e("tr",[e("th",{attrs:{width:"25%"}},[t._v("Thông tin xuất file")]),t._v(" "),e("th",{attrs:{width:"60%"}},[t._v("Chi tiết")]),t._v(" "),e("th",{attrs:{width:"10%"}},[t._v("Trạng thái")]),t._v(" "),e("th",{attrs:{width:"5%"}},[t._v("Thao tác")])])]),t._v(" "),e("tbody",t._l(t.listFiles,function(a,s){return e("tr",{key:s},[e("td",{attrs:{scope:"row","data-file-id":a.id}},[e("span",[t._v("ID: ")]),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.id))]),e("br"),t._v(" "),e("span",[t._v("Thời gian: ")]),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.created))]),e("br"),t._v(" "),e("span",[t._v("Người tạo: ")]),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.subject))]),e("br"),t._v(" "),e("span",[t._v("Loại file: ")]),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.type))]),e("br")]),t._v(" "),e("td",[e("span",[t._v("- Thời gian tạo hóa đơn: ")]),e("br"),t._v(" "),e("span",[t._v("   Từ: ")]),e("span",{staticClass:"font-weight-bold"},[t._v("  "+t._s(a.options.timefrom)+" 00:00:00")]),e("br"),t._v(" "),e("span",[t._v("   Đến: ")]),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.options.timeto)+" 23:59:59")]),e("br"),t._v(" "),e("span",[t._v("- Kiểu hóa đơn: ")]),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.options.bill_type))]),e("br"),t._v(" "),a.options.station?e("span",[e("span",[t._v("- Kho: ")]),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.options.station))]),e("br")]):t._e(),t._v(" "),a.options.cod?e("span",[e("span",[t._v("- Cod: ")]),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.options.cod))]),e("br")]):t._e(),t._v(" "),a.options.createdUsername?e("span",[e("span",[t._v("- Người tạo hóa đơn: ")]),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.options.createdUsername))]),e("br")]):t._e(),t._v(" "),a.options.billCode?e("span",[e("span",[t._v("- Mã hóa đơn: ")]),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.options.billCode))]),e("br")]):t._e(),t._v(" "),a.options.pkgAlias?e("span",[e("span",[t._v("- Mã đơn hàng: ")]),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.options.pkgAlias))]),e("br")]):t._e()]),t._v(" "),e("td",[e("span",[t._v(t._s(a.status))]),e("br"),t._v(" "),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.process))])]),t._v(" "),e("td",[e("b-link",{class:{disabled:"none"===a.status||"process"===a.status},attrs:{target:"_blank",href:t.domainDownload+a.filepath}},[t._v("\n                                    Tải file\n                                ")])],1)])}),0)])])]),t._v(" "),e("b-card-body",{staticClass:"pt-0 pb-3"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm pt-3"},[e("b-pagination",{attrs:{"total-rows":t.pageData.totalItems,"per-page":t.pageData.perPage},on:{change:t.pageChanged},model:{value:t.pageData.currentPage,callback:function(a){t.$set(t.pageData,"currentPage",a)},expression:"pageData.currentPage"}})],1),t._v(" "),e("div",{staticClass:"col-sm text-sm-left text-center pt-3"},[t.pageData.totalItems?e("span",{staticClass:"text-muted"},[t._v("Trang "+t._s(t.pageData.currentPage)+" trên "+t._s(t.pageData.totalPages))]):t._e()])])])],1):t._e(),t._v(" "),t.showResult?t._e():e("div",{staticClass:"no-data"},[e("b-alert",{attrs:{show:"",variant:"danger"}},[t._v(" Không có dữ liệu phù hợp, vui lòng thử lại với điều kiện tìm kiếm khác!")])],1),t._v(" "),t.loadingExcel?e("BlockUI",{attrs:{message:"Dữ liệu đang được xử lý, vui lòng đợi!",html:t.loadingExcelHtml}}):t._e()],1)])},[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"ui-block"},[a("h4",{staticClass:"ui-block-heading text-center"},[this._v("Quản lý download")])])}],!1,b,"data-v-fd58303a",null);a.default=v.exports}});