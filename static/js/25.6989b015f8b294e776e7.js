webpackJsonp([25],{"9kyz":function(t,e,a){"use strict";var i=a("wX3c"),n=a("TyzE"),o=a("3BrW"),s=a("TKVu"),l=a("rNeS"),r={computed:{lenProvinceIds:function(){if(this.formConfig.stationIds)return this.formConfig.stationIds.includes(",")?2:1}},props:["id"],components:{MultiSelectStation:o.a,MultiSelectProvince:n.a,MultiSelectModule:s.a,MultiSelectCart:l.a},created:function(){var t=this;i.a.getListSelectRemunerationPackage().then(function(e){e.data.success&&(t.listRemunerationPackages1=e.data.data)}),i.a.getAdditionalPackage().then(function(e){e.data.success&&(t.listAdditionalPackage1=e.data.data)}).catch(function(e){t.errors.push(e)})},data:function(){return{isDisabled:!1,formConfig:{campaignId:this.id,provinceIds:null,stationIds:null,moduleId:null,cartId:null,additionalPackage:"0",remunerationPackage:null},listAdditionalPackage1:[],listRemunerationPackages1:[]}},methods:{createConfigCampaign:function(){var t=this;this.isDisabled=!0,this.$startLoading(),i.a.createConfigCampaign(this.formConfig).then(function(e){e.data.success?(t.$notify({group:"default",type:"bg-success text-white",title:"Thông báo",text:e.data.message}),t.$emit("exit",!0),t.$refs["modal-create-config"].hide(),t.$stopLoading()):t.$notify({group:"default",type:"bg-warning text-dark",title:"Thông báo",text:e.data.message}),t.isDisabled=!1})},handleStationSelected:function(t){this.formConfig.stationIds=t?t.map(function(t){return t.id}).toString():""},handleProvinceSelected:function(t){this.formConfig.provinceIds=t?t.map(function(t){return t.id}).toString():""},handleModuleSelected:function(t){this.formConfig.moduleId=t},handleCartSelected:function(t){this.formConfig.cartId=t}}},c=a("XyMi"),d=Object(c.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("b-row",[a("b-col",[a("b-form-group",{attrs:{id:"input-group-5",label:"Tỉnh được gán: ","label-for":"input-5"}},[a("multi-select-province",{on:{handleProvinceSelected:t.handleProvinceSelected}})],1)],1),t._v(" "),a("b-col",[a("b-form-group",{attrs:{id:"input-group-6",label:"Kho được gán tương ứng: ","label-for":"input-6"}},[a("multi-select-station",{attrs:{"province-ids":t.formConfig.provinceIds,"station-ids":t.formConfig.stationIds},on:{handleStationSelected:t.handleStationSelected}})],1)],1)],1),t._v(" "),a("br"),t._v(" "),1==t.lenProvinceIds?a("b-row",[a("b-col",[a("b-form-group",{attrs:{id:"input-group-9",label:"Chọn modul tương ứng với kho: ","label-for":"input-9"}},[a("multi-select-module",{attrs:{"station-id":t.formConfig.stationIds},on:{handleModuleSelected:function(e){return t.handleModuleSelected(e)}}})],1)],1),t._v(" "),a("b-col",[a("b-form-group",{attrs:{id:"input-group-10",label:"Chọn giỏ tương ứng với modul: ","label-for":"input-9"}},[a("multi-select-cart",{attrs:{"module-ids":t.formConfig.moduleId},on:{handleCartSelected:function(e){return t.handleCartSelected(e)}}})],1)],1)],1):t._e(),t._v(" "),a("br"),t._v(" "),a("b-row",[a("b-col",[a("b-form-group",{attrs:{id:"input-group-7",label:"Gói tiền công: ","label-for":"input-7"}},[a("b-form-select",{attrs:{id:"input-7",required:"",options:t.listRemunerationPackages1},model:{value:t.formConfig.remunerationPackage,callback:function(e){t.$set(t.formConfig,"remunerationPackage",e)},expression:"formConfig.remunerationPackage"}})],1)],1),t._v(" "),a("b-col",[a("b-form-group",{attrs:{id:"input-group-8",label:"Gói bổ sung`: ","label-for":"input-8"}},[a("b-form-select",{attrs:{id:"input-8",required:"",options:t.listAdditionalPackage1},model:{value:t.formConfig.additionalPackage,callback:function(e){t.$set(t.formConfig,"additionalPackage",e)},expression:"formConfig.additionalPackage"}})],1)],1)],1),t._v(" "),a("b-button",{staticClass:"mt-3",attrs:{variant:"primary",block:""},on:{click:t.createConfigCampaign}},[t._v("Thêm")])],1)},[],!1,null,null,null);e.a=d.exports},TKVu:function(t,e,a){"use strict";var i=a("RUzx"),n=a.n(i),o=a("wX3c"),s={name:"multi-select-module",components:{Multiselect:n.a},props:{stationId:{},autoClose:{},hideSelected:{},limitProp:{default:5},isDisabled:{default:!1},moduleId:{}},data:function(){return{moduleIds:null,autoClosed:!0,hideSelect:!1,option:[],options:[]}},created:function(){void 0!==this.autoClose&&null!==this.autoClose&&(this.autoClosed=this.autoClose),void 0!==this.hideSelected&&null!==this.hideSelected&&(this.hideSelect=this.hideSelected),this.getList()},watch:{hideSelected:function(t,e){this.hideSelect=this.hideSelected},autoClose:function(t,e){this.autoClosed=this.autoClose},option:function(t){var e=this.setList(t);this.$emit("handleModuleSelected",e)},stationId:function(t){this.getList()}},methods:{setList:function(t){var e=this;if(t)return this.moduleIds=[],t.forEach(function(t){t&&e.moduleIds.push(t.id)}),this.moduleIds.toString()},getList:function(){var t=this,e={id:this.stationId};o.a.getAllModuleByStationId(e).then(function(e){e.data.success&&(t.options=e.data.data,t.moduleId&&(t.option=[],t.moduleId.split(",").forEach(function(e){var a=t.options.find(function(t){return t.id===e});a&&t.option.push(a)})))}).catch(function(t){console.log(t)})}}},l=a("XyMi");var r=function(t){a("lz83")},c=Object(l.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("multiselect",{staticClass:"multiselect-primary",attrs:{options:t.options,multiple:!0,placeholder:"Chọn module",label:"name","track-by":"name",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",disabled:t.isDisabled,limit:t.limitProp,"hide-selected":t.hideSelect,"close-on-select":t.autoClosed},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")])])],1)},[],!1,r,"data-v-2464f8bd",null);e.a=c.exports},gHaU:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("9kyz"),n=a("wX3c"),o=a("IC97"),s=a("PJh5"),l=a.n(s),r={created:function(){this.viewListCampaign()},methods:{moment:function(t){return l()(t)},hideModal:function(){this.$refs["modal-noti"].hide()},viewListCampaign:function(){var t=this;this.$startLoading(),n.a.getListCampaign().then(function(e){e.data.success?(t.items=e.data.data,t.$stopLoading()):t.$refs["modal-noti"].show()}).catch(function(e){t.errors.push(e)})},showModalCreateCampaign:function(){this.$refs["modal-create-campaign"].show()},createCampaign:function(){var t=this;this.isDisabled=!0,this.$startLoading(),n.a.createCampaign(this.formCreateCampaign).then(function(e){e.data.success?(t.$notify({group:"default",type:"bg-success text-white",title:"Thông báo",text:e.data.message}),t.$stopLoading(),t.$refs["modal-create-campaign"].hide(),t.formCreateCampaign.name="",t.formCreateCampaign.from="",t.formCreateCampaign.to="",t.viewListCampaign()):t.$notify({group:"default",type:"bg-warning text-dark",title:"Thông báo",text:e.data.message}),t.isDisabled=!1}).catch(function(e){t.errors.push(e)})},updateCampaign:function(){var t=this;this.$startLoading(),n.a.updateCampaign(this.formEditCampaign).then(function(e){e.data.success?(t.$notify({group:"default",type:"bg-success text-white",title:"Thông báo",text:e.data.message}),t.formEditCampaign.name="",t.formEditCampaign.from="",t.formEditCampaign.to="",t.$stopLoading(),t.viewListCampaign(),t.$refs["modal-edit-campaign"].hide()):t.$notify({group:"default",type:"bg-warning text-dark",title:"Thông báo",text:e.data.message})}).catch(function(e){t.errors.push(e)})},removeCampaign:function(t){var e=this;confirm('Bạn có chắc chắn muốn xóa "'+t.item.name+'"')&&(this.$startLoading(),n.a.removeCampaign(t.item).then(function(t){t.data.success?(e.$notify({group:"default",type:"bg-success text-white",title:"Thông báo",text:t.data.message}),e.$stopLoading(),e.viewListCampaign()):e.$notify({group:"default",type:"bg-warning text-dark",title:"Thông báo",text:t.data.message})}).catch(function(t){e.errors.push(t)}))},cEdit:function(t){this.formEditCampaign.id=t.item.id,this.formEditCampaign.name=t.item.name,this.formEditCampaign.from=t.item.activeTime,this.formEditCampaign.to=t.item.expireTime,this.$refs["modal-edit-campaign"].show()},cConfig:function(t){this.$router.push({name:"config-campaign",query:{id:t.item.id}})}},components:{ModalConfigCampaign:i.a,Datepicker:o.a},computed:{rows:function(){return this.items.length}},data:function(){return{isDisabled:!1,formCreateCampaign:{name:"",from:"",to:""},formEditCampaign:{id:"",name:"",from:"",to:""},fId:{id:""},perPage:6,currentPage:1,fields:["STT",{key:"tencam",label:"Tên Campaign"},{key:"ngaybd",label:"Ngày đắt đầu"},{key:"ngaykt",label:"Ngày kết thúc"},{key:"btnedit",label:""},{key:"btneditcam",label:""},{key:"btnremove",label:""}],items:[],row:{}}}},c=a("XyMi"),d=Object(c.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",[a("h3",[t._v("Quản lí Campaign")])]),t._v(" "),a("h3",{staticClass:"d-flex justify-content-between align-items-center w-100 font-weight-bold py-3 mb-4"},[a("div"),t._v(" "),a("b-btn",{staticClass:"d-block",attrs:{id:"show-btn",variant:"primary btn-round"},on:{click:t.showModalCreateCampaign}},[a("span",{staticClass:"ion ion-md-add"}),t._v(" Thêm Campaign")])],1),t._v(" "),a("b-modal",{ref:"modal-create-campaign",attrs:{title:"Thêm Campaign","hide-footer":""}},[a("b-form",[a("b-form-group",{attrs:{id:"input-group-1",label:"Tên Campaign: ","label-for":"input-1"}},[a("b-form-input",{attrs:{id:"input-1",type:"text",required:"",placeholder:"Nhập tên Campaign"},model:{value:t.formCreateCampaign.name,callback:function(e){t.$set(t.formCreateCampaign,"name",e)},expression:"formCreateCampaign.name"}})],1),t._v(" "),a("b-form-group",{attrs:{id:"input-group-2",label:"Ngày bắt đầu Campaign: ","label-for":"input-2"}},[a("datepicker",{attrs:{format:"dd/MM/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,placeholder:"Chọn ngày bắt đầu Campaign (dd/mm/yyyy)","calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.formCreateCampaign.from,callback:function(e){t.$set(t.formCreateCampaign,"from",e)},expression:"formCreateCampaign.from"}})],1),t._v(" "),a("b-form-group",{attrs:{id:"input-group-12",label:"Ngày kết thúc Campaign: ","label-for":"input-3"}},[a("datepicker",{attrs:{format:"dd/MM/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,placeholder:"Chọn ngày kết thúc Campaign (dd/mm/yyyy)","calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.formCreateCampaign.to,callback:function(e){t.$set(t.formCreateCampaign,"to",e)},expression:"formCreateCampaign.to"}})],1)],1),t._v(" "),a("b-button",{staticClass:"mt-3",attrs:{variant:"primary",block:"",disabled:t.isDisabled},on:{click:t.createCampaign}},[t._v("Thêm")])],1),t._v(" "),a("b-modal",{ref:"modal-edit-campaign",attrs:{title:"Sửa Campaign",size:"lg","hide-footer":""}},[a("b-form",[a("b-form-group",{attrs:{id:"input-group-1",label:"Tên Campaign: ","label-for":"input-1"}},[a("b-form-input",{attrs:{id:"input-1",type:"text",required:"",placeholder:"Nhập tên Campaign"},model:{value:t.formEditCampaign.name,callback:function(e){t.$set(t.formEditCampaign,"name",e)},expression:"formEditCampaign.name"}})],1),t._v(" "),a("b-form-group",{attrs:{id:"input-group-2",label:"Ngày bắt đầu Campaign: ","label-for":"input-2"}},[a("datepicker",{attrs:{format:"dd/MM/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,placeholder:"Chọn ngày bắt đầu Campaign (dd/mm/yyyy)","calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.formEditCampaign.from,callback:function(e){t.$set(t.formEditCampaign,"from",e)},expression:"formEditCampaign.from"}})],1),t._v(" "),a("b-form-group",{attrs:{id:"input-group-2",label:"Ngày kết thúc Campaign: ","label-for":"input-3"}},[a("datepicker",{attrs:{format:"dd/MM/yyyy",bootstrapStyling:!0,"monday-first":!0,"full-month-name":!0,placeholder:"Chọn ngày kết thúc Campaign (dd/mm/yyyy)","calendar-button":!0,"calendar-button-icon":"ion ion-md-calendar","clear-button":!0},model:{value:t.formEditCampaign.to,callback:function(e){t.$set(t.formEditCampaign,"to",e)},expression:"formEditCampaign.to"}})],1)],1),t._v(" "),a("b-button",{staticClass:"mt-3",attrs:{variant:"primary",block:""},on:{click:t.updateCampaign}},[t._v("Cập nhập")])],1),t._v(" "),a("b-card",[a("b-table",{attrs:{id:"my-table",small:"",fields:t.fields,items:t.items,"per-page":t.perPage,"current-page":t.currentPage,responsive:"sm"},scopedSlots:t._u([{key:"cell(stt)",fn:function(e){return[t._v("\n          "+t._s(e.index+1)+"\n        ")]}},{key:"cell(tencam)",fn:function(e){return[t._v("\n          "+t._s(e.item.name)+"\n        ")]}},{key:"cell(ngaybd)",fn:function(e){return[t._v("\n          "+t._s(t.moment(e.item.activeTime).format("DD/MM/YYYY"))+"\n        ")]}},{key:"cell(ngaykt)",fn:function(e){return[t._v("\n          "+t._s(t.moment(e.item.expireTime).format("DD/MM/YYYY"))+"\n        ")]}},{key:"cell(btnedit)",fn:function(e){return[a("b-btn",{staticClass:"d-block btn-lg",attrs:{variant:"outline-success icon-btn"},on:{click:function(a){return t.cConfig(e)}}},[a("span",{staticClass:"ion ion-md-settings"})])]}},{key:"cell(btneditcam)",fn:function(e){return[a("b-btn",{staticClass:"d-block btn-lg",attrs:{variant:"outline-info icon-btn"},on:{click:function(a){return t.cEdit(e)}}},[a("span",{staticClass:"ion ion-md-create"})])]}},{key:"cell(btnremove)",fn:function(e){return[a("b-btn",{staticClass:"btn-lg",attrs:{variant:"outline-danger icon-btn"},on:{click:function(a){return t.removeCampaign(e)}}},[a("i",{staticClass:"ion ion-md-close"})])]}}])})],1),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"overflow-auto"},[a("b-pagination",{attrs:{items:t.items,"total-rows":t.rows,"per-page":t.perPage,"aria-controls":"my-table",align:"right"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-modal",{ref:"modal-noti",attrs:{"hide-footer":"",title:"Thông báo"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("Chưa có Campaign cho cộng tác viên thời vụ, đóng thông báo để tạo chúng")])]),t._v(" "),a("b-button",{staticClass:"mt-3",attrs:{variant:"outline-danger",block:""},on:{click:t.hideModal}},[t._v("Đóng")])],1)],1)},[],!1,null,null,null);e.default=d.exports},iI7v:function(t,e){},lz83:function(t,e){},rNeS:function(t,e,a){"use strict";var i=a("RUzx"),n=a.n(i),o=a("wX3c"),s={name:"multi-select-station",components:{Multiselect:n.a},props:{moduleIds:{},cartId:{},stationIds:{},autoClose:{},hideSelected:{},limitProp:{default:5},isDisabled:{default:!1}},data:function(){return{cartIds:null,autoClosed:!0,hideSelect:!1,option:[],options:[]}},created:function(){void 0!==this.autoClose&&null!==this.autoClose&&(this.autoClosed=this.autoClose),void 0!==this.hideSelected&&null!==this.hideSelected&&(this.hideSelect=this.hideSelected),this.getList()},watch:{hideSelected:function(t,e){this.hideSelect=this.hideSelected},autoClose:function(t,e){this.autoClosed=this.autoClose},option:function(t){var e=this.setList(t);this.$emit("handleCartSelected",e)},moduleIds:function(t,e){this.getList()}},methods:{setList:function(t){var e=this;return this.cartIds=[],t.forEach(function(t){t&&e.cartIds.push(t.id)}),this.cartIds.toString()},getList:function(){var t=this,e={id:this.moduleIds};o.a.getAllCartByModuleIds(e).then(function(e){e.data.success?(t.options=e.data.data,t.cartId&&(t.option=[],t.cartId.split(",").forEach(function(e){var a=t.options.find(function(t){return t.id===e});a&&t.option.push(a)}))):(t.options=[],t.option=[])}).catch(function(t){console.log(t)})}}},l=a("XyMi");var r=function(t){a("iI7v")},c=Object(l.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("multiselect",{staticClass:"multiselect-primary",attrs:{options:t.options,multiple:!0,placeholder:"Chọn giỏ",label:"name","track-by":"name",selectedLabel:"Đã chọn",deselectLabel:"Bỏ chọn",selectLabel:"Chọn",disabled:t.isDisabled,limit:t.limitProp,"hide-selected":t.hideSelect,"close-on-select":t.autoClosed},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[a("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("Rất tiếc. Không tìm thấy.")])])],1)},[],!1,r,"data-v-62b542e4",null);e.a=c.exports}});