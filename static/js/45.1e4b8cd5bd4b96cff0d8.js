webpackJsonp([45],{E9jG:function(t,e){},mJDL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("iR9c"),o=a("fZjL"),i=a.n(o),r=a("Zx67"),l=a.n(r),s=a("Zrlr"),c=a.n(s),d=a("wxAW"),p=a.n(d),m=a("zwoO"),u=a.n(m),_=a("Pf15"),f=a.n(_),g=function(t){function e(){return c()(this,e),u()(this,(e.__proto__||l()(e)).apply(this,arguments))}return f()(e,t),p()(e,null,[{key:"getStatusOptions",value:function(){var t=[{value:"",text:"Trạng thái profile"}];return i()(e.statusOptions).forEach(function(a){t.push({text:e.statusOptions[a],value:a})}),t}},{key:"getBriefStatusName",value:function(t){var a=parseInt(t);return isNaN(a)?e.briefStatus[0]:e.briefStatus[a]}},{key:"getBriefStatusClass",value:function(t){switch(parseInt(t)){case 1:return"badge badge-primary";case 2:return"badge badge-info";default:return"badge badge-secondary"}}}]),e}(a("MUME").a);g.LOCK_STATUS="lock",g.DISABLE_STATUS="disable",g.ACTIVE_STATUS="active",g.statusOptions={lock:"Bị khóa",disable:"Đã bị vô hiệu hóa",active:"Đang kích hoạt"},g.briefStatus={0:"Chưa có thông tin",1:"Đã xác nhận",2:"Đã có thông tin"};var v=g,h=a("F/2K"),b=a("l48y"),y=a("7+uW"),P=a("sUu7"),x=a("qOi5");y.default.use(P.a,{fieldsBagName:"veeFields"});var k={name:"modal-add-profile",components:{SingleSelectProfileRegion:b.a,SingleSelectProvince:h.a,SingleSelectDistrict:x.a},props:[],data:function(){return{logo:null,companyProfile:{status:"active",organization_type:null,fullname:"",region:"",cooperate_date:"",terminate_date:"",legal_representative_name:"",legal_representative_tel:"",legal_representative_cmnd:"",current_address_province:"",current_address_district:"",current_address_sub_district:"",current_address_detail:"",contact_tel:"",contact_email:"",bank_name:"",bank_account_number:"",bank_account_name:"",bank_brand:"",tax_iden_number:"",image_logo:"",cnb_confirmed:0},selectRegions:[{value:"Vận tải Đường bộ",text:"Vận tải Đường bộ"},{value:"Vận tải Đường sắt",text:"Vận tải Đường sắt"},{value:"Vận tải Hàng không",text:"Vận tải Hàng không"},{value:"Vận tải Đường thủy",text:"Vận tải Đường thủy"},{value:"Shop",text:"Shop"}]}},watch:{},methods:{addCompanyProfile:function(){var t=this,e=new FormData;e.append("file",this.logo),e.append("fullname",this.companyProfile.fullname),e.append("region",this.companyProfile.region),e.append("organization_type",this.companyProfile.organization_type),e.append("tax_iden_number",this.companyProfile.tax_iden_number),e.append("bank_account_number",this.companyProfile.bank_account_number),e.append("bank_name",this.companyProfile.bank_name),e.append("contact_tel",this.companyProfile.contact_tel),e.append("contact_email",this.companyProfile.contact_email),e.append("current_address_detail",this.companyProfile.current_address_detail),e.append("current_address_province",this.companyProfile.current_address_province),e.append("current_address_district",this.companyProfile.current_address_district),e.append("cooperate_date",this.companyProfile.cooperate_date),e.append("terminate_date",this.companyProfile.terminate_date),e.append("legal_representative_name",this.companyProfile.legal_representative_name),n.a.addCompanyProfile(e).then(function(e){e.data.success?(t.$notify({group:"default",type:"text-white bg-primary",text:e.data.message}),t.$bvModal.hide("modal-add-profile"),t.$emit("getListCompanyProfile")):t.$notify({group:"default",type:"text-white bg-warning",title:"Xảy ra lỗi",text:e.data.message})}).catch(function(t){console.log(t)}).then(function(){t.$stopLoading()})},handleSelectedRegion:function(t){this.region=t?t.id:""},setProvinceNow:function(t){this.companyProfile.current_address_province=t?t.id:null},setDistrictNow:function(t){this.companyProfile.current_address_district=t?t.id:null}}},C=a("XyMi");var S=function(t){a("E9jG")},w=Object(C.a)(k,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{ref:"modal-add-profile",attrs:{id:"modal-add-profile",size:"lg",title:"Thêm profile tổ chức","ok-only":"",static:""}},[a("b-row",[a("b-col",{staticClass:"text-left sperator-right",attrs:{md:"6"}},[a("b-form-row",[a("b-form-group",{staticClass:"col-md-12"},[a("template",{slot:"label"},[t._v("\n                            Tên công ty "),a("span",{staticClass:"red-text"},[t._v("(*)")])]),t._v(" "),a("b-form-input",{attrs:{placeholder:"Tên công ty"},model:{value:t.companyProfile.fullname,callback:function(e){t.$set(t.companyProfile,"fullname",e)},expression:"companyProfile.fullname"}})],2)],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col-md-6"},[a("template",{slot:"label"},[t._v("\n                            Loại đối tác "),a("span",{staticClass:"red-text"},[t._v("(*)")])]),t._v(" "),a("b-form-select",{staticClass:"mb-3",attrs:{options:t.selectRegions},scopedSlots:t._u([{key:"first",fn:function(){return[a("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("-- Chọn loại đối tác --")])]},proxy:!0}]),model:{value:t.companyProfile.organization_type,callback:function(e){t.$set(t.companyProfile,"organization_type",e)},expression:"companyProfile.organization_type"}})],2),t._v(" "),a("b-form-group",{staticClass:"col-md-6"},[a("template",{slot:"label"},[t._v("\n                            Mã số thuế "),a("span",{staticClass:"red-text"},[t._v("(*)")])]),t._v(" "),a("b-form-input",{attrs:{placeholder:"Mã số thuế"},model:{value:t.companyProfile.tax_iden_number,callback:function(e){t.$set(t.companyProfile,"tax_iden_number",e)},expression:"companyProfile.tax_iden_number"}})],2)],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col-md-6"},[a("template",{slot:"label"},[t._v("\n                            Tài khoản ngân hàng "),a("span",{staticClass:"red-text"},[t._v("(*)")])]),t._v(" "),a("b-form-input",{attrs:{placeholder:"Tài khoản ngân hàng"},model:{value:t.companyProfile.bank_account_number,callback:function(e){t.$set(t.companyProfile,"bank_account_number",e)},expression:"companyProfile.bank_account_number"}})],2),t._v(" "),a("b-form-group",{staticClass:"col-md-6"},[a("template",{slot:"label"},[t._v("\n                            Tên ngân hàng\n                        ")]),t._v(" "),a("b-form-input",{attrs:{placeholder:"Tên ngân hàng"},model:{value:t.companyProfile.bank_name,callback:function(e){t.$set(t.companyProfile,"bank_name",e)},expression:"companyProfile.bank_name"}})],2)],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col-md-6"},[a("template",{slot:"label"},[t._v("\n                            Số điện thoại liên hệ\n                        ")]),t._v(" "),a("b-form-input",{attrs:{placeholder:"Điện thoại liên hệ"},model:{value:t.companyProfile.contact_tel,callback:function(e){t.$set(t.companyProfile,"contact_tel",e)},expression:"companyProfile.contact_tel"}})],2),t._v(" "),a("b-form-group",{staticClass:"col-md-6"},[a("template",{slot:"label"},[t._v("\n                            Email liên hệ\n                        ")]),t._v(" "),a("b-form-input",{attrs:{placeholder:"Email liên hệ"},model:{value:t.companyProfile.contact_email,callback:function(e){t.$set(t.companyProfile,"contact_email",e)},expression:"companyProfile.contact_email"}})],2)],1),t._v(" "),a("b-form-row",[a("b-form-group",{staticClass:"col-md-6",attrs:{label:"Miền"}},[a("single-select-profile-region",{attrs:{region:t.companyProfile.region},on:{handleSelectedRegion:t.handleSelectedRegion}})],1),t._v(" "),a("b-form-group",{staticClass:"col-md-6"},[a("template",{slot:"label"},[t._v("\n                            Đại diện pháp lý\n                        ")]),t._v(" "),a("b-form-input",{attrs:{placeholder:"Đại diện pháp lý"},model:{value:t.companyProfile.legal_representative_name,callback:function(e){t.$set(t.companyProfile,"legal_representative_name",e)},expression:"companyProfile.legal_representative_name"}})],2)],1)],1),t._v(" "),a("b-col",{staticClass:"text-left",attrs:{md:"6"}},[a("b-form-group",{attrs:{label:"Chỗ ở hiện tại:"}},[a("b-form-input",{staticClass:"mb-2",attrs:{placeholder:"Số nhà, tên đường"},model:{value:t.companyProfile.current_address_detail,callback:function(e){t.$set(t.companyProfile,"current_address_detail",e)},expression:"companyProfile.current_address_detail"}}),t._v(" "),a("single-select-province",{attrs:{"province-id":t.companyProfile.current_address_province},on:{handleSelectedProvince:t.setProvinceNow}}),t._v(" "),a("div",{staticStyle:{"margin-top":"-1em"}},[a("single-select-district",{attrs:{"province-id":t.companyProfile.current_address_province,"district-id":t.companyProfile.current_address_district},on:{handleSelectedDistrict:t.setDistrictNow}})],1)],1),t._v(" "),a("b-form-row",[a("b-form-group",{attrs:{label:"Ngày bắt đầu hợp tác",md:"6"}},[a("b-form-input",{attrs:{type:"date",placeholder:"Chọn ngày"},model:{value:t.companyProfile.cooperate_date,callback:function(e){t.$set(t.companyProfile,"cooperate_date",e)},expression:"companyProfile.cooperate_date"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Ngày kết thúc hợp tác",md:"6"}},[a("b-form-input",{attrs:{type:"date",placeholder:"Chọn ngày"},model:{value:t.companyProfile.terminate_date,callback:function(e){t.$set(t.companyProfile,"terminate_date",e)},expression:"companyProfile.terminate_date"}})],1)],1),t._v(" "),a("b-form-row",[a("b-form-file",{attrs:{state:Boolean(t.logo),placeholder:"Chọn logo công ty","drop-placeholder":"Drop file here..."},model:{value:t.logo,callback:function(e){t.logo=e},expression:"logo"}})],1)],1)],1),t._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.addCompanyProfile()}}},[t._v("\n                Thêm mới profile\n            ")])],1)],2)],1)},[],!1,S,null,null).exports,T=a("QKlT"),N=a.n(T),M=a("PJh5"),I=a.n(M),Y={name:"manager-master-company-profile",components:{SingleSelectProfileRegion:b.a,SingleSelectProvince:h.a,ModalAddProfile:w,flatPickr:N.a},data:function(){return{taxIdenNumber:"",keyword:"",region:"",companyProfileId:"",profiles:[],appLoading:!1,firstTime:!0,currentPage:1,totalItems:0,perPage:10,status:"",checked:"",statusOptions:v.getStatusOptions(),checkedOptions:[{value:"",text:"Trạng thái xác nhận hồ sơ"},{value:1,text:"Đã xác nhận"},{value:2,text:"Đã có thông tin"},{value:0,text:"Chưa có thông tin"}],range_time_filter:null,range_time:null,rangeConfig:{mode:"range",altInput:!0,dateFormat:"d-m-Y",altFormat:"d-m-Y"},range_time_filter_options:[{value:null,text:"Options áp dụng time"},{value:"cooperate_date",text:"Ngày bắt đầu hơp tác"},{value:"terminate_date",text:"Ngày chấm dứt hợp tác"}],toggleExportModalShow:!1,URLExportedFile:"#",exportRight:!1,exporting:!1,exported:!1,exportTitles:[],downloaded:!0}},created:function(){this.search()},computed:{totalPages:function(){return Math.ceil(this.totalItems/this.perPage)}},watch:{},methods:{searchProfile:function(){this.currentPage=1,this.search()},getStartEndFromTimeRange:function(){if(!this.range_time)return{};var t=this.range_time.split("to").map(function(t){return t.trim()});return 2===t.length?{startTime:I()(t[0],"DD-MM-YYYY").format("YYYY-MM-DD"),endTime:I()(t[1],"DD-MM-YYYY").format("YYYY-MM-DD")}:void 0},search:function(){var t=this;this.appLoading=!0;var e=this.getStartEndFromTimeRange(),a={taxIdenNumber:this.taxIdenNumber,keyword:this.keyword,region:this.region,status:this.status,checked:this.checked,timeFilterType:this.range_time_filter,startTime:e.startTime,endTime:e.endTime,page:this.currentPage,limit:this.perPage};n.a.getCompanyProfileList(a).then(function(e){e.data.success&&(t.profiles=e.data.data.data,t.totalItems=e.data.data.total)}).catch(function(t){console.log(t)}).then(function(){t.appLoading=!1}),this.firstTime=!1},handleSelectedRegion:function(t){this.region=t?t.id:""},handleSelectedProvince:function(t){this.provinceId=t?t.id:""},getBriefStatusName:function(t){return v.getBriefStatusName(t)},getBriefStatusClass:function(t){return v.getBriefStatusClass(t)}}};var $=function(t){a("xw8M"),a("OEkN")},L=Object(C.a)(Y,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui-block"},[a("b-row",[a("b-col",{staticStyle:{"padding-top":"0.5em"}},[a("h4",{staticClass:"ui-block-heading"},[t._v("Quản lý profile chính của công ty")])]),t._v(" "),a("b-col",{staticClass:"text-right"},[a("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-add-profile",modifiers:{"modal-add-profile":!0}}],attrs:{variant:"success"}},[t._v("+ Tạo mới profile công ty")]),t._v(" "),a("modal-add-profile",{on:{getListCompanyProfile:t.search}})],1)],1)],1),t._v(" "),a("div",{staticClass:"mb-2"},[a("b-row",{staticClass:"h-col-50"},[a("b-col",{attrs:{md:"2"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.taxIdenNumber,expression:"taxIdenNumber"}],staticClass:"form-control",attrs:{placeholder:"Mã số thuế",type:"text",min:"9",max:"12"},domProps:{value:t.taxIdenNumber},on:{input:function(e){e.target.composing||(t.taxIdenNumber=e.target.value)}}})]),t._v(" "),a("b-col",{attrs:{md:"2"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Tên công ty, mã công ty"},domProps:{value:t.keyword},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchProfile(e)},input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]),t._v(" "),a("b-col",{attrs:{md:"2"}},[a("single-select-profile-region",{on:{handleSelectedRegion:t.handleSelectedRegion}})],1),t._v(" "),a("b-col",{staticClass:"mb-2",attrs:{md:"2"}},[a("b-form-select",{attrs:{options:t.statusOptions},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1),t._v(" "),a("b-col",{staticClass:"mb-2",attrs:{md:"2"}},[a("b-form-select",{attrs:{options:t.range_time_filter_options},model:{value:t.range_time_filter,callback:function(e){t.range_time_filter=e},expression:"range_time_filter"}})],1),t._v(" "),a("b-col",{staticClass:"mb-2",attrs:{md:"2"}},[a("flat-pickr",{attrs:{config:t.rangeConfig,placeholder:"Chọn khoảng thời gian"},model:{value:t.range_time,callback:function(e){t.range_time=e},expression:"range_time"}})],1)],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"text-right",attrs:{md:"12"}},[a("b-btn",{attrs:{type:"button",variant:"primary"},on:{click:function(e){return t.searchProfile()}}},[a("i",{staticClass:"sidenav-icon ion ion-md-search"}),t._v(" Tìm kiếm")])],1)],1)],1),t._v(" "),a("div",{staticClass:"mb-3"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.appLoading,expression:"appLoading"}],staticClass:"wrapper-list-master"},[t.profiles.length>0?a("b-card",{attrs:{"no-body":""}},[a("table",{staticClass:"table mb-0 table-hover table-bordered"},[a("thead",[a("tr",[a("th",[t._v("STT")]),t._v(" "),a("th",[t._v("Loại đối tác")]),t._v(" "),a("th",[t._v("Tên công ty")]),t._v(" "),a("th",[t._v("Mã công ty")]),t._v(" "),a("th",[t._v("Mã số thuế")]),t._v(" "),a("th",[t._v("Khu vực")]),t._v(" "),a("th",[t._v("Ngày bắt đầu hợp tác")]),t._v(" "),a("th",[t._v("Trạng thái")]),t._v(" "),a("th",[t._v("Action")])])]),t._v(" "),a("tbody",t._l(t.profiles,function(e,n){return a("tr",[a("td",[t._v(t._s(n+1))]),t._v(" "),a("td",[t._v(t._s(e.organization_type))]),t._v(" "),a("td",[e.image_logo?a("img",{staticClass:"img-circle",staticStyle:{"border-radius":"50%"},attrs:{src:e.image_logo,width:"35",height:"35",alt:"avatar"}}):t._e(),t._v("\n                                   "+t._s(e.fullname)+"\n                            ")]),t._v(" "),a("td",[t._v(t._s(e.organization_code))]),t._v(" "),a("td",[t._v(t._s(e.tax_iden_number))]),t._v(" "),a("td",[t._v(t._s(e.region))]),t._v(" "),a("td",[t._v(t._s(e.cooperate_date))]),t._v(" "),a("td",[a("span",{class:t.getBriefStatusClass(e.checked)},[t._v("Đang hợp tác")])]),t._v(" "),a("td",[a("router-link",{staticClass:"btn btn-outline-secondary",attrs:{to:{name:"edit-master-profile-company",params:{id:e.id}}}},[a("i",{staticClass:"ion ion-md-create"})])],1)])}),0)]),t._v(" "),t.totalPages>1?a("div",{staticClass:"mt-3"},[a("b-row",[a("b-col",{attrs:{md:"6"}},[a("b-pagination",{attrs:{"total-rows":t.totalItems,"per-page":t.perPage},on:{input:t.search},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{attrs:{md:"6"}},[a("span",{staticClass:"text-muted"},[t._v("Trang "+t._s(t.currentPage)+" trên "+t._s(t.totalPages))])])],1)],1):t._e()]):t._e(),t._v(" "),!1===t.appLoading&&0===t.profiles.length&&!1===t.firstTime?a("div",[a("span",{staticClass:"pl-3 font-weight-bold"},[t._v("Rất tiếc, không tìm thấy profile phù hợp.")])]):t._e()],1)])])},[],!1,$,"data-v-14d40448",null);e.default=L.exports},xw8M:function(t,e){}});